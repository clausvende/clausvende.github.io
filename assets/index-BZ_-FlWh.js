`&&(n=n.substr(1),te=1),b+C+(I=(i=Lg.apply(this,[n,t])).reduce(function(fe,le){return fe+le},0))>e||te){if(I>e){for(c=Gy.apply(this,[n,i,e-(b+C),e]),w.push(c.shift()),w=[c.pop()];c.length;)B.push([c.shift()]);I=i.slice(n.length-(w[0]?w[0].length:0)).reduce(function(fe,le){return fe+le},0)}else w=[n];B.push(w),b=I+h,C=P}else w.push(n),b+=C+I,C=P}return g=h?function(fe,le){return(le?D:"")+fe.join(" ")}:function(fe){return fe.join(" ")},B.map(g)},Gc.splitTextToSize=function(A,e,t){var n,i=(t=t||{}).fontSize||this.internal.getFontSize(),a=(function(w){if(w.widths&&w.kerning)return{widths:w.widths,kerning:w.kerning};var B=this.internal.getFont(w.fontName,w.fontStyle);return B.metadata.Unicode?{widths:B.metadata.Unicode.widths||{0:1},kerning:B.metadata.Unicode.kerning||{}}:{font:B.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(A)?A:String(A).split(/\r?\n/);var l=1*this.internal.scaleFactor*e/i;a.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=t.lineIndent;var c,h,g=[];for(c=0,h=n.length;c<h;c++)g=g.concat(qy.apply(this,[n[c],l,a]));return g},function(A){A.__fontmetrics__=A.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},n={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],n["0123456789abcdef"[i]]=e[i];var a=function(B){return"0x"+parseInt(B,10).toString(16)},l=A.__fontmetrics__.compress=function(B){var b,C,I,x,P=["{"];for(var D in B){if(b=B[D],isNaN(parseInt(D,10))?C="'"+D+"'":(D=parseInt(D,10),C=(C=a(D).slice(2)).slice(0,-1)+n[C.slice(-1)]),typeof b=="number")b<0?(I=a(b).slice(3),x="-"):(I=a(b).slice(2),x=""),I=x+I.slice(0,-1)+n[I.slice(-1)];else{if(HA(b)!=="object")throw new Error("Don't know what to do with value type "+HA(b)+".");I=l(b)}P.push(C+I)}return P.push("}"),P.join("")},c=A.__fontmetrics__.uncompress=function(B){if(typeof B!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,C,I,x,P={},D=1,V=P,te=[],fe="",le="",ge=B.length-1,j=1;j<ge;j+=1)(x=B[j])=="'"?b?(I=b.join(""),b=void 0):b=[]:b?b.push(x):x=="{"?(te.push([V,I]),V={},I=void 0):x=="}"?((C=te.pop())[0][C[1]]=V,I=void 0,V=C[0]):x=="-"?D=-1:I===void 0?t.hasOwnProperty(x)?(fe+=t[x],I=parseInt(fe,16)*D,D=1,fe=""):fe+=x:t.hasOwnProperty(x)?(le+=t[x],V[I]=parseInt(le,16)*D,D=1,I=void 0,le=""):le+=x;return P},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},g={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},w={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};A.events.push(["addFont",function(B){var b=B.font,C=w.Unicode[b.postScriptName];C&&(b.metadata.Unicode={},b.metadata.Unicode.widths=C.widths,b.metadata.Unicode.kerning=C.kerning);var I=g.Unicode[b.postScriptName];I&&(b.metadata.Unicode.encoding=I,b.encoding=I.codePages[0])}])}(xt.API),function(A){var e=function(t){for(var n=t.length,i=new Uint8Array(n),a=0;a<n;a++)i[a]=t.charCodeAt(a);return i};A.API.events.push(["addFont",function(t){var n=void 0,i=t.font,a=t.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(l,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(qf(c)),l.metadata=A.API.TTFFont.open(c),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(i,n)}}])}(xt),function(A){function e(){return(Dt.canvg?Promise.resolve(Dt.canvg):u2(()=>import("./index.es-T-dvudZ_.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}xt.API.addSvgAsImage=function(t,n,i,a,l,c,h,g){if(isNaN(n)||isNaN(i))throw YA.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(l))throw YA.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var w=document.createElement("canvas");w.width=a,w.height=l;var B=w.getContext("2d");B.fillStyle="#fff",B.fillRect(0,0,w.width,w.height);var b={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},C=this;return e().then(function(I){return I.fromString(B,t,b)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(I){return I.render(b)}).then(function(){C.addImage(w.toDataURL("image/jpeg",1),n,i,a,l,h,g)})}}(),xt.API.putTotalPages=function(A){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(A,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(A,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,t);return this},xt.API.viewerPreferences=function(A,e){var t;A=A||{},e=e||!1;var n,i,a,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(l),h=[],g=0,w=0,B=0;function b(I,x){var P,D=!1;for(P=0;P<I.length;P+=1)I[P]===x&&(D=!0);return D}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,A==="reset"||e===!0){var C=c.length;for(B=0;B<C;B+=1)t[c[B]].value=t[c[B]].defaultValue,t[c[B]].explicitSet=!1}if(HA(A)==="object"){for(i in A)if(a=A[i],b(c,i)&&a!==void 0){if(t[i].type==="boolean"&&typeof a=="boolean")t[i].value=a;else if(t[i].type==="name"&&b(t[i].valueSet,a))t[i].value=a;else if(t[i].type==="integer"&&Number.isInteger(a))t[i].value=a;else if(t[i].type==="array"){for(g=0;g<a.length;g+=1)if(n=!0,a[g].length===1&&typeof a[g][0]=="number")h.push(String(a[g]-1));else if(a[g].length>1){for(w=0;w<a[g].length;w+=1)typeof a[g][w]!="number"&&(n=!1);n===!0&&h.push([a[g][0]-1,a[g][1]-1].join(" "))}t[i].value="["+h.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var I,x=[];for(I in t)t[I].explicitSet===!0&&(t[I].type==="name"?x.push("/"+I+" /"+t[I].value):x.push("/"+I+" "+t[I].value));x.length!==0&&this.internal.write(`/ViewerPreferences
         .`+K2+H7+GC)},P7=function(A,e){var t=A.ownerDocument;if(t){var n=t.createElement("style");n.textContent=e,A.appendChild(n)}},N_=function(){function A(){}return A.getOrigin=function(e){var t=A._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},A.isSameOrigin=function(e){return A.getOrigin(e)===A._origin},A.setContext=function(e){A._link=e.document.createElement("a"),A._origin=A.getOrigin(e.location.href)},A._origin="about:blank",A}(),k7=function(){function A(e,t){this.context=e,this._options=t,this._cache={}}return A.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(Rm(e)||G7(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},A.prototype.match=function(e){return this._cache[e]},A.prototype.loadImage=function(e){return mi(this,void 0,void 0,function(){var t,n,i,a,l=this;return ri(this,function(c){switch(c.label){case 0:return t=N_.isSameOrigin(e),n=!Nm(e)&&this._options.useCORS===!0&&Nr.SUPPORT_CORS_IMAGES&&!t,i=!Nm(e)&&!t&&!Rm(e)&&typeof this._options.proxy=="string"&&Nr.SUPPORT_CORS_XHR&&!n,!t&&this._options.allowTaint===!1&&!Nm(e)&&!Rm(e)&&!i&&!n?[2]:(a=e,i?[4,this.proxy(a)]:[3,2]);case 1:a=c.sent(),c.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(h,g){var w=new Image;w.onload=function(){return h(w)},w.onerror=g,(q7(a)||n)&&(w.crossOrigin="anonymous"),w.src=a,w.complete===!0&&setTimeout(function(){return h(w)},500),l._options.imageTimeout>0&&setTimeout(function(){return g("Timed out ("+l._options.imageTimeout+"ms) loading image")},l._options.imageTimeout)})];case 3:return[2,c.sent()]}})})},A.prototype.has=function(e){return typeof this._cache[e]<"u"},A.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},A.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var i=e.substring(0,256);return new Promise(function(a,l){var c=Nr.SUPPORT_RESPONSE_TYPE?"blob":"text",h=new XMLHttpRequest;h.onload=function(){if(h.status===200)if(c==="text")a(h.response);else{var B=new FileReader;B.addEventListener("load",function(){return a(B.result)},!1),B.addEventListener("error",function(b){return l(b)},!1),B.readAsDataURL(h.response)}else l("Failed to proxy resource "+i+" with status code "+h.status)},h.onerror=l;var g=n.indexOf("?")>-1?"&":"?";if(h.open("GET",""+n+g+"url="+encodeURIComponent(e)+"&responseType="+c),c!=="text"&&h instanceof XMLHttpRequest&&(h.responseType=c),t._options.imageTimeout){var w=t._options.imageTimeout;h.timeout=w,h.ontimeout=function(){return l("Timed out ("+w+"ms) proxying "+i)}}h.send()})},A}(),V7=/^data:image\/svg\+xml/i,K7=/^data:image\/.*;base64,/i,j7=/^data:image\/.*/i,G7=function(A){return Nr.SUPPORT_SVG_DRAWING||!z7(A)},Nm=function(A){return j7.test(A)},q7=function(A){return K7.test(A)},Rm=function(A){return A.substr(0,4)==="blob"},z7=function(A){return A.substr(-3).toLowerCase()==="svg"||V7.test(A)},ut=function(){function A(e,t){this.type=0,this.x=e,this.y=t}return A.prototype.add=function(e,t){return new A(this.x+e,this.y+t)},A}(),Jc=function(A,e,t){return new ut(A.x+(e.x-A.x)*t,A.y+(e.y-A.y)*t)},$g=function(){function A(e,t,n,i){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=i}return A.prototype.subdivide=function(e,t){var n=Jc(this.start,this.startControl,e),i=Jc(this.startControl,this.endControl,e),a=Jc(this.endControl,this.end,e),l=Jc(n,i,e),c=Jc(i,a,e),h=Jc(l,c,e);return t?new A(this.start,n,l,h):new A(h,c,a,this.end)},A.prototype.add=function(e,t){return new A(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},A.prototype.reverse=function(){return new A(this.end,this.endControl,this.startControl,this.start)},A}(),Os=function(A){return A.type===1},X7=function(){function A(e){var t=e.styles,n=e.bounds,i=Df(t.borderTopLeftRadius,n.width,n.height),a=i[0],l=i[1],c=Df(t.borderTopRightRadius,n.width,n.height),h=c[0],g=c[1],w=Df(t.borderBottomRightRadius,n.width,n.height),B=w[0],b=w[1],C=Df(t.borderBottomLeftRadius,n.width,n.height),I=C[0],x=C[1],P=[];P.push((a+h)/n.width),P.push((I+B)/n.width),P.push((l+x)/n.height),P.push((g+b)/n.height);var D=Math.max.apply(Math,P);D>1&&(a/=D,l/=D,h/=D,g/=D,B/=D,b/=D,I/=D,x/=D);var V=n.width-h,te=n.height-b,fe=n.width-B,le=n.height-x,ge=t.borderTopWidth,j=t.borderRightWidth,Q=t.borderBottomWidth,M=t.borderLeftWidth,W=$A(t.paddingTop,e.bounds.width),F=$A(t.paddingRight,e.bounds.width),T=$A(t.paddingBottom,e.bounds.width),L=$A(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||l>0?fn(n.left+M/3,n.top+ge/3,a-M/3,l-ge/3,xA.TOP_LEFT):new ut(n.left+M/3,n.top+ge/3),this.topRightBorderDoubleOuterBox=a>0||l>0?fn(n.left+V,n.top+ge/3,h-j/3,g-ge/3,xA.TOP_RIGHT):new ut(n.left+n.width-j/3,n.top+ge/3),this.bottomRightBorderDoubleOuterBox=B>0||b>0?fn(n.left+fe,n.top+te,B-j/3,b-Q/3,xA.BOTTOM_RIGHT):new ut(n.left+n.width-j/3,n.top+n.height-Q/3),this.bottomLeftBorderDoubleOuterBox=I>0||x>0?fn(n.left+M/3,n.top+le,I-M/3,x-Q/3,xA.BOTTOM_LEFT):new ut(n.left+M/3,n.top+n.height-Q/3),this.topLeftBorderDoubleInnerBox=a>0||l>0?fn(n.left+M*2/3,n.top+ge*2/3,a-M*2/3,l-ge*2/3,xA.TOP_LEFT):new ut(n.left+M*2/3,n.top+ge*2/3),this.topRightBorderDoubleInnerBox=a>0||l>0?fn(n.left+V,n.top+ge*2/3,h-j*2/3,g-ge*2/3,xA.TOP_RIGHT):new ut(n.left+n.width-j*2/3,n.top+ge*2/3),this.bottomRightBorderDoubleInnerBox=B>0||b>0?fn(n.left+fe,n.top+te,B-j*2/3,b-Q*2/3,xA.BOTTOM_RIGHT):new ut(n.left+n.width-j*2/3,n.top+n.height-Q*2/3),this.bottomLeftBorderDoubleInnerBox=I>0||x>0?fn(n.left+M*2/3,n.top+le,I-M*2/3,x-Q*2/3,xA.BOTTOM_LEFT):new ut(n.left+M*2/3,n.top+n.height-Q*2/3),this.topLeftBorderStroke=a>0||l>0?fn(n.left+M/2,n.top+ge/2,a-M/2,l-ge/2,xA.TOP_LEFT):new ut(n.left+M/2,n.top+ge/2),this.topRightBorderStroke=a>0||l>0?fn(n.left+V,n.top+ge/2,h-j/2,g-ge/2,xA.TOP_RIGHT):new ut(n.left+n.width-j/2,n.top+ge/2),this.bottomRightBorderStroke=B>0||b>0?fn(n.left+fe,n.top+te,B-j/2,b-Q/2,xA.BOTTOM_RIGHT):new ut(n.left+n.width-j/2,n.top+n.height-Q/2),this.bottomLeftBorderStroke=I>0||x>0?fn(n.left+M/2,n.top+le,I-M/2,x-Q/2,xA.BOTTOM_LEFT):new ut(n.left+M/2,n.top+n.height-Q/2),this.topLeftBorderBox=a>0||l>0?fn(n.left,n.top,a,l,xA.TOP_LEFT):new ut(n.left,n.top),this.topRightBorderBox=h>0||g>0?fn(n.left+V,n.top,h,g,xA.TOP_RIGHT):new ut(n.left+n.width,n.top),this.bottomRightBorderBox=B>0||b>0?fn(n.left+fe,n.top+te,B,b,xA.BOTTOM_RIGHT):new ut(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=I>0||x>0?fn(n.left,n.top+le,I,x,xA.BOTTOM_LEFT):new ut(n.left,n.top+n.height),this.topLeftPaddingBox=a>0||l>0?fn(n.left+M,n.top+ge,Math.max(0,a-M),Math.max(0,l-ge),xA.TOP_LEFT):new ut(n.left+M,n.top+ge),this.topRightPaddingBox=h>0||g>0?fn(n.left+Math.min(V,n.width-j),n.top+ge,V>n.width+j?0:Math.max(0,h-j),Math.max(0,g-ge),xA.TOP_RIGHT):new ut(n.left+n.width-j,n.top+ge),this.bottomRightPaddingBox=B>0||b>0?fn(n.left+Math.min(fe,n.width-M),n.top+Math.min(te,n.height-Q),Math.max(0,B-j),Math.max(0,b-Q),xA.BOTTOM_RIGHT):new ut(n.left+n.width-j,n.top+n.height-Q),this.bottomLeftPaddingBox=I>0||x>0?fn(n.left+M,n.top+Math.min(le,n.height-Q),Math.max(0,I-M),Math.max(0,x-Q),xA.BOTTOM_LEFT):new ut(n.left+M,n.top+n.height-Q),this.topLeftContentBox=a>0||l>0?fn(n.left+M+L,n.top+ge+W,Math.max(0,a-(M+L)),Math.max(0,l-(ge+W)),xA.TOP_LEFT):new ut(n.left+M+L,n.top+ge+W),this.topRightContentBox=h>0||g>0?fn(n.left+Math.min(V,n.width+M+L),n.top+ge+W,V>n.width+M+L?0:h-M+L,g-(ge+W),xA.TOP_RIGHT):new ut(n.left+n.width-(j+F),n.top+ge+W),this.bottomRightContentBox=B>0||b>0?fn(n.left+Math.min(fe,n.width-(M+L)),n.top+Math.min(te,n.height+ge+W),Math.max(0,B-(j+F)),b-(Q+T),xA.BOTTOM_RIGHT):new ut(n.left+n.width-(j+F),n.top+n.height-(Q+T)),this.bottomLeftContentBox=I>0||x>0?fn(n.left+M+L,n.top+le,Math.max(0,I-(M+L)),x-(Q+T),xA.BOTTOM_LEFT):new ut(n.left+M+L,n.top+n.height-(Q+T))}return A}(),xA;(function(A){A[A.TOP_LEFT=0]="TOP_LEFT",A[A.TOP_RIGHT=1]="TOP_RIGHT",A[A.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",A[A.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(xA||(xA={}));var fn=function(A,e,t,n,i){var a=4*((Math.sqrt(2)-1)/3),l=t*a,c=n*a,h=A+t,g=e+n;switch(i){case xA.TOP_LEFT:return new $g(new ut(A,g),new ut(A,g-c),new ut(h-l,e),new ut(h,e));case xA.TOP_RIGHT:return new $g(new ut(A,e),new ut(A+l,e),new ut(h,g-c),new ut(h,g));case xA.BOTTOM_RIGHT:return new $g(new ut(h,e),new ut(h,e+c),new ut(A+l,g),new ut(A,g));case xA.BOTTOM_LEFT:default:return new $g(new ut(h,g),new ut(h-l,g),new ut(A,e+c),new ut(A,e))}},Jp=function(A){return[A.topLeftBorderBox,A.topRightBorderBox,A.bottomRightBorderBox,A.bottomLeftBorderBox]},Y7=function(A){return[A.topLeftContentBox,A.topRightContentBox,A.bottomRightContentBox,A.bottomLeftContentBox]},Wp=function(A){return[A.topLeftPaddingBox,A.topRightPaddingBox,A.bottomRightPaddingBox,A.bottomLeftPaddingBox]},J7=function(){function A(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return A}(),ep=function(){function A(e,t){this.path=e,this.target=t,this.type=1}return A}(),W7=function(){function A(e){this.opacity=e,this.type=2,this.target=6}return A}(),Z7=function(A){return A.type===0},R_=function(A){return A.type===1},$7=function(A){return A.type===2},qC=function(A,e){return A.length===e.length?A.some(function(t,n){return t===e[n]}):!1},eD=function(A,e,t,n,i){return A.map(function(a,l){switch(l){case 0:return a.add(e,t);case 1:return a.add(e+n,t);case 2:return a.add(e+n,t+i);case 3:return a.add(e,t+i)}return a})},D_=function(){function A(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return A}(),O_=function(){function A(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new X7(this.container),this.container.styles.opacity<1&&this.effects.push(new W7(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new J7(n,i,a))}if(this.container.styles.overflowX!==0){var l=Jp(this.curves),c=Wp(this.curves);qC(l,c)?this.effects.push(new ep(l,6)):(this.effects.push(new ep(l,2)),this.effects.push(new ep(c,4)))}}return A.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,i=this.effects.slice(0);n;){var a=n.effects.filter(function(h){return!R_(h)});if(t||n.container.styles.position!==0||!n.parent){if(i.unshift.apply(i,a),t=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var l=Jp(n.curves),c=Wp(n.curves);qC(l,c)||i.unshift(new ep(c,6))}}else i.unshift.apply(i,a);n=n.parent}return i.filter(function(h){return ur(h.target,e)})},A}(),j2=function(A,e,t,n){A.container.elements.forEach(function(i){var a=ur(i.flags,4),l=ur(i.flags,2),c=new O_(i,A);ur(i.styles.display,2048)&&n.push(c);var h=ur(i.flags,8)?[]:n;if(a||l){var g=a||i.styles.isPositioned()?t:e,w=new D_(c);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var B=i.styles.zIndex.order;if(B<0){var b=0;g.negativeZIndex.some(function(I,x){return B>I.element.container.styles.zIndex.order?(b=x,!1):b>0}),g.negativeZIndex.splice(b,0,w)}else if(B>0){var C=0;g.positiveZIndex.some(function(I,x){return B>=I.element.container.styles.zIndex.order?(C=x+1,!1):C>0}),g.positiveZIndex.splice(C,0,w)}else g.zeroOrAutoZIndexOrTransformedOrOpacity.push(w)}else i.styles.isFloating()?g.nonPositionedFloats.push(w):g.nonPositionedInlineLevel.push(w);j2(c,w,a?w:t,h)}else i.styles.isInlineLevel()?e.inlineLevel.push(c):e.nonInlineLevel.push(c),j2(c,e,t,h);ur(i.flags,8)&&H_(i,h)})},H_=function(A,e){for(var t=A instanceof M2?A.start:1,n=A instanceof M2?A.reversed:!1,i=0;i<e.length;i++){var a=e[i];a.container instanceof y_&&typeof a.container.value=="number"&&a.container.value!==0&&(t=a.container.value),a.listValue=hd(t,a.container.styles.listStyleType,!0),t+=n?-1:1}},tD=function(A){var e=new O_(A,null),t=new D_(e),n=[];return j2(e,t,t,n),H_(e.container,n),t},zC=function(A,e){switch(e){case 0:return Ps(A.topLeftBorderBox,A.topLeftPaddingBox,A.topRightBorderBox,A.topRightPaddingBox);case 1:return Ps(A.topRightBorderBox,A.topRightPaddingBox,A.bottomRightBorderBox,A.bottomRightPaddingBox);case 2:return Ps(A.bottomRightBorderBox,A.bottomRightPaddingBox,A.bottomLeftBorderBox,A.bottomLeftPaddingBox);case 3:default:return Ps(A.bottomLeftBorderBox,A.bottomLeftPaddingBox,A.topLeftBorderBox,A.topLeftPaddingBox)}},AD=function(A,e){switch(e){case 0:return Ps(A.topLeftBorderBox,A.topLeftBorderDoubleOuterBox,A.topRightBorderBox,A.topRightBorderDoubleOuterBox);case 1:return Ps(A.topRightBorderBox,A.topRightBorderDoubleOuterBox,A.bottomRightBorderBox,A.bottomRightBorderDoubleOuterBox);case 2:return Ps(A.bottomRightBorderBox,A.bottomRightBorderDoubleOuterBox,A.bottomLeftBorderBox,A.bottomLeftBorderDoubleOuterBox);case 3:default:return Ps(A.bottomLeftBorderBox,A.bottomLeftBorderDoubleOuterBox,A.topLeftBorderBox,A.topLeftBorderDoubleOuterBox)}},nD=function(A,e){switch(e){case 0:return Ps(A.topLeftBorderDoubleInnerBox,A.topLeftPaddingBox,A.topRightBorderDoubleInnerBox,A.topRightPaddingBox);case 1:return Ps(A.topRightBorderDoubleInnerBox,A.topRightPaddingBox,A.bottomRightBorderDoubleInnerBox,A.bottomRightPaddingBox);case 2:return Ps(A.bottomRightBorderDoubleInnerBox,A.bottomRightPaddingBox,A.bottomLeftBorderDoubleInnerBox,A.bottomLeftPaddingBox);case 3:default:return Ps(A.bottomLeftBorderDoubleInnerBox,A.bottomLeftPaddingBox,A.topLeftBorderDoubleInnerBox,A.topLeftPaddingBox)}},rD=function(A,e){switch(e){case 0:return tp(A.topLeftBorderStroke,A.topRightBorderStroke);case 1:return tp(A.topRightBorderStroke,A.bottomRightBorderStroke);case 2:return tp(A.bottomRightBorderStroke,A.bottomLeftBorderStroke);case 3:default:return tp(A.bottomLeftBorderStroke,A.topLeftBorderStroke)}},tp=function(A,e){var t=[];return Os(A)?t.push(A.subdivide(.5,!1)):t.push(A),Os(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},Ps=function(A,e,t,n){var i=[];return Os(A)?i.push(A.subdivide(.5,!1)):i.push(A),Os(t)?i.push(t.subdivide(.5,!0)):i.push(t),Os(n)?i.push(n.subdivide(.5,!0).reverse()):i.push(n),Os(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},M_=function(A){var e=A.bounds,t=A.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},Zp=function(A){var e=A.styles,t=A.bounds,n=$A(e.paddingLeft,t.width),i=$A(e.paddingRight,t.width),a=$A(e.paddingTop,t.width),l=$A(e.paddingBottom,t.width);return t.add(n+e.borderLeftWidth,a+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+i),-(e.borderTopWidth+e.borderBottomWidth+a+l))},iD=function(A,e){return A===0?e.bounds:A===2?Zp(e):M_(e)},sD=function(A,e){return A===0?e.bounds:A===2?Zp(e):M_(e)},Dm=function(A,e,t){var n=iD(sh(A.styles.backgroundOrigin,e),A),i=sD(sh(A.styles.backgroundClip,e),A),a=aD(sh(A.styles.backgroundSize,e),t,n),l=a[0],c=a[1],h=Df(sh(A.styles.backgroundPosition,e),n.width-l,n.height-c),g=oD(sh(A.styles.backgroundRepeat,e),h,a,n,i),w=Math.round(n.left+h[0]),B=Math.round(n.top+h[1]);return[g,w,B,l,c]},Wc=function(A){return qA(A)&&A.value===mh.AUTO},Ap=function(A){return typeof A=="number"},aD=function(A,e,t){var n=e[0],i=e[1],a=e[2],l=A[0],c=A[1];if(!l)return[0,0];if($n(l)&&c&&$n(c))return[$A(l,t.width),$A(c,t.height)];var h=Ap(a);if(qA(l)&&(l.value===mh.CONTAIN||l.value===mh.COVER)){if(Ap(a)){var g=t.width/t.height;return g<a!=(l.value===mh.COVER)?[t.width,t.width/a]:[t.height*a,t.height]}return[t.width,t.height]}var w=Ap(n),B=Ap(i),b=w||B;if(Wc(l)&&(!c||Wc(c))){if(w&&B)return[n,i];if(!h&&!b)return[t.width,t.height];if(b&&h){var C=w?n:i*a,I=B?i:n/a;return[C,I]}var x=w?n:t.width,P=B?i:t.height;return[x,P]}if(h){var D=0,V=0;return $n(l)?D=$A(l,t.width):$n(c)&&(V=$A(c,t.height)),Wc(l)?D=V*a:(!c||Wc(c))&&(V=D/a),[D,V]}var te=null,fe=null;if($n(l)?te=$A(l,t.width):c&&$n(c)&&(fe=$A(c,t.height)),te!==null&&(!c||Wc(c))&&(fe=w&&B?te/n*i:t.height),fe!==null&&Wc(l)&&(te=w&&B?fe/i*n:t.width),te!==null&&fe!==null)return[te,fe];throw new Error("Unable to calculate background-size for element")},sh=function(A,e){var t=A[e];return typeof t>"u"?A[0]:t},oD=function(A,e,t,n,i){var a=e[0],l=e[1],c=t[0],h=t[1];switch(A){case 2:return[new ut(Math.round(n.left),Math.round(n.top+l)),new ut(Math.round(n.left+n.width),Math.round(n.top+l)),new ut(Math.round(n.left+n.width),Math.round(h+n.top+l)),new ut(Math.round(n.left),Math.round(h+n.top+l))];case 3:return[new ut(Math.round(n.left+a),Math.round(n.top)),new ut(Math.round(n.left+a+c),Math.round(n.top)),new ut(Math.round(n.left+a+c),Math.round(n.height+n.top)),new ut(Math.round(n.left+a),Math.round(n.height+n.top))];case 1:return[new ut(Math.round(n.left+a),Math.round(n.top+l)),new ut(Math.round(n.left+a+c),Math.round(n.top+l)),new ut(Math.round(n.left+a+c),Math.round(n.top+l+h)),new ut(Math.round(n.left+a),Math.round(n.top+l+h))];default:return[new ut(Math.round(i.left),Math.round(i.top)),new ut(Math.round(i.left+i.width),Math.round(i.top)),new ut(Math.round(i.left+i.width),Math.round(i.height+i.top)),new ut(Math.round(i.left),Math.round(i.height+i.top))]}},lD="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",XC="Hidden Text",uD=function(){function A(e){this._data={},this._document=e}return A.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),i=this._document.createElement("img"),a=this._document.createElement("span"),l=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",l.appendChild(n),i.src=lD,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=t,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(XC)),n.appendChild(a),n.appendChild(i);var c=i.offsetTop-a.offsetTop+2;n.removeChild(a),n.appendChild(this._document.createTextNode(XC)),n.style.lineHeight="normal",i.style.verticalAlign="super";var h=i.offsetTop-n.offsetTop+2;return l.removeChild(n),{baseline:c,middle:h}},A.prototype.getMetrics=function(e,t){var n=e+" "+t;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},A}(),P_=function(){function A(e,t){this.context=e,this.options=t}return A}(),cD=1e4,hD=function(A){ba(e,A);function e(t,n){var i=A.call(this,t,n)||this;return i._activeEffects=[],i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),n.canvas||(i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px"),i.fontMetrics=new uD(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),i}return e.prototype.applyEffects=function(t){for(var n=this;this._activeEffects.length;)this.popEffect();t.forEach(function(i){return n.applyEffect(i)})},e.prototype.applyEffect=function(t){this.ctx.save(),$7(t)&&(this.ctx.globalAlpha=t.opacity),Z7(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),R_(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return mi(this,void 0,void 0,function(){var n;return ri(this,function(i){switch(i.label){case 0:return n=t.element.container.styles,n.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return mi(this,void 0,void 0,function(){return ri(this,function(n){switch(n.label){case 0:if(ur(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,n,i){var a=this;if(n===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+i);else{var l=Xw(t.text);l.reduce(function(c,h){return a.ctx.fillText(h,c,t.bounds.top+i),c+a.ctx.measureText(h).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var n=t.fontVariant.filter(function(l){return l==="normal"||l==="small-caps"}).join(""),i=mD(t.fontFamily).join(", "),a=_d(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,n,t.fontWeight,a,i].join(" "),i,a]},e.prototype.renderTextNode=function(t,n){return mi(this,void 0,void 0,function(){var i,a,l,c,h,g,w,B,b=this;return ri(this,function(C){return i=this.createFontStyle(n),a=i[0],l=i[1],c=i[2],this.ctx.font=a,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",h=this.fontMetrics.getMetrics(l,c),g=h.baseline,w=h.middle,B=n.paintOrder,t.textBounds.forEach(function(I){B.forEach(function(x){switch(x){case 0:b.ctx.fillStyle=br(n.color),b.renderTextWithLetterSpacing(I,n.letterSpacing,g);var P=n.textShadow;P.length&&I.text.trim().length&&(P.slice(0).reverse().forEach(function(D){b.ctx.shadowColor=br(D.color),b.ctx.shadowOffsetX=D.offsetX.number*b.options.scale,b.ctx.shadowOffsetY=D.offsetY.number*b.options.scale,b.ctx.shadowBlur=D.blur.number,b.renderTextWithLetterSpacing(I,n.letterSpacing,g)}),b.ctx.shadowColor="",b.ctx.shadowOffsetX=0,b.ctx.shadowOffsetY=0,b.ctx.shadowBlur=0),n.textDecorationLine.length&&(b.ctx.fillStyle=br(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(D){switch(D){case 1:b.ctx.fillRect(I.bounds.left,Math.round(I.bounds.top+g),I.bounds.width,1);break;case 2:b.ctx.fillRect(I.bounds.left,Math.round(I.bounds.top),I.bounds.width,1);break;case 3:b.ctx.fillRect(I.bounds.left,Math.ceil(I.bounds.top+w),I.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&I.text.trim().length&&(b.ctx.strokeStyle=br(n.webkitTextStrokeColor),b.ctx.lineWidth=n.webkitTextStrokeWidth,b.ctx.lineJoin=window.chrome?"miter":"round",b.ctx.strokeText(I.text,I.bounds.left,I.bounds.top+g)),b.ctx.strokeStyle="",b.ctx.lineWidth=0,b.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,n,i){if(i&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var a=Zp(t),l=Wp(n);this.path(l),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,t.intrinsicWidth,t.intrinsicHeight,a.left,a.top,a.width,a.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return mi(this,void 0,void 0,function(){var n,i,a,l,c,h,V,V,g,w,B,b,fe,C,I,le,x,P,D,V,te,fe,le;return ri(this,function(ge){switch(ge.label){case 0:this.applyEffects(t.getEffects(4)),n=t.container,i=t.curves,a=n.styles,l=0,c=n.textNodes,ge.label=1;case 1:return l<c.length?(h=c[l],[4,this.renderTextNode(h,a)]):[3,4];case 2:ge.sent(),ge.label=3;case 3:return l++,[3,1];case 4:if(!(n instanceof w_))return[3,8];ge.label=5;case 5:return ge.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return V=ge.sent(),this.renderReplacedElement(n,i,V),[3,8];case 7:return ge.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof B_&&this.renderReplacedElement(n,i,n.canvas),!(n instanceof v_))return[3,12];ge.label=9;case 9:return ge.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return V=ge.sent(),this.renderReplacedElement(n,i,V),[3,12];case 11:return ge.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof E_&&n.tree?(g=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,g.render(n.tree)]):[3,14];case 13:w=ge.sent(),n.width&&n.height&&this.ctx.drawImage(w,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),ge.label=14;case 14:if(n instanceof Yw&&(B=Math.min(n.bounds.width,n.bounds.height),n.type===qp?n.checked&&(this.ctx.save(),this.path([new ut(n.bounds.left+B*.39363,n.bounds.top+B*.79),new ut(n.bounds.left+B*.16,n.bounds.top+B*.5549),new ut(n.bounds.left+B*.27347,n.bounds.top+B*.44071),new ut(n.bounds.left+B*.39694,n.bounds.top+B*.5649),new ut(n.bounds.left+B*.72983,n.bounds.top+B*.23),new ut(n.bounds.left+B*.84,n.bounds.top+B*.34085),new ut(n.bounds.left+B*.39363,n.bounds.top+B*.79)]),this.ctx.fillStyle=br(RC),this.ctx.fill(),this.ctx.restore()):n.type===zp&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+B/2,n.bounds.top+B/2,B/4,0,Math.PI*2,!0),this.ctx.fillStyle=br(RC),this.ctx.fill(),this.ctx.restore())),fD(n)&&n.value.length){switch(b=this.createFontStyle(a),fe=b[0],C=b[1],I=this.fontMetrics.getMetrics(fe,C).baseline,this.ctx.font=fe,this.ctx.fillStyle=br(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=gD(n.styles.textAlign),le=Zp(n),x=0,n.styles.textAlign){case 1:x+=le.width/2;break;case 2:x+=le.width;break}P=le.add(x,0,0,-le.height/2+1),this.ctx.save(),this.path([new ut(le.left,le.top),new ut(le.left+le.width,le.top),new ut(le.left+le.width,le.top+le.height),new ut(le.left,le.top+le.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Jf(n.value,P),a.letterSpacing,I),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ur(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(D=n.styles.listStyleImage,D.type!==0)return[3,18];V=void 0,te=D.url,ge.label=15;case 15:return ge.trys.push([15,17,,18]),[4,this.context.cache.match(te)];case 16:return V=ge.sent(),this.ctx.drawImage(V,n.bounds.left-(V.width+10),n.bounds.top),[3,18];case 17:return ge.sent(),this.context.logger.error("Error loading list-style-image "+te),[3,18];case 18:return[3,20];case 19:t.listValue&&n.styles.listStyleType!==-1&&(fe=this.createFontStyle(a)[0],this.ctx.font=fe,this.ctx.fillStyle=br(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",le=new ol(n.bounds.left,n.bounds.top+$A(n.styles.paddingTop,n.bounds.width),n.bounds.width,wC(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Jf(t.listValue,le),a.letterSpacing,wC(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),ge.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return mi(this,void 0,void 0,function(){var n,i,D,a,l,D,c,h,D,g,w,D,B,b,D,C,I,D,x,P,D;return ri(this,function(V){switch(V.label){case 0:if(ur(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:V.sent(),n=0,i=t.negativeZIndex,V.label=2;case 2:return n<i.length?(D=i[n],[4,this.renderStack(D)]):[3,5];case 3:V.sent(),V.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:V.sent(),a=0,l=t.nonInlineLevel,V.label=7;case 7:return a<l.length?(D=l[a],[4,this.renderNode(D)]):[3,10];case 8:V.sent(),V.label=9;case 9:return a++,[3,7];case 10:c=0,h=t.nonPositionedFloats,V.label=11;case 11:return c<h.length?(D=h[c],[4,this.renderStack(D)]):[3,14];case 12:V.sent(),V.label=13;case 13:return c++,[3,11];case 14:g=0,w=t.nonPositionedInlineLevel,V.label=15;case 15:return g<w.length?(D=w[g],[4,this.renderStack(D)]):[3,18];case 16:V.sent(),V.label=17;case 17:return g++,[3,15];case 18:B=0,b=t.inlineLevel,V.label=19;case 19:return B<b.length?(D=b[B],[4,this.renderNode(D)]):[3,22];case 20:V.sent(),V.label=21;case 21:return B++,[3,19];case 22:C=0,I=t.zeroOrAutoZIndexOrTransformedOrOpacity,V.label=23;case 23:return C<I.length?(D=I[C],[4,this.renderStack(D)]):[3,26];case 24:V.sent(),V.label=25;case 25:return C++,[3,23];case 26:x=0,P=t.positiveZIndex,V.label=27;case 27:return x<P.length?(D=P[x],[4,this.renderStack(D)]):[3,30];case 28:V.sent(),V.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var n=this;t.forEach(function(i,a){var l=Os(i)?i.start:i;a===0?n.ctx.moveTo(l.x,l.y):n.ctx.lineTo(l.x,l.y),Os(i)&&n.ctx.bezierCurveTo(i.startControl.x,i.startControl.y,i.endControl.x,i.endControl.y,i.end.x,i.end.y)})},e.prototype.renderRepeat=function(t,n,i,a){this.path(t),this.ctx.fillStyle=n,this.ctx.translate(i,a),this.ctx.fill(),this.ctx.translate(-i,-a)},e.prototype.resizeImage=function(t,n,i){var a;if(t.width===n&&t.height===i)return t;var l=(a=this.canvas.ownerDocument)!==null&&a!==void 0?a:document,c=l.createElement("canvas");c.width=Math.max(1,n),c.height=Math.max(1,i);var h=c.getContext("2d");return h.drawImage(t,0,0,t.width,t.height,0,0,n,i),c},e.prototype.renderBackgroundImage=function(t){return mi(this,void 0,void 0,function(){var n,i,a,l,c,h;return ri(this,function(g){switch(g.label){case 0:n=t.styles.backgroundImage.length-1,i=function(w){var B,b,C,W,ee,ue,L,ie,Q,I,W,ee,ue,L,ie,x,P,D,V,te,fe,le,ge,j,Q,M,W,F,T,L,ie,Se,ee,ue,ne,Be,X,ve,R,G,Z,re;return ri(this,function(ae){switch(ae.label){case 0:if(w.type!==0)return[3,5];B=void 0,b=w.url,ae.label=1;case 1:return ae.trys.push([1,3,,4]),[4,a.context.cache.match(b)];case 2:return B=ae.sent(),[3,4];case 3:return ae.sent(),a.context.logger.error("Error loading background-image "+b),[3,4];case 4:return B&&(C=Dm(t,n,[B.width,B.height,B.width/B.height]),W=C[0],ee=C[1],ue=C[2],L=C[3],ie=C[4],Q=a.ctx.createPattern(a.resizeImage(B,L,ie),"repeat"),a.renderRepeat(W,Q,ee,ue)),[3,6];case 5:ZN(w)?(I=Dm(t,n,[null,null,null]),W=I[0],ee=I[1],ue=I[2],L=I[3],ie=I[4],x=zN(w.angle,L,ie),P=x[0],D=x[1],V=x[2],te=x[3],fe=x[4],le=document.createElement("canvas"),le.width=L,le.height=ie,ge=le.getContext("2d"),j=ge.createLinearGradient(D,te,V,fe),pC(w.stops,P).forEach(function(_e){return j.addColorStop(_e.stop,br(_e.color))}),ge.fillStyle=j,ge.fillRect(0,0,L,ie),L>0&&ie>0&&(Q=a.ctx.createPattern(le,"repeat"),a.renderRepeat(W,Q,ee,ue))):$N(w)&&(M=Dm(t,n,[null,null,null]),W=M[0],F=M[1],T=M[2],L=M[3],ie=M[4],Se=w.position.length===0?[Gw]:w.position,ee=$A(Se[0],L),ue=$A(Se[Se.length-1],ie),ne=XN(w,ee,ue,L,ie),Be=ne[0],X=ne[1],Be>0&&X>0&&(ve=a.ctx.createRadialGradient(F+ee,T+ue,0,F+ee,T+ue,Be),pC(w.stops,Be*2).forEach(function(_e){return ve.addColorStop(_e.stop,br(_e.color))}),a.path(W),a.ctx.fillStyle=ve,Be!==X?(R=t.bounds.left+.5*t.bounds.width,G=t.bounds.top+.5*t.bounds.height,Z=X/Be,re=1/Z,a.ctx.save(),a.ctx.translate(R,G),a.ctx.transform(1,0,0,Z,0,0),a.ctx.translate(-R,-G),a.ctx.fillRect(F,re*(T-G)+G,L,ie*re),a.ctx.restore()):a.ctx.fill())),ae.label=6;case 6:return n--,[2]}})},a=this,l=0,c=t.styles.backgroundImage.slice(0).reverse(),g.label=1;case 1:return l<c.length?(h=c[l],[5,i(h)]):[3,4];case 2:g.sent(),g.label=3;case 3:return l++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,n,i){return mi(this,void 0,void 0,function(){return ri(this,function(a){return this.path(zC(i,n)),this.ctx.fillStyle=br(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,n,i,a){return mi(this,void 0,void 0,function(){var l,c;return ri(this,function(h){switch(h.label){case 0:return n<3?[4,this.renderSolidBorder(t,i,a)]:[3,2];case 1:return h.sent(),[2];case 2:return l=AD(a,i),this.path(l),this.ctx.fillStyle=br(t),this.ctx.fill(),c=nD(a,i),this.path(c),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return mi(this,void 0,void 0,function(){var n,i,a,l,c,h,g,w,B=this;return ri(this,function(b){switch(b.label){case 0:return this.applyEffects(t.getEffects(2)),n=t.container.styles,i=!fu(n.backgroundColor)||n.backgroundImage.length,a=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],l=dD(sh(n.backgroundClip,0),t.curves),i||n.boxShadow.length?(this.ctx.save(),this.path(l),this.ctx.clip(),fu(n.backgroundColor)||(this.ctx.fillStyle=br(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:b.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(C){B.ctx.save();var I=Jp(t.curves),x=C.inset?0:cD,P=eD(I,-x+(C.inset?1:-1)*C.spread.number,(C.inset?1:-1)*C.spread.number,C.spread.number*(C.inset?-2:2),C.spread.number*(C.inset?-2:2));C.inset?(B.path(I),B.ctx.clip(),B.mask(P)):(B.mask(I),B.ctx.clip(),B.path(P)),B.ctx.shadowOffsetX=C.offsetX.number+x,B.ctx.shadowOffsetY=C.offsetY.number,B.ctx.shadowColor=br(C.color),B.ctx.shadowBlur=C.blur.number,B.ctx.fillStyle=C.inset?br(C.color):"rgba(0,0,0,1)",B.ctx.fill(),B.ctx.restore()}),b.label=2;case 2:c=0,h=0,g=a,b.label=3;case 3:return h<g.length?(w=g[h],w.style!==0&&!fu(w.color)&&w.width>0?w.style!==2?[3,5]:[4,this.renderDashedDottedBorder(w.color,w.width,c,t.curves,2)]:[3,11]):[3,13];case 4:return b.sent(),[3,11];case 5:return w.style!==3?[3,7]:[4,this.renderDashedDottedBorder(w.color,w.width,c,t.curves,3)];case 6:return b.sent(),[3,11];case 7:return w.style!==4?[3,9]:[4,this.renderDoubleBorder(w.color,w.width,c,t.curves)];case 8:return b.sent(),[3,11];case 9:return[4,this.renderSolidBorder(w.color,c,t.curves)];case 10:b.sent(),b.label=11;case 11:c++,b.label=12;case 12:return h++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,n,i,a,l){return mi(this,void 0,void 0,function(){var c,h,g,w,B,b,C,I,x,P,D,V,te,fe,le,ge,le,ge;return ri(this,function(j){return this.ctx.save(),c=rD(a,i),h=zC(a,i),l===2&&(this.path(h),this.ctx.clip()),Os(h[0])?(g=h[0].start.x,w=h[0].start.y):(g=h[0].x,w=h[0].y),Os(h[1])?(B=h[1].end.x,b=h[1].end.y):(B=h[1].x,b=h[1].y),i===0||i===2?C=Math.abs(g-B):C=Math.abs(w-b),this.ctx.beginPath(),l===3?this.formatPath(c):this.formatPath(h.slice(0,2)),I=n<3?n*3:n*2,x=n<3?n*2:n,l===3&&(I=n,x=n),P=!0,C<=I*2?P=!1:C<=I*2+x?(D=C/(2*I+x),I*=D,x*=D):(V=Math.floor((C+x)/(I+x)),te=(C-V*I)/(V-1),fe=(C-(V+1)*I)/V,x=fe<=0||Math.abs(x-te)<Math.abs(x-fe)?te:fe),P&&(l===3?this.ctx.setLineDash([0,I+x]):this.ctx.setLineDash([I,x])),l===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=br(t),this.ctx.stroke(),this.ctx.setLineDash([]),l===2&&(Os(h[0])&&(le=h[3],ge=h[0],this.ctx.beginPath(),this.formatPath([new ut(le.end.x,le.end.y),new ut(ge.start.x,ge.start.y)]),this.ctx.stroke()),Os(h[1])&&(le=h[1],ge=h[2],this.ctx.beginPath(),this.formatPath([new ut(le.end.x,le.end.y),new ut(ge.start.x,ge.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return mi(this,void 0,void 0,function(){var n;return ri(this,function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=br(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=tD(t),[4,this.renderStack(n)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(P_),fD=function(A){return A instanceof b_||A instanceof C_?!0:A instanceof Yw&&A.type!==zp&&A.type!==qp},dD=function(A,e){switch(A){case 0:return Jp(e);case 2:return Y7(e);case 1:default:return Wp(e)}},gD=function(A){switch(A){case 1:return"center";case 2:return"right";case 0:default:return"left"}},pD=["-apple-system","system-ui"],mD=function(A){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?A.filter(function(e){return pD.indexOf(e)===-1}):A},wD=function(A){ba(e,A);function e(t,n){var i=A.call(this,t,n)||this;return i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=n,i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),i}return e.prototype.render=function(t){return mi(this,void 0,void 0,function(){var n,i;return ri(this,function(a){switch(a.label){case 0:return n=H2(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,BD(n)];case 1:return i=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=br(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(P_),BD=function(A){return new Promise(function(e,t){var n=new Image;n.onload=function(){e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(A))})},vD=function(){function A(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return A.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Ng([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},A.prototype.getTime=function(){return Date.now()-this.start},A.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Ng([this.id,this.getTime()+"ms"],e))},A.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Ng([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},A.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Ng([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},A.instances={},A}(),yD=function(){function A(e,t){var n;this.windowBounds=t,this.instanceName="#"+A.instanceCount++,this.logger=new vD({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new k7(this,e)}return A.instanceCount=1,A}(),k_=function(A,e){return e===void 0&&(e={}),CD(A,e)};typeof window<"u"&&N_.setContext(window);var CD=function(A,e){return mi(void 0,void 0,void 0,function(){var t,n,i,a,l,c,h,g,w,B,b,C,I,x,P,D,V,te,fe,le,j,ge,j,Q,M,W,F,T,L,ie,Se,ee,ue,ne,Be,X,ve,R,G,Z;return ri(this,function(re){switch(re.label){case 0:if(!A||typeof A!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=A.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(n=t.defaultView,!n)throw new Error("Document is not attached to a Window");return i={allowTaint:(Q=e.allowTaint)!==null&&Q!==void 0?Q:!1,imageTimeout:(M=e.imageTimeout)!==null&&M!==void 0?M:15e3,proxy:e.proxy,useCORS:(W=e.useCORS)!==null&&W!==void 0?W:!1},a=b2({logging:(F=e.logging)!==null&&F!==void 0?F:!0,cache:e.cache},i),l={windowWidth:(T=e.windowWidth)!==null&&T!==void 0?T:n.innerWidth,windowHeight:(L=e.windowHeight)!==null&&L!==void 0?L:n.innerHeight,scrollX:(ie=e.scrollX)!==null&&ie!==void 0?ie:n.pageXOffset,scrollY:(Se=e.scrollY)!==null&&Se!==void 0?Se:n.pageYOffset},c=new ol(l.scrollX,l.scrollY,l.windowWidth,l.windowHeight),h=new yD(a,c),g=(ee=e.foreignObjectRendering)!==null&&ee!==void 0?ee:!1,w={allowTaint:(ue=e.allowTaint)!==null&&ue!==void 0?ue:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:g,copyStyles:g},h.logger.debug("Starting document clone with size "+c.width+"x"+c.height+" scrolled to "+-c.left+","+-c.top),B=new jC(h,A,w),b=B.clonedReferenceElement,b?[4,B.toIFrame(t,c)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return C=re.sent(),I=Jw(b)||E7(b)?eL(b.ownerDocument):S0(h,b),x=I.width,P=I.height,D=I.left,V=I.top,te=bD(h,b,e.backgroundColor),fe={canvas:e.canvas,backgroundColor:te,scale:(Be=(ne=e.scale)!==null&&ne!==void 0?ne:n.devicePixelRatio)!==null&&Be!==void 0?Be:1,x:((X=e.x)!==null&&X!==void 0?X:0)+D,y:((ve=e.y)!==null&&ve!==void 0?ve:0)+V,width:(R=e.width)!==null&&R!==void 0?R:Math.ceil(x),height:(G=e.height)!==null&&G!==void 0?G:Math.ceil(P)},g?(h.logger.debug("Document cloned, using foreign object rendering"),j=new wD(h,fe),[4,j.render(b)]):[3,3];case 2:return le=re.sent(),[3,5];case 3:return h.logger.debug("Document cloned, element located at "+D+","+V+" with size "+x+"x"+P+" using computed rendering"),h.logger.debug("Starting DOM parsing"),ge=U_(h,b),te===ge.styles.backgroundColor&&(ge.styles.backgroundColor=Al.TRANSPARENT),h.logger.debug("Starting renderer for element at "+fe.x+","+fe.y+" with size "+fe.width+"x"+fe.height),j=new hD(h,fe),[4,j.render(ge)];case 4:le=re.sent(),re.label=5;case 5:return(!((Z=e.removeContainer)!==null&&Z!==void 0)||Z)&&(jC.destroy(C)||h.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),h.logger.debug("Finished rendering"),[2,le]}})})},bD=function(A,e,t){var n=e.ownerDocument,i=n.documentElement?Xf(A,getComputedStyle(n.documentElement).backgroundColor):Al.TRANSPARENT,a=n.body?Xf(A,getComputedStyle(n.body).backgroundColor):Al.TRANSPARENT,l=typeof t=="string"?Xf(A,t):t===null?Al.TRANSPARENT:4294967295;return e===n.documentElement?fu(i)?fu(a)?l:a:i:l};const ED=Object.freeze(Object.defineProperty({__proto__:null,default:k_},Symbol.toStringTag,{value:"Module"}));function _D({clientId:A}){const[e,t]=Ut.useState(null),[n,i]=Ut.useState([]),[a,l]=Ut.useState([]),c=Ut.useRef(null);Ut.useEffect(()=>{(async()=>{const b=await i2(JA(qt,"clients",A));if(!b.exists())return;t({id:b.id,...b.data()});const C=await ls(lr(qt,"clients",A,"sales"));i(C.docs.map(x=>({id:x.id,...x.data()})));const I=await ls(lr(qt,"clients",A,"payments"));l(I.docs.map(x=>({id:x.id,...x.data()})))})()},[A]);const h=async()=>{const b=(await k_(c.current)).toDataURL("image/png"),C=new xt,I=C.getImageProperties(b),x=C.internal.pageSize.getWidth(),P=I.height*x/I.width;C.addImage(b,"PNG",0,0,x,P),C.save(`estado-${e.name}.pdf`)};if(!e)return he.jsx("p",{children:"Cargando..."});const g=n.reduce((B,b)=>B+b.amount,0),w=a.reduce((B,b)=>B+b.amount,0);return he.jsxs("div",{className:"space-y-4",children:[he.jsxs("div",{ref:c,className:"space-y-2",children:[he.jsx("h2",{className:"text-lg font-semibold",children:"Estado de cuenta"}),he.jsxs("p",{children:[he.jsx("strong",{children:"Nombre:"})," ",e.name]}),he.jsxs("p",{children:[he.jsx("strong",{children:"Teléfono:"})," ",e.phone]}),e.notes&&he.jsxs("p",{children:[he.jsx("strong",{children:"Notas:"})," ",e.notes]}),he.jsxs("p",{children:[he.jsx("strong",{children:"Saldo actual:"})," $",e.balance||0]}),he.jsx("h3",{className:"font-semibold",children:"Ventas"}),he.jsx("ul",{className:"list-disc pl-5",children:n.map(B=>he.jsxs("li",{children:[new Date(B.date).toLocaleDateString()," - ",B.description," - $",B.amount]},B.id))}),he.jsx("h3",{className:"font-semibold",children:"Abonos"}),he.jsx("ul",{className:"list-disc pl-5",children:a.map(B=>he.jsxs("li",{children:[new Date(B.date).toLocaleDateString()," - $",B.amount]},B.id))}),he.jsxs("p",{children:[he.jsx("strong",{children:"Total compras:"})," $",g]}),he.jsxs("p",{children:[he.jsx("strong",{children:"Total abonos:"})," $",w]})]}),he.jsx("button",{onClick:h,className:"bg-blue-500 text-white px-3 py-2 rounded",children:"Generar PDF"})]})}function V_({clientId:A,onDone:e}){const[t,n]=Ut.useState(""),[i,a]=Ut.useState(new Date().toISOString().split("T")[0]),l=async c=>{c.preventDefault();const h=parseFloat(t);isNaN(h)||!i||(await B0(lr(qt,"clients",A,"payments"),{amount:h,date:new Date(i).getTime()}),await us(JA(qt,"clients",A),{balance:Ri(-h)}),e&&e())};return he.jsxs("form",{onSubmit:l,className:"bg-white p-4 rounded shadow max-w-md mx-auto space-y-4",children:[he.jsx("h2",{className:"text-lg font-semibold text-center",children:"Registrar abono"}),he.jsx("input",{className:"w-full border rounded px-3 py-2",value:t,onChange:c=>n(c.target.value),placeholder:"Monto del abono",type:"number",step:"0.01",required:!0}),he.jsx("input",{className:"w-full border rounded px-3 py-2",type:"date",value:i,onChange:c=>a(c.target.value),required:!0}),he.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 rounded",children:"Guardar"})]})}const UD="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20aria-hidden='true'%3e%3cpath%20d='M12%2015a3%203%200%20100-6%203%203%200%20000%206z'/%3e%3cpath%20fill-rule='evenodd'%20d='M1.323%2011.447C2.811%206.976%207.028%203.75%2012.001%203.75c4.97%200%209.185%203.223%2010.675%207.69.12.362.12.752%200%201.113-1.487%204.471-5.705%207.697-10.677%207.697-4.97%200-9.186-3.223-10.675-7.69a1.762%201.762%200%20010-1.113zM17.25%2012a5.25%205.25%200%2011-10.5%200%205.25%205.25%200%200110.5%200z'%20clip-rule='evenodd'/%3e%3c/svg%3e",SD="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20aria-hidden='true'%3e%3cpath%20fill-rule='evenodd'%20d='M5.625%201.5c-1.036%200-1.875.84-1.875%201.875v17.25c0%201.035.84%201.875%201.875%201.875h12.75c1.035%200%201.875-.84%201.875-1.875V12.75A3.75%203.75%200%200016.5%209h-1.875a1.875%201.875%200%2001-1.875-1.875V5.25A3.75%203.75%200%20009%201.5H5.625zM7.5%2015a.75.75%200%2001.75-.75h7.5a.75.75%200%20010%201.5h-7.5A.75.75%200%20017.5%2015zm.75%202.25a.75.75%200%20000%201.5H12a.75.75%200%20000-1.5H8.25z'%20clip-rule='evenodd'/%3e%3cpath%20d='M12.971%201.816A5.23%205.23%200%200114.25%205.25v1.875c0%20.207.168.375.375.375H16.5a5.23%205.23%200%20013.434%201.279%209.768%209.768%200%2000-6.963-6.963z'/%3e%3c/svg%3e",K_="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20aria-hidden='true'%3e%3cpath%20d='M4.913%202.658c2.075-.27%204.19-.408%206.337-.408%202.147%200%204.262.139%206.337.408%201.922.25%203.291%201.861%203.405%203.727a4.403%204.403%200%2000-1.032-.211%2050.89%2050.89%200%2000-8.42%200c-2.358.196-4.04%202.19-4.04%204.434v4.286a4.47%204.47%200%20002.433%203.984L7.28%2021.53A.75.75%200%20016%2021v-4.03a48.527%2048.527%200%2001-1.087-.128C2.905%2016.58%201.5%2014.833%201.5%2012.862V6.638c0-1.97%201.405-3.718%203.413-3.979z'/%3e%3cpath%20d='M15.75%207.5c-1.376%200-2.739.057-4.086.169C10.124%207.797%209%209.103%209%2010.609v4.285c0%201.507%201.128%202.814%202.67%202.94%201.243.102%202.5.157%203.768.165l2.782%202.781a.75.75%200%20001.28-.53v-2.39l.33-.026c1.542-.125%202.67-1.433%202.67-2.94v-4.286c0-1.505-1.125-2.811-2.664-2.94A49.392%2049.392%200%200015.75%207.5z'/%3e%3c/svg%3e",Zf="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20aria-hidden='true'%3e%3cpath%20d='M21.731%202.269a2.625%202.625%200%2000-3.712%200l-1.157%201.157%203.712%203.712%201.157-1.157a2.625%202.625%200%20000-3.712zM19.513%208.199l-3.712-3.712-8.4%208.4a5.25%205.25%200%2000-1.32%202.214l-.8%202.685a.75.75%200%2000.933.933l2.685-.8a5.25%205.25%200%20002.214-1.32l8.4-8.4z'/%3e%3cpath%20d='M5.25%205.25a3%203%200%2000-3%203v10.5a3%203%200%20003%203h10.5a3%203%200%20003-3V13.5a.75.75%200%2000-1.5%200v5.25a1.5%201.5%200%2001-1.5%201.5H5.25a1.5%201.5%200%2001-1.5-1.5V8.25a1.5%201.5%200%20011.5-1.5h5.25a.75.75%200%20000-1.5H5.25z'/%3e%3c/svg%3e",$f="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20aria-hidden='true'%3e%3cpath%20fill-rule='evenodd'%20d='M16.5%204.478v.227a48.816%2048.816%200%20013.878.512.75.75%200%2011-.256%201.478l-.209-.035-1.005%2013.07a3%203%200%2001-2.991%202.77H8.084a3%203%200%2001-2.991-2.77L4.087%206.66l-.209.035a.75.75%200%2001-.256-1.478A48.567%2048.567%200%20017.5%204.705v-.227c0-1.564%201.213-2.9%202.816-2.951a52.662%2052.662%200%20013.369%200c1.603.051%202.815%201.387%202.815%202.951zm-6.136-1.452a51.196%2051.196%200%20013.273%200C14.39%203.05%2015%203.684%2015%204.478v.113a49.488%2049.488%200%2000-6%200v-.113c0-.794.609-1.428%201.364-1.452zm-.355%205.945a.75.75%200%2010-1.5.058l.347%209a.75.75%200%20101.499-.058l-.346-9zm5.48.058a.75.75%200%2010-1.498-.058l-.347%209a.75.75%200%20001.5.058l.345-9z'%20clip-rule='evenodd'/%3e%3c/svg%3e",j_="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20aria-hidden='true'%3e%3cpath%20fill-rule='evenodd'%20d='M12%203.75a.75.75%200%2001.75.75v6.75h6.75a.75.75%200%20010%201.5h-6.75v6.75a.75.75%200%2001-1.5%200v-6.75H4.5a.75.75%200%20010-1.5h6.75V4.5a.75.75%200%2001.75-.75z'%20clip-rule='evenodd'/%3e%3c/svg%3e",G_="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20aria-hidden='true'%3e%3cpath%20d='M10.464%208.746c.227-.18.497-.311.786-.394v2.795a2.252%202.252%200%2001-.786-.393c-.394-.313-.546-.681-.546-1.004%200-.323.152-.691.546-1.004zM12.75%2015.662v-2.824c.347.085.664.228.921.421.427.32.579.686.579.991%200%20.305-.152.671-.579.991a2.534%202.534%200%2001-.921.42z'/%3e%3cpath%20fill-rule='evenodd'%20d='M12%202.25c-5.385%200-9.75%204.365-9.75%209.75s4.365%209.75%209.75%209.75%209.75-4.365%209.75-9.75S17.385%202.25%2012%202.25zM12.75%206a.75.75%200%2000-1.5%200v.816a3.836%203.836%200%2000-1.72.756c-.712.566-1.112%201.35-1.112%202.178%200%20.829.4%201.612%201.113%202.178.502.4%201.102.647%201.719.756v2.978a2.536%202.536%200%2001-.921-.421l-.879-.66a.75.75%200%2000-.9%201.2l.879.66c.533.4%201.169.645%201.821.75V18a.75.75%200%20001.5%200v-.81a4.124%204.124%200%20001.821-.749c.745-.559%201.179-1.344%201.179-2.191%200-.847-.434-1.632-1.179-2.191a4.122%204.122%200%2000-1.821-.75V8.354c.29.082.559.213.786.393l.415.33a.75.75%200%2000.933-1.175l-.415-.33a3.836%203.836%200%2000-1.719-.755V6z'%20clip-rule='evenodd'/%3e%3c/svg%3e";function YC({go:A}){const[e,t]=Ut.useState([]),[n,i]=Ut.useState(""),[a,l]=Ut.useState(!1),[c,h]=Ut.useState(null),[g,w]=Ut.useState(null),[B,b]=Ut.useState(null),C=async()=>{const P=await ls(lr(qt,"clients"));t(P.docs.map(D=>({id:D.id,...D.data()})))};Ut.useEffect(()=>{C()},[]);const I=e.filter(P=>P.name.toLowerCase().includes(n.toLowerCase())),x=async P=>{window.confirm("¿Eliminar este cliente?")&&(await jf(JA(qt,"clients",P.id)),C())};return he.jsxs("div",{className:"space-y-4",children:[he.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[he.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 bg-blue-500 text-white px-3 py-2 rounded w-full sm:w-auto",children:[he.jsx("img",{src:j_,alt:"",className:"w-5 h-5"}),"Nuevo cliente"]}),he.jsxs("div",{className:"relative w-full sm:w-auto",children:[he.jsx("input",{className:"border rounded px-3 py-2 pr-8 w-full",placeholder:"Buscar cliente",value:n,onChange:P=>i(P.target.value)}),n&&he.jsx("button",{type:"button",onClick:()=>i(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-700",children:"×"})]})]}),he.jsx("ul",{className:"grid gap-3",children:I.map(P=>{const D=(P.phone||"").replace(/\D/g,"");return he.jsxs("li",{className:"bg-white p-4 rounded shadow flex flex-col sm:flex-row sm:items-center justify-between gap-2 border-l-4 border-blue-500",children:[he.jsxs("div",{className:"flex-1",children:[he.jsx("p",{className:"font-medium",children:P.name}),he.jsxs("p",{className:"text-sm text-gray-800",children:["Deuda: $",P.balance||0]})]}),he.jsxs("span",{className:"flex gap-1",children:[he.jsx("button",{onClick:()=>A("client",P.id),children:he.jsx("img",{src:UD,alt:"ver",className:"icon"})}),he.jsx("button",{onClick:()=>w(P.id),children:he.jsx("img",{src:SD,alt:"estado",className:"icon"})}),he.jsx("button",{onClick:()=>b(P.id),children:he.jsx("img",{src:G_,alt:"abono",className:"icon"})}),D&&he.jsx("a",{href:`https://wa.me/${D}`,target:"_blank",rel:"noopener noreferrer",children:he.jsx("img",{src:K_,alt:"mensaje",className:"icon"})}),he.jsx("button",{onClick:()=>h(P),children:he.jsx("img",{src:Zf,alt:"editar",className:"icon"})}),he.jsx("button",{onClick:()=>x(P),children:he.jsx("img",{src:$f,alt:"eliminar",className:"icon"})})]})]},P.id)})}),a&&he.jsx(Au,{onClose:()=>l(!1),children:he.jsx(l2,{onDone:()=>{l(!1),C()}})}),c&&he.jsx(Au,{onClose:()=>h(null),children:he.jsx(l2,{client:c,onDone:()=>{h(null),C()}})}),g&&he.jsx(Au,{onClose:()=>w(null),children:he.jsx(_D,{clientId:g})}),B&&he.jsx(Au,{onClose:()=>b(null),children:he.jsx(V_,{clientId:B,onDone:()=>{b(null),C()}})})]})}function FD({id:A,go:e}){const[t,n]=Ut.useState(null),[i,a]=Ut.useState([]),[l,c]=Ut.useState([]),[h,g]=Ut.useState(""),[w,B]=Ut.useState(!1),[b,C]=Ut.useState(null),[I,x]=Ut.useState(""),[P,D]=Ut.useState(""),[V,te]=Ut.useState(null),[fe,le]=Ut.useState(""),[ge,j]=Ut.useState("");Ut.useEffect(()=>{const ne=rm(JA(qt,"clients",A),ve=>{n({id:ve.id,...ve.data()})}),Be=rm(lr(qt,"clients",A,"payments"),ve=>{a(ve.docs.map(R=>({id:R.id,...R.data()})))}),X=rm(lr(qt,"clients",A,"sales"),ve=>{c(ve.docs.map(R=>({id:R.id,...R.data()})))});return()=>{ne(),Be(),X()}},[A]);const Q=async ne=>{if(ne.preventDefault(),!h)return;const Be=parseFloat(h);await B0(lr(qt,"clients",A,"payments"),{amount:Be,date:Date.now()}),await us(JA(qt,"clients",A),{balance:Ri(-Be)}),g("")},M=ne=>{C(ne.id),x(ne.amount),D(new Date(ne.date).toISOString().split("T")[0])},W=()=>{C(null),x(""),D("")},F=async ne=>{const Be=parseFloat(I);if(isNaN(Be)||!P)return;await us(JA(qt,"clients",A,"payments",ne.id),{amount:Be,date:new Date(P).getTime()});const X=Be-ne.amount;X!==0&&await us(JA(qt,"clients",A),{balance:Ri(-X)}),W()},T=async ne=>{window.confirm("¿Eliminar este abono?")&&(await jf(JA(qt,"clients",A,"payments",ne.id)),await us(JA(qt,"clients",A),{balance:Ri(ne.amount)}))},L=ne=>{te(ne.id),le(ne.amount),j(new Date(ne.date).toISOString().split("T")[0])},ie=()=>{te(null),le(""),j("")},Se=async ne=>{const Be=parseFloat(fe);if(isNaN(Be)||!ge)return;await us(JA(qt,"clients",A,"sales",ne.id),{amount:Be,date:new Date(ge).getTime()});const X=Be-ne.amount;X!==0&&await us(JA(qt,"clients",A),{balance:Ri(X),total:Ri(X)}),ie()},ee=async ne=>{window.confirm("¿Eliminar esta venta?")&&(await jf(JA(qt,"clients",A,"sales",ne.id)),await us(JA(qt,"clients",A),{balance:Ri(-ne.amount),total:Ri(-ne.amount)}))},ue=async()=>{window.confirm("¿Eliminar este cliente?")&&(await jf(JA(qt,"clients",A)),e("clients"))};return t?he.jsxs("div",{className:"space-y-4",children:[he.jsx("button",{onClick:()=>e("list"),className:"text-blue-500",children:"Regresar"}),he.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[t.name,he.jsx("button",{onClick:()=>B(!0),children:he.jsx("img",{src:Zf,alt:"editar",className:"icon"})}),he.jsx("button",{onClick:ue,children:he.jsx("img",{src:$f,alt:"eliminar",className:"icon"})})]}),he.jsxs("p",{className:"text-gray-800",children:["Teléfono: ",t.phone]}),t.notes&&he.jsxs("p",{className:"text-gray-800",children:["Observaciones: ",t.notes]}),he.jsxs("p",{className:"text-gray-800",children:["Deuda actual: $",t.balance||0]}),he.jsxs("form",{onSubmit:Q,className:"flex gap-2",children:[he.jsx("input",{className:"border rounded px-3 py-2 flex-1",value:h,onChange:ne=>g(ne.target.value),placeholder:"Monto del abono",type:"number",step:"0.01"}),he.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-3 py-2 rounded",children:"Registrar abono"})]}),he.jsx("h3",{className:"font-semibold",children:"Ventas"}),he.jsx("ul",{className:"grid gap-2",children:l.map(ne=>he.jsx("li",{className:"bg-white p-2 rounded shadow",children:V===ne.id?he.jsxs(he.Fragment,{children:[he.jsx("input",{className:"border rounded px-2 py-1 mr-2",type:"number",step:"0.01",value:fe,onChange:Be=>le(Be.target.value)}),he.jsx("input",{className:"border rounded px-2 py-1 mr-2",type:"date",value:ge,onChange:Be=>j(Be.target.value)}),he.jsx("button",{onClick:()=>Se(ne),className:"bg-blue-500 text-white px-2 py-1 rounded mr-1",children:"Guardar"}),he.jsx("button",{onClick:ie,className:"px-2 py-1 rounded border",children:"Cancelar"})]}):he.jsxs(he.Fragment,{children:[new Date(ne.date).toLocaleDateString()," - ",ne.description," - $",ne.amount,he.jsx("button",{onClick:()=>L(ne),children:he.jsx("img",{src:Zf,alt:"editar",className:"icon"})}),he.jsx("button",{onClick:()=>ee(ne),children:he.jsx("img",{src:$f,alt:"eliminar",className:"icon"})})]})},ne.id))}),he.jsx("h3",{className:"font-semibold",children:"Abonos"}),he.jsx("ul",{className:"grid gap-2",children:i.map(ne=>he.jsx("li",{className:"bg-white p-2 rounded shadow",children:b===ne.id?he.jsxs(he.Fragment,{children:[he.jsx("input",{className:"border rounded px-2 py-1 mr-2",type:"number",step:"0.01",value:I,onChange:Be=>x(Be.target.value)}),he.jsx("input",{className:"border rounded px-2 py-1 mr-2",type:"date",value:P,onChange:Be=>D(Be.target.value)}),he.jsx("button",{onClick:()=>F(ne),className:"bg-blue-500 text-white px-2 py-1 rounded mr-1",children:"Guardar"}),he.jsx("button",{onClick:W,className:"px-2 py-1 rounded border",children:"Cancelar"})]}):he.jsxs(he.Fragment,{children:[new Date(ne.date).toLocaleDateString()," - $",ne.amount,he.jsx("button",{onClick:()=>M(ne),children:he.jsx("img",{src:Zf,alt:"editar",className:"icon"})}),he.jsx("button",{onClick:()=>T(ne),children:he.jsx("img",{src:$f,alt:"eliminar",className:"icon"})})]})},ne.id))}),w&&he.jsx(Au,{onClose:()=>B(!1),children:he.jsx(l2,{client:t,onDone:()=>B(!1)})})]}):he.jsx("p",{children:"Cargando..."})}function ID(){const[A,e]=Ut.useState({total:0,outstanding:0}),[t,n]=Ut.useState([]),[i,a]=Ut.useState(null),l=Ut.useRef(null),c=async()=>{const w=await ls(lr(qt,"clients"));let B=0,b=0;const C=Date.now(),I=720*60*60*1e3,x=[];for(const P of w.docs){const D=P.data();B+=D.total||0;const V=D.balance||0;if(b+=V,V>0){const te=await ls(lr(qt,"clients",P.id,"payments"));let fe=0;te.forEach(le=>{le.data().date>fe&&(fe=le.data().date)}),(!fe||C-fe>=I)&&x.push({id:P.id,name:D.name,phone:D.phone,balance:V})}}e({total:B,outstanding:b}),n(x)};Ut.useEffect(()=>{c()},[]);const h=async()=>{const w={},B=await ls(lr(qt,"clients")),b=[];for(const V of B.docs){const te=await ls(lr(qt,"clients",V.id,"sales")),fe=await ls(lr(qt,"clients",V.id,"payments"));b.push({id:V.id,...V.data(),sales:te.docs.map(le=>({id:le.id,...le.data()})),payments:fe.docs.map(le=>({id:le.id,...le.data()}))})}w.clients=b;const C=await ls(lr(qt,"usuarios"));w.usuarios=C.docs.map(V=>({id:V.id,...V.data()}));const I=await ls(lr(qt,"users"));w.users=I.docs.map(V=>({id:V.id,...V.data()}));const x=new Blob([JSON.stringify(w,null,2)],{type:"application/json"}),P=URL.createObjectURL(x),D=document.createElement("a");D.href=P,D.download="database.json",D.click(),URL.revokeObjectURL(P)},g=async w=>{const B=w.target.files[0];if(!B)return;const b=await B.text(),C=JSON.parse(b);if(C.clients)for(const I of C.clients){if(await Ah(JA(qt,"clients",I.id),{name:I.name,phone:I.phone,notes:I.notes,balance:I.balance,total:I.total}),I.sales)for(const x of I.sales)await Ah(JA(qt,"clients",I.id,"sales",x.id),{amount:x.amount,date:x.date});if(I.payments)for(const x of I.payments)await Ah(JA(qt,"clients",I.id,"payments",x.id),{amount:x.amount,date:x.date})}if(C.usuarios)for(const I of C.usuarios)await Ah(JA(qt,"usuarios",I.id),I);if(C.users)for(const I of C.users)await Ah(JA(qt,"users",I.id),I);alert("Importación completada")};return he.jsxs("div",{className:"space-y-4",children:[he.jsx("h2",{className:"text-lg font-semibold",children:"Finanzas"}),he.jsxs("p",{children:["Total ventas: $",A.total]}),he.jsxs("p",{children:["Saldo pendiente: $",A.outstanding]}),he.jsxs("div",{className:"flex gap-2",children:[he.jsx("button",{onClick:h,className:"bg-blue-500 text-white px-3 py-1 rounded",children:"Exportar DB"}),he.jsx("button",{onClick:()=>l.current.click(),className:"bg-blue-500 text-white px-3 py-1 rounded",children:"Importar DB"})]}),he.jsx("input",{type:"file",accept:"application/json",ref:l,style:{display:"none"},onChange:g}),t.length>0&&he.jsxs("div",{className:"space-y-2",children:[he.jsx("h3",{className:"text-lg font-semibold",children:"Clientes Morosos"}),he.jsx("ul",{className:"grid gap-3",children:t.map(w=>{const B=(w.phone||"").replace(/\D/g,"");return he.jsxs("li",{className:"bg-white p-4 rounded shadow flex justify-between items-center border-l-4 border-red-500",children:[he.jsxs("span",{className:"font-medium",children:[w.name," - $",w.balance]}),he.jsxs("span",{className:"flex gap-1",children:[he.jsx("button",{onClick:()=>a(w.id),children:he.jsx("img",{src:G_,alt:"abono",className:"icon"})}),B&&he.jsx("a",{href:`https://wa.me/${B}`,target:"_blank",rel:"noopener noreferrer",children:he.jsx("img",{src:K_,alt:"mensaje",className:"icon"})})]})]},w.id)})})]}),i&&he.jsx(Au,{onClose:()=>a(null),children:he.jsx(V_,{clientId:i,onDone:()=>{a(null),c()}})})]})}function JC({go:A,onDone:e,sale:t}){const[n,i]=Ut.useState([]),[a,l]=Ut.useState(t?.clientId||""),[c,h]=Ut.useState(t?.amount||""),[g,w]=Ut.useState(t?.description||""),[B,b]=Ut.useState(()=>t?.date?new Date(t.date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0]);Ut.useEffect(()=>{(async()=>{const x=await ls(lr(qt,"clients"));i(x.docs.map(P=>({id:P.id,...P.data()})))})()},[]),Ut.useEffect(()=>{t&&(l(t.clientId),h(t.amount),w(t.description),b(new Date(t.date).toISOString().split("T")[0]))},[t]);const C=async I=>{if(I.preventDefault(),!a||!c||!g||!B)return;const x=parseFloat(c),P=JA(qt,"clients",a);if(t){const D=x-t.amount;await us(JA(P,"sales",t.id),{amount:x,description:g,date:new Date(B).getTime()}),D!==0&&await us(P,{balance:Ri(D),total:Ri(D)})}else{const D=new Date(B).getTime();await B0(lr(P,"sales"),{amount:x,description:g,date:D}),await us(P,{balance:Ri(x),total:Ri(x)});const V=n.find(te=>te.id===a);if(V){const te=new xt({unit:"mm",format:[58,100]});te.setFontSize(12),te.text("Ticket de Venta",5,10),te.text(`Cliente: ${V.name}`,5,20),te.text(`Fecha: ${new Date(D).toLocaleString()}`,5,30),te.text(g,5,40),te.text(`Monto: $${x.toFixed(2)}`,5,50),te.save("ticket.pdf")}}e?e(a):A("client",a)};return he.jsxs("form",{onSubmit:C,className:"bg-white p-4 rounded shadow max-w-md mx-auto space-y-4",children:[he.jsx("h2",{className:"text-lg font-semibold text-center",children:t?"Editar Venta":"Nueva Venta"}),t?he.jsxs("p",{className:"font-medium",children:["Cliente: ",t.clientName]}):he.jsxs("select",{className:"w-full border rounded px-3 py-2",value:a,onChange:I=>l(I.target.value),required:!0,children:[he.jsx("option",{value:"",disabled:!0,children:"Selecciona un cliente"}),n.map(I=>he.jsx("option",{value:I.id,children:I.name},I.id))]}),he.jsx("input",{className:"w-full border rounded px-3 py-2",value:g,onChange:I=>w(I.target.value),placeholder:"Descripción",required:!0}),he.jsx("input",{className:"w-full border rounded px-3 py-2",value:c,onChange:I=>h(I.target.value),placeholder:"Monto",type:"number",step:"0.01",required:!0}),he.jsx("input",{className:"w-full border rounded px-3 py-2",type:"date",value:B,onChange:I=>b(I.target.value),required:!0}),he.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 rounded",children:t?"Guardar cambios":"Registrar venta"})]})}function QD(){const[A,e]=Ut.useState([]),[t,n]=Ut.useState(""),[i,a]=Ut.useState(!1),[l,c]=Ut.useState(null),h=async()=>{const B=await ls(lr(qt,"clients")),b=[];for(const C of B.docs)(await ls(lr(qt,"clients",C.id,"sales"))).forEach(x=>{b.push({id:x.id,clientId:C.id,clientName:C.data().name,...x.data()})});e(b)};Ut.useEffect(()=>{h()},[]);const g=async B=>{window.confirm("¿Eliminar esta venta?")&&(await jf(JA(qt,"clients",B.clientId,"sales",B.id)),await us(JA(qt,"clients",B.clientId),{balance:Ri(-B.amount),total:Ri(-B.amount)}),h())},w=A.filter(B=>B.clientName.toLowerCase().includes(t.toLowerCase()));return he.jsxs("div",{className:"space-y-4",children:[he.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[he.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 bg-blue-500 text-white px-3 py-2 rounded w-full sm:w-auto",children:[he.jsx("img",{src:j_,alt:"",className:"w-5 h-5"}),"Nueva venta"]}),he.jsxs("div",{className:"relative w-full sm:w-auto",children:[he.jsx("input",{className:"border rounded px-3 py-2 pr-8 w-full",placeholder:"Buscar por cliente",value:t,onChange:B=>n(B.target.value)}),t&&he.jsx("button",{type:"button",onClick:()=>n(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-700",children:"×"})]})]}),he.jsx("ul",{className:"grid gap-3",children:w.map(B=>he.jsxs("li",{className:"bg-white p-4 rounded shadow flex flex-col sm:flex-row sm:items-center justify-between gap-2 border-l-4 border-blue-500",children:[he.jsxs("div",{className:"flex-1",children:[he.jsx("p",{className:"font-medium",children:B.clientName}),he.jsxs("p",{className:"text-sm text-gray-800",children:[new Date(B.date).toLocaleDateString()," - ",B.description," - $",B.amount]})]}),he.jsxs("span",{className:"flex gap-1",children:[he.jsx("button",{onClick:()=>c(B),children:he.jsx("img",{src:Zf,alt:"editar",className:"icon"})}),he.jsx("button",{onClick:()=>g(B),children:he.jsx("img",{src:$f,alt:"eliminar",className:"icon"})})]})]},`${B.clientId}-${B.id}`))}),i&&he.jsx(Au,{onClose:()=>a(!1),children:he.jsx(JC,{onDone:()=>{a(!1),h()}})}),l&&he.jsx(Au,{onClose:()=>c(null),children:he.jsx(JC,{sale:l,onDone:()=>{c(null),h()}})})]})}const q_=Ut.createContext(null);function TD({children:A}){const[e,t]=Ut.useState(null),[n,i]=Ut.useState(null);Ut.useEffect(()=>PT(Ig,async h=>{if(h){if(!(await i2(JA(qt,"usuarios",h.email))).exists()){await By(Ig),t(null),i(null);return}t(h);const w=JA(qt,"users",h.uid),B=await i2(w);B.exists()?i(B.data().role):(await Ah(w,{role:"Vendedor"}),i("Vendedor"))}else t(null),i(null)}),[]);const a=()=>s6(Ig,ex),l=()=>By(Ig);return he.jsx(q_.Provider,{value:{user:e,role:n,login:a,logout:l},children:A})}const z_=()=>Ut.useContext(q_);function xD(){const{login:A}=z_();return he.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:he.jsxs("div",{className:"bg-white p-6 rounded shadow text-center space-y-4",children:[he.jsx("img",{src:"/assets/logo.png",alt:"Claus Vende",className:"h-12 mx-auto"}),he.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"Ingresa"}),he.jsx("button",{onClick:A,className:"bg-blue-900 text-white px-4 py-2 rounded",children:"Iniciar sesión con Google"})]})})}function LD({page:A,setPage:e}){const{user:t,role:n,logout:i}=z_(),[a,l]=Ut.useState(!1);if(!t)return he.jsx(xD,{});const c=b=>{const C=b?b.trim().split(/\s+/):[];return C.length<=2?{nombres:C[0]||"",apellidos:C.slice(1).join(" ")}:{nombres:C.slice(0,C.length-2).join(" "),apellidos:C.slice(C.length-2).join(" ")}},{nombres:h,apellidos:g}=c(t.displayName),w=(b,C=null)=>{e({name:b,clientId:C}),l(!1)};let B;switch(A.name){case"clients":B=he.jsx(YC,{go:w});break;case"sales":B=he.jsx(QD,{});break;case"finance":B=he.jsx(ID,{});break;case"client":B=he.jsx(FD,{id:A.clientId,go:w});break;default:B=he.jsx(YC,{go:w})}return he.jsxs("div",{className:"flex min-h-screen bg-gray-100",children:[a&&he.jsx("div",{className:"fixed inset-0 bg-black/50 md:hidden z-10",onClick:()=>l(!1)}),he.jsxs("aside",{className:`bg-blue-900 text-white w-60 p-4 space-y-2 fixed inset-y-0 left-0 transform ${a?"translate-x-0":"-translate-x-full"} transition-transform md:relative md:translate-x-0 z-20`,children:[he.jsx("button",{className:"md:hidden absolute top-2 right-2 text-2xl",onClick:()=>l(!1),children:"×"}),he.jsx("h1",{className:"text-lg font-semibold mb-4 text-center",children:"Menú"}),he.jsxs("nav",{className:"flex flex-col gap-2",children:[he.jsxs("button",{onClick:()=>w("sales"),className:"flex items-center gap-2 px-3 py-2 rounded hover:bg-blue-500 text-left group",children:[he.jsx("svg",{className:"w-5 h-5 text-current group-hover:text-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:he.jsx("path",{d:"M2.25 2.25a.75.75 0 000 1.5h1.386c.17 0 .318.114.362.278l2.558 9.592a3.752 3.752 0 00-2.806 3.63c0 .414.336.75.75.75h15.75a.75.75 0 000-1.5H5.378A2.25 2.25 0 017.5 15h11.218a.75.75 0 00.674-.421 60.358 60.358 0 002.96-7.228.75.75 0 00-.525-.965A60.864 60.864 0 005.68 4.509l-.232-.867A1.875 1.875 0 003.636 2.25H2.25zM3.75 20.25a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM16.5 20.25a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0z"})}),"Ventas"]}),he.jsxs("button",{onClick:()=>w("clients"),className:"flex items-center gap-2 px-3 py-2 rounded hover:bg-blue-500 text-left group",children:[he.jsxs("svg",{className:"w-5 h-5 text-current group-hover:text-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:[he.jsx("path",{"fill-rule":"evenodd",d:"M8.25 6.75a3.75 3.75 0 117.5 0 3.75 3.75 0 01-7.5 0zM15.75 9.75a3 3 0 116 0 3 3 0 01-6 0zM2.25 9.75a3 3 0 116 0 3 3 0 01-6 0zM6.31 15.117A6.745 6.745 0 0112 12a6.745 6.745 0 016.709 7.498.75.75 0 01-.372.568A12.696 12.696 0 0112 21.75c-2.305 0-4.47-.612-6.337-1.684a.75.75 0 01-.372-.568 6.787 6.787 0 011.019-4.38z","clip-rule":"evenodd"}),he.jsx("path",{d:"M5.082 14.254a8.287 8.287 0 00-1.308 5.135 9.687 9.687 0 01-1.764-.44l-.115-.04a.563.563 0 01-.373-.487l-.01-.121a3.75 3.75 0 013.57-4.047zM20.226 19.389a8.287 8.287 0 00-1.308-5.135 3.75 3.75 0 013.57 4.047l-.01.121a.563.563 0 01-.373.486l-.115.04c-.567.2-1.156.349-1.764.441z"})]}),"Clientes"]}),he.jsxs("button",{onClick:()=>w("finance"),className:"flex items-center gap-2 px-3 py-2 rounded hover:bg-blue-500 text-left group",children:[he.jsxs("svg",{className:"w-5 h-5 text-current group-hover:text-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:[he.jsx("path",{d:"M10.464 8.746c.227-.18.497-.311.786-.394v2.795a2.252 2.252 0 01-.786-.393c-.394-.313-.546-.681-.546-1.004 0-.323.152-.691.546-1.004zM12.75 15.662v-2.824c.347.085.664.228.921.421.427.32.579.686.579.991 0 .305-.152.671-.579.991a2.534 2.534 0 01-.921.42z"}),he.jsx("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 6a.75.75 0 00-1.5 0v.816a3.836 3.836 0 00-1.72.756c-.712.566-1.112 1.35-1.112 2.178 0 .829.4 1.612 1.113 2.178.502.4 1.102.647 1.719.756v2.978a2.536 2.536 0 01-.921-.421l-.879-.66a.75.75 0 00-.9 1.2l.879.66c.533.4 1.169.645 1.821.75V18a.75.75 0 001.5 0v-.81a4.124 4.124 0 001.821-.749c.745-.559 1.179-1.344 1.179-2.191 0-.847-.434-1.632-1.179-2.191a4.122 4.122 0 00-1.821-.75V8.354c.29.082.559.213.786.393l.415.33a.75.75 0 00.933-1.175l-.415-.33a3.836 3.836 0 00-1.719-.755V6z","clip-rule":"evenodd"})]}),"Finanzas"]})]})]}),he.jsxs("div",{className:"flex-1 flex flex-col md:ml-60 md:mr-4",children:[he.jsxs("header",{className:"sticky top-0 bg-white shadow z-10",children:[he.jsx("div",{className:"px-4 py-2 text-center",children:he.jsx("img",{src:"/assets/logo.png",alt:"Claus Vende",className:"h-8 mx-auto"})}),he.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t",children:[he.jsxs("div",{className:"flex items-center gap-2",children:[he.jsx("button",{className:"md:hidden text-2xl mr-2",onClick:()=>l(!a),children:"☰"}),he.jsxs("div",{className:"flex items-center gap-2",children:[he.jsx("img",{src:t.photoURL,alt:"avatar",className:"w-8 h-8 rounded-full"}),he.jsxs("div",{className:"leading-tight",children:[he.jsx("p",{className:"font-semibold leading-tight md:hidden",children:h}),he.jsx("p",{className:"font-semibold leading-tight md:hidden",children:g}),he.jsx("p",{className:"font-semibold leading-none hidden md:block",children:t.displayName}),he.jsx("p",{className:"text-xs text-gray-700",children:n})]})]})]}),he.jsx("button",{onClick:i,className:"bg-red-500 text-white px-3 py-1 rounded",children:"Cerrar sesión"})]})]}),he.jsx("main",{className:"p-4 mt-4 flex-1",children:B})]})]})}function ND(){const[A,e]=Ut.useState({name:"clients"});return he.jsx(TD,{children:he.jsx(LD,{page:A,setPage:e})})}iU.createRoot(document.getElementById("root")).render(he.jsx(Ut.StrictMode,{children:he.jsx(ND,{})}));export{HA as _};
