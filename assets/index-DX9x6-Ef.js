(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function i(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=i(l);fetch(l.href,c)}})();var Rd={exports:{}},gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S_;function WA(){if(S_)return gl;S_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var g in l)g!=="key"&&(c[g]=l[g])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return gl.Fragment=t,gl.jsx=i,gl.jsxs=i,gl}var b_;function tS(){return b_||(b_=1,Rd.exports=WA()),Rd.exports}var tt=tS(),wd={exports:{}},St={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R_;function eS(){if(R_)return St;R_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),C=Symbol.iterator;function D(N){return N===null||typeof N!="object"?null:(N=C&&N[C]||N["@@iterator"],typeof N=="function"?N:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,it={};function Z(N,X,nt){this.props=N,this.context=X,this.refs=it,this.updater=nt||q}Z.prototype.isReactComponent={},Z.prototype.setState=function(N,X){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,X,"setState")},Z.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function yt(){}yt.prototype=Z.prototype;function mt(N,X,nt){this.props=N,this.context=X,this.refs=it,this.updater=nt||q}var ut=mt.prototype=new yt;ut.constructor=mt,$(ut,Z.prototype),ut.isPureReactComponent=!0;var Ut=Array.isArray,Et={H:null,A:null,T:null,S:null,V:null},kt=Object.prototype.hasOwnProperty;function P(N,X,nt,J,ct,Rt){return nt=Rt.ref,{$$typeof:r,type:N,key:X,ref:nt!==void 0?nt:null,props:Rt}}function S(N,X){return P(N.type,X,void 0,void 0,void 0,N.props)}function I(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function M(N){var X={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(nt){return X[nt]})}var w=/\/+/g;function V(N,X){return typeof N=="object"&&N!==null&&N.key!=null?M(""+N.key):X.toString(36)}function R(){}function ie(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(R,R):(N.status="pending",N.then(function(X){N.status==="pending"&&(N.status="fulfilled",N.value=X)},function(X){N.status==="pending"&&(N.status="rejected",N.reason=X)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function Qt(N,X,nt,J,ct){var Rt=typeof N;(Rt==="undefined"||Rt==="boolean")&&(N=null);var vt=!1;if(N===null)vt=!0;else switch(Rt){case"bigint":case"string":case"number":vt=!0;break;case"object":switch(N.$$typeof){case r:case t:vt=!0;break;case A:return vt=N._init,Qt(vt(N._payload),X,nt,J,ct)}}if(vt)return ct=ct(N),vt=J===""?"."+V(N,0):J,Ut(ct)?(nt="",vt!=null&&(nt=vt.replace(w,"$&/")+"/"),Qt(ct,X,nt,"",function(Fn){return Fn})):ct!=null&&(I(ct)&&(ct=S(ct,nt+(ct.key==null||N&&N.key===ct.key?"":(""+ct.key).replace(w,"$&/")+"/")+vt)),X.push(ct)),1;vt=0;var Ne=J===""?".":J+":";if(Ut(N))for(var Wt=0;Wt<N.length;Wt++)J=N[Wt],Rt=Ne+V(J,Wt),vt+=Qt(J,X,nt,Rt,ct);else if(Wt=D(N),typeof Wt=="function")for(N=Wt.call(N),Wt=0;!(J=N.next()).done;)J=J.value,Rt=Ne+V(J,Wt++),vt+=Qt(J,X,nt,Rt,ct);else if(Rt==="object"){if(typeof N.then=="function")return Qt(ie(N),X,nt,J,ct);throw X=String(N),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return vt}function H(N,X,nt){if(N==null)return N;var J=[],ct=0;return Qt(N,J,"","",function(Rt){return X.call(nt,Rt,ct++)}),J}function et(N){if(N._status===-1){var X=N._result;X=X(),X.then(function(nt){(N._status===0||N._status===-1)&&(N._status=1,N._result=nt)},function(nt){(N._status===0||N._status===-1)&&(N._status=2,N._result=nt)}),N._status===-1&&(N._status=0,N._result=X)}if(N._status===1)return N._result.default;throw N._result}var lt=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function zt(){}return St.Children={map:H,forEach:function(N,X,nt){H(N,function(){X.apply(this,arguments)},nt)},count:function(N){var X=0;return H(N,function(){X++}),X},toArray:function(N){return H(N,function(X){return X})||[]},only:function(N){if(!I(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},St.Component=Z,St.Fragment=i,St.Profiler=l,St.PureComponent=mt,St.StrictMode=s,St.Suspense=p,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Et,St.__COMPILER_RUNTIME={__proto__:null,c:function(N){return Et.H.useMemoCache(N)}},St.cache=function(N){return function(){return N.apply(null,arguments)}},St.cloneElement=function(N,X,nt){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var J=$({},N.props),ct=N.key,Rt=void 0;if(X!=null)for(vt in X.ref!==void 0&&(Rt=void 0),X.key!==void 0&&(ct=""+X.key),X)!kt.call(X,vt)||vt==="key"||vt==="__self"||vt==="__source"||vt==="ref"&&X.ref===void 0||(J[vt]=X[vt]);var vt=arguments.length-2;if(vt===1)J.children=nt;else if(1<vt){for(var Ne=Array(vt),Wt=0;Wt<vt;Wt++)Ne[Wt]=arguments[Wt+2];J.children=Ne}return P(N.type,ct,void 0,void 0,Rt,J)},St.createContext=function(N){return N={$$typeof:d,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:c,_context:N},N},St.createElement=function(N,X,nt){var J,ct={},Rt=null;if(X!=null)for(J in X.key!==void 0&&(Rt=""+X.key),X)kt.call(X,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(ct[J]=X[J]);var vt=arguments.length-2;if(vt===1)ct.children=nt;else if(1<vt){for(var Ne=Array(vt),Wt=0;Wt<vt;Wt++)Ne[Wt]=arguments[Wt+2];ct.children=Ne}if(N&&N.defaultProps)for(J in vt=N.defaultProps,vt)ct[J]===void 0&&(ct[J]=vt[J]);return P(N,Rt,void 0,void 0,null,ct)},St.createRef=function(){return{current:null}},St.forwardRef=function(N){return{$$typeof:g,render:N}},St.isValidElement=I,St.lazy=function(N){return{$$typeof:A,_payload:{_status:-1,_result:N},_init:et}},St.memo=function(N,X){return{$$typeof:_,type:N,compare:X===void 0?null:X}},St.startTransition=function(N){var X=Et.T,nt={};Et.T=nt;try{var J=N(),ct=Et.S;ct!==null&&ct(nt,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(zt,lt)}catch(Rt){lt(Rt)}finally{Et.T=X}},St.unstable_useCacheRefresh=function(){return Et.H.useCacheRefresh()},St.use=function(N){return Et.H.use(N)},St.useActionState=function(N,X,nt){return Et.H.useActionState(N,X,nt)},St.useCallback=function(N,X){return Et.H.useCallback(N,X)},St.useContext=function(N){return Et.H.useContext(N)},St.useDebugValue=function(){},St.useDeferredValue=function(N,X){return Et.H.useDeferredValue(N,X)},St.useEffect=function(N,X,nt){var J=Et.H;if(typeof nt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(N,X)},St.useId=function(){return Et.H.useId()},St.useImperativeHandle=function(N,X,nt){return Et.H.useImperativeHandle(N,X,nt)},St.useInsertionEffect=function(N,X){return Et.H.useInsertionEffect(N,X)},St.useLayoutEffect=function(N,X){return Et.H.useLayoutEffect(N,X)},St.useMemo=function(N,X){return Et.H.useMemo(N,X)},St.useOptimistic=function(N,X){return Et.H.useOptimistic(N,X)},St.useReducer=function(N,X,nt){return Et.H.useReducer(N,X,nt)},St.useRef=function(N){return Et.H.useRef(N)},St.useState=function(N){return Et.H.useState(N)},St.useSyncExternalStore=function(N,X,nt){return Et.H.useSyncExternalStore(N,X,nt)},St.useTransition=function(){return Et.H.useTransition()},St.version="19.1.1",St}var w_;function gm(){return w_||(w_=1,wd.exports=eS()),wd.exports}var Jt=gm(),Id={exports:{}},pl={},Cd={exports:{}},Dd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_;function nS(){return I_||(I_=1,function(r){function t(H,et){var lt=H.length;H.push(et);t:for(;0<lt;){var zt=lt-1>>>1,N=H[zt];if(0<l(N,et))H[zt]=et,H[lt]=N,lt=zt;else break t}}function i(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var et=H[0],lt=H.pop();if(lt!==et){H[0]=lt;t:for(var zt=0,N=H.length,X=N>>>1;zt<X;){var nt=2*(zt+1)-1,J=H[nt],ct=nt+1,Rt=H[ct];if(0>l(J,lt))ct<N&&0>l(Rt,J)?(H[zt]=Rt,H[ct]=lt,zt=ct):(H[zt]=J,H[nt]=lt,zt=nt);else if(ct<N&&0>l(Rt,lt))H[zt]=Rt,H[ct]=lt,zt=ct;else break t}}return et}function l(H,et){var lt=H.sortIndex-et.sortIndex;return lt!==0?lt:H.id-et.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();r.unstable_now=function(){return d.now()-g}}var p=[],_=[],A=1,C=null,D=3,q=!1,$=!1,it=!1,Z=!1,yt=typeof setTimeout=="function"?setTimeout:null,mt=typeof clearTimeout=="function"?clearTimeout:null,ut=typeof setImmediate<"u"?setImmediate:null;function Ut(H){for(var et=i(_);et!==null;){if(et.callback===null)s(_);else if(et.startTime<=H)s(_),et.sortIndex=et.expirationTime,t(p,et);else break;et=i(_)}}function Et(H){if(it=!1,Ut(H),!$)if(i(p)!==null)$=!0,kt||(kt=!0,V());else{var et=i(_);et!==null&&Qt(Et,et.startTime-H)}}var kt=!1,P=-1,S=5,I=-1;function M(){return Z?!0:!(r.unstable_now()-I<S)}function w(){if(Z=!1,kt){var H=r.unstable_now();I=H;var et=!0;try{t:{$=!1,it&&(it=!1,mt(P),P=-1),q=!0;var lt=D;try{e:{for(Ut(H),C=i(p);C!==null&&!(C.expirationTime>H&&M());){var zt=C.callback;if(typeof zt=="function"){C.callback=null,D=C.priorityLevel;var N=zt(C.expirationTime<=H);if(H=r.unstable_now(),typeof N=="function"){C.callback=N,Ut(H),et=!0;break e}C===i(p)&&s(p),Ut(H)}else s(p);C=i(p)}if(C!==null)et=!0;else{var X=i(_);X!==null&&Qt(Et,X.startTime-H),et=!1}}break t}finally{C=null,D=lt,q=!1}et=void 0}}finally{et?V():kt=!1}}}var V;if(typeof ut=="function")V=function(){ut(w)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,ie=R.port2;R.port1.onmessage=w,V=function(){ie.postMessage(null)}}else V=function(){yt(w,0)};function Qt(H,et){P=yt(function(){H(r.unstable_now())},et)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return D},r.unstable_next=function(H){switch(D){case 1:case 2:case 3:var et=3;break;default:et=D}var lt=D;D=et;try{return H()}finally{D=lt}},r.unstable_requestPaint=function(){Z=!0},r.unstable_runWithPriority=function(H,et){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var lt=D;D=H;try{return et()}finally{D=lt}},r.unstable_scheduleCallback=function(H,et,lt){var zt=r.unstable_now();switch(typeof lt=="object"&&lt!==null?(lt=lt.delay,lt=typeof lt=="number"&&0<lt?zt+lt:zt):lt=zt,H){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=lt+N,H={id:A++,callback:et,priorityLevel:H,startTime:lt,expirationTime:N,sortIndex:-1},lt>zt?(H.sortIndex=lt,t(_,H),i(p)===null&&H===i(_)&&(it?(mt(P),P=-1):it=!0,Qt(Et,lt-zt))):(H.sortIndex=N,t(p,H),$||q||($=!0,kt||(kt=!0,V()))),H},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(H){var et=D;return function(){var lt=D;D=et;try{return H.apply(this,arguments)}finally{D=lt}}}}(Dd)),Dd}var C_;function iS(){return C_||(C_=1,Cd.exports=nS()),Cd.exports}var Nd={exports:{}},Ye={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_;function rS(){if(D_)return Ye;D_=1;var r=gm();function t(p){var _="https://react.dev/errors/"+p;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)_+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+p+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(p,_,A){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:C==null?null:""+C,children:p,containerInfo:_,implementation:A}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,_){if(p==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Ye.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ye.createPortal=function(p,_){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return c(p,_,null,A)},Ye.flushSync=function(p){var _=d.T,A=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=_,s.p=A,s.d.f()}},Ye.preconnect=function(p,_){typeof p=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,s.d.C(p,_))},Ye.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Ye.preinit=function(p,_){if(typeof p=="string"&&_&&typeof _.as=="string"){var A=_.as,C=g(A,_.crossOrigin),D=typeof _.integrity=="string"?_.integrity:void 0,q=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;A==="style"?s.d.S(p,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:C,integrity:D,fetchPriority:q}):A==="script"&&s.d.X(p,{crossOrigin:C,integrity:D,fetchPriority:q,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Ye.preinitModule=function(p,_){if(typeof p=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var A=g(_.as,_.crossOrigin);s.d.M(p,{crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&s.d.M(p)},Ye.preload=function(p,_){if(typeof p=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var A=_.as,C=g(A,_.crossOrigin);s.d.L(p,A,{crossOrigin:C,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Ye.preloadModule=function(p,_){if(typeof p=="string")if(_){var A=g(_.as,_.crossOrigin);s.d.m(p,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else s.d.m(p)},Ye.requestFormReset=function(p){s.d.r(p)},Ye.unstable_batchedUpdates=function(p,_){return p(_)},Ye.useFormState=function(p,_,A){return d.H.useFormState(p,_,A)},Ye.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ye.version="19.1.1",Ye}var N_;function sS(){if(N_)return Nd.exports;N_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Nd.exports=rS(),Nd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O_;function aS(){if(O_)return pl;O_=1;var r=iS(),t=gm(),i=sS();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(c(e)!==e)throw Error(s(188))}function p(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(s(188));return n!==e?null:e}for(var a=e,o=n;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return g(h),e;if(f===o)return g(h),n;f=f.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=f;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,o=f;break}if(E===o){v=!0,o=h,a=f;break}E=E.sibling}if(!v){for(E=f.child;E;){if(E===a){v=!0,a=f,o=h;break}if(E===o){v=!0,o=f,a=h;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:n}function _(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=_(e),n!==null)return n;e=e.sibling}return null}var A=Object.assign,C=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),it=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),yt=Symbol.for("react.provider"),mt=Symbol.for("react.consumer"),ut=Symbol.for("react.context"),Ut=Symbol.for("react.forward_ref"),Et=Symbol.for("react.suspense"),kt=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),w=Symbol.iterator;function V(e){return e===null||typeof e!="object"?null:(e=w&&e[w]||e["@@iterator"],typeof e=="function"?e:null)}var R=Symbol.for("react.client.reference");function ie(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===R?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $:return"Fragment";case Z:return"Profiler";case it:return"StrictMode";case Et:return"Suspense";case kt:return"SuspenseList";case I:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case q:return"Portal";case ut:return(e.displayName||"Context")+".Provider";case mt:return(e._context.displayName||"Context")+".Consumer";case Ut:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case P:return n=e.displayName||null,n!==null?n:ie(e.type)||"Memo";case S:n=e._payload,e=e._init;try{return ie(e(n))}catch{}}return null}var Qt=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt={pending:!1,data:null,method:null,action:null},zt=[],N=-1;function X(e){return{current:e}}function nt(e){0>N||(e.current=zt[N],zt[N]=null,N--)}function J(e,n){N++,zt[N]=e.current,e.current=n}var ct=X(null),Rt=X(null),vt=X(null),Ne=X(null);function Wt(e,n){switch(J(vt,n),J(Rt,e),J(ct,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Zy(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Zy(n),e=Jy(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}nt(ct),J(ct,e)}function Fn(){nt(ct),nt(Rt),nt(vt)}function tr(e){e.memoizedState!==null&&J(Ne,e);var n=ct.current,a=Jy(n,e.type);n!==a&&(J(Rt,e),J(ct,a))}function yi(e){Rt.current===e&&(nt(ct),nt(Rt)),Ne.current===e&&(nt(Ne),cl._currentValue=lt)}var Xr=Object.prototype.hasOwnProperty,$r=r.unstable_scheduleCallback,Zr=r.unstable_cancelCallback,ao=r.unstable_shouldYield,Kl=r.unstable_requestPaint,Tn=r.unstable_now,bh=r.unstable_getCurrentPriorityLevel,oo=r.unstable_ImmediatePriority,Fs=r.unstable_UserBlockingPriority,Jr=r.unstable_NormalPriority,Rh=r.unstable_LowPriority,Qs=r.unstable_IdlePriority,lo=r.log,Yl=r.unstable_setDisableYieldValue,le=null,Ht=null;function hn(e){if(typeof lo=="function"&&Yl(e),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(le,e)}catch{}}var Qe=Math.clz32?Math.clz32:Wr,Xl=Math.log,wh=Math.LN2;function Wr(e){return e>>>=0,e===0?32:31-(Xl(e)/wh|0)|0}var ts=256,es=4194304;function Un(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ks(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?h=Un(o):(v&=E,v!==0?h=Un(v):a||(a=E&~e,a!==0&&(h=Un(a))))):(E=o&~f,E!==0?h=Un(E):v!==0?h=Un(v):a||(a=o&~e,a!==0&&(h=Un(a)))),h===0?0:n!==0&&n!==h&&(n&f)===0&&(f=h&-h,a=n&-n,f>=a||f===32&&(a&4194048)!==0)?n:h}function ns(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function uo(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function co(){var e=ts;return ts<<=1,(ts&4194048)===0&&(ts=256),e}function ho(){var e=es;return es<<=1,(es&62914560)===0&&(es=4194304),e}function _i(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function vi(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function fo(e,n,a,o,h,f){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,b=e.expirationTimes,L=e.hiddenUpdates;for(a=v&~a;0<a;){var G=31-Qe(a),Q=1<<G;E[G]=0,b[G]=-1;var z=L[G];if(z!==null)for(L[G]=null,G=0;G<z.length;G++){var B=z[G];B!==null&&(B.lane&=-536870913)}a&=~Q}o!==0&&Qn(e,o,0),f!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~n))}function Qn(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-Qe(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function mo(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-Qe(a),h=1<<o;h&n|e[o]&n&&(e[o]|=n),a&=~h}}function er(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ys(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function nr(){var e=et.p;return e!==0?e:(e=window.event,e===void 0?32:y_(e.type))}function $l(e,n){var a=et.p;try{return et.p=e,n()}finally{et.p=a}}var re=Math.random().toString(36).slice(2),Se="__reactFiber$"+re,pe="__reactProps$"+re,An="__reactContainer$"+re,go="__reactEvents$"+re,Ih="__reactListeners$"+re,ir="__reactHandles$"+re,Zl="__reactResources$"+re,is="__reactMarker$"+re;function rr(e){delete e[Se],delete e[pe],delete e[go],delete e[Ih],delete e[ir]}function Ei(e){var n=e[Se];if(n)return n;for(var a=e.parentNode;a;){if(n=a[An]||a[Se]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=n_(e);e!==null;){if(a=e[Se])return a;e=n_(e)}return n}e=a,a=e.parentNode}return null}function Kn(e){if(e=e[Se]||e[An]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function Yn(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function We(e){var n=e[Zl];return n||(n=e[Zl]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function he(e){e[is]=!0}var po=new Set,Xs={};function kn(e,n){Ti(e,n),Ti(e+"Capture",n)}function Ti(e,n){for(Xs[e]=n,e=0;e<n.length;e++)po.add(n[e])}var Jl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wl={},rs={};function tu(e){return Xr.call(rs,e)?!0:Xr.call(Wl,e)?!1:Jl.test(e)?rs[e]=!0:(Wl[e]=!0,!1)}function sr(e,n,a){if(tu(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function Xn(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function ke(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}var ss,eu;function Ai(e){if(ss===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);ss=n&&n[1]||"",eu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ss+e+eu}var $s=!1;function Zs(e,n){if(!e||$s)return"";$s=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(B){var z=B}Reflect.construct(e,[],Q)}else{try{Q.call()}catch(B){z=B}e.call(Q.prototype)}}else{try{throw Error()}catch(B){z=B}(Q=e())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(B){if(B&&z&&typeof B.stack=="string")return[B.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],E=f[1];if(v&&E){var b=v.split(`
`),L=E.split(`
`);for(h=o=0;o<b.length&&!b[o].includes("DetermineComponentFrameRoot");)o++;for(;h<L.length&&!L[h].includes("DetermineComponentFrameRoot");)h++;if(o===b.length||h===L.length)for(o=b.length-1,h=L.length-1;1<=o&&0<=h&&b[o]!==L[h];)h--;for(;1<=o&&0<=h;o--,h--)if(b[o]!==L[h]){if(o!==1||h!==1)do if(o--,h--,0>h||b[o]!==L[h]){var G=`
`+b[o].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=o&&0<=h);break}}}finally{$s=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ai(a):""}function yo(e){switch(e.tag){case 26:case 27:case 5:return Ai(e.type);case 16:return Ai("Lazy");case 13:return Ai("Suspense");case 19:return Ai("SuspenseList");case 0:case 15:return Zs(e.type,!1);case 11:return Zs(e.type.render,!1);case 1:return Zs(e.type,!0);case 31:return Ai("Activity");default:return""}}function Js(e){try{var n="";do n+=yo(e),e=e.return;while(e);return n}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function tn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _o(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Ch(e){var n=_o(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),o=""+e[n];if(!e.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(e,n,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Ws(e){e._valueTracker||(e._valueTracker=Ch(e))}function vo(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=_o(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function as(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Dh=/[\n"\\]/g;function ye(e){return e.replace(Dh,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function fn(e,n,a,o,h,f,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+tn(n)):e.value!==""+tn(n)&&(e.value=""+tn(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?ar(e,v,tn(n)):a!=null?ar(e,v,tn(a)):o!=null&&e.removeAttribute("value"),h==null&&f!=null&&(e.defaultChecked=!!f),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+tn(E):e.removeAttribute("name")}function os(e,n,a,o,h,f,v,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),n!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||n!=null))return;a=a!=null?""+tn(a):"",n=n!=null?""+tn(n):a,E||n===e.value||(e.value=n),e.defaultValue=n}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function ar(e,n,a){n==="number"&&as(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Si(e,n,a,o){if(e=e.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=n.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+tn(a),n=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function Kt(e,n,a){if(n!=null&&(n=""+tn(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+tn(a):""}function ls(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(s(92));if(Qt(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=tn(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function Sn(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var us=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nu(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||us.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function Eo(e,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in n)o=n[h],n.hasOwnProperty(h)&&a[h]!==o&&nu(e,h,o)}else for(var f in n)n.hasOwnProperty(f)&&nu(e,f,n[f])}function To(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Oh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ta(e){return Oh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var bi=null;function bn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ri=null,wi=null;function Ao(e){var n=Kn(e);if(n&&(e=n.stateNode)){var a=e[pe]||null;t:switch(e=n.stateNode,n.type){case"input":if(fn(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ye(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var h=o[pe]||null;if(!h)throw Error(s(90));fn(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&vo(o)}break t;case"textarea":Kt(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&Si(e,!!a.multiple,n,!1)}}}var $n=!1;function iu(e,n,a){if($n)return e(n,a);$n=!0;try{var o=e(n);return o}finally{if($n=!1,(Ri!==null||wi!==null)&&($u(),Ri&&(n=Ri,e=wi,wi=Ri=null,Ao(n),e)))for(n=0;n<e.length;n++)Ao(e[n])}}function cs(e,n){var a=e.stateNode;if(a===null)return null;var o=a[pe]||null;if(o===null)return null;a=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rn=!1;if(Ln)try{var hs={};Object.defineProperty(hs,"passive",{get:function(){Rn=!0}}),window.addEventListener("test",hs,hs),window.removeEventListener("test",hs,hs)}catch{Rn=!1}var Zn=null,or=null,Ii=null;function So(){if(Ii)return Ii;var e,n=or,a=n.length,o,h="value"in Zn?Zn.value:Zn.textContent,f=h.length;for(e=0;e<a&&n[e]===h[e];e++);var v=a-e;for(o=1;o<=v&&n[a-o]===h[f-o];o++);return Ii=h.slice(e,1<o?1-o:void 0)}function Jn(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Wn(){return!0}function bo(){return!1}function Oe(e){function n(a,o,h,f,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Wn:bo,this.isPropagationStopped=bo,this}return A(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wn)},persist:function(){},isPersistent:Wn}),n}var jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ea=Oe(jt),fs=A({},jt,{view:0,detail:0}),ru=Oe(fs),na,ia,ti,ds=A({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ps,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ti&&(ti&&e.type==="mousemove"?(na=e.screenX-ti.screenX,ia=e.screenY-ti.screenY):ia=na=0,ti=e),na)},movementY:function(e){return"movementY"in e?e.movementY:ia}}),wn=Oe(ds),su=A({},ds,{dataTransfer:0}),Vh=Oe(su),ms=A({},fs,{relatedTarget:0}),ra=Oe(ms),Ro=A({},jt,{animationName:0,elapsedTime:0,pseudoElement:0}),sa=Oe(Ro),au=A({},jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),aa=Oe(au),Mh=A({},jt,{data:0}),wo=Oe(Mh),gs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ou={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Io(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=lu[e])?!!n[e]:!1}function ps(){return Io}var uu=A({},fs,{key:function(e){if(e.key){var n=gs[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Jn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ou[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ps,charCode:function(e){return e.type==="keypress"?Jn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oa=Oe(uu),cu=A({},ds,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Co=Oe(cu),Ci=A({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ps}),hu=Oe(Ci),fu=A({},jt,{propertyName:0,elapsedTime:0,pseudoElement:0}),du=Oe(fu),mu=A({},ds,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),la=Oe(mu),en=A({},jt,{newState:0,oldState:0}),gu=Oe(en),pu=[9,13,27,32],ei=Ln&&"CompositionEvent"in window,u=null;Ln&&"documentMode"in document&&(u=document.documentMode);var m=Ln&&"TextEvent"in window&&!u,y=Ln&&(!ei||u&&8<u&&11>=u),T=" ",U=!1;function j(e,n){switch(e){case"keyup":return pu.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function W(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vt=!1;function be(e,n){switch(e){case"compositionend":return W(n);case"keypress":return n.which!==32?null:(U=!0,T);case"textInput":return e=n.data,e===T&&U?null:e;default:return null}}function Mt(e,n){if(Vt)return e==="compositionend"||!ei&&j(e,n)?(e=So(),Ii=or=Zn=null,Vt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return y&&n.locale!=="ko"?null:n.data;default:return null}}var Ve={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Re(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Ve[e.type]:n==="textarea"}function Di(e,n,a,o){Ri?wi?wi.push(o):wi=[o]:Ri=o,n=nc(n,"onChange"),0<n.length&&(a=new ea("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var Le=null,ni=null;function Do(e){Qy(e,0)}function yu(e){var n=Yn(e);if(vo(n))return e}function dg(e,n){if(e==="change")return n}var mg=!1;if(Ln){var Ph;if(Ln){var xh="oninput"in document;if(!xh){var gg=document.createElement("div");gg.setAttribute("oninput","return;"),xh=typeof gg.oninput=="function"}Ph=xh}else Ph=!1;mg=Ph&&(!document.documentMode||9<document.documentMode)}function pg(){Le&&(Le.detachEvent("onpropertychange",yg),ni=Le=null)}function yg(e){if(e.propertyName==="value"&&yu(ni)){var n=[];Di(n,ni,e,bn(e)),iu(Do,n)}}function D0(e,n,a){e==="focusin"?(pg(),Le=n,ni=a,Le.attachEvent("onpropertychange",yg)):e==="focusout"&&pg()}function N0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return yu(ni)}function O0(e,n){if(e==="click")return yu(n)}function V0(e,n){if(e==="input"||e==="change")return yu(n)}function M0(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var dn=typeof Object.is=="function"?Object.is:M0;function No(e,n){if(dn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Xr.call(n,h)||!dn(e[h],n[h]))return!1}return!0}function _g(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vg(e,n){var a=_g(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=_g(a)}}function Eg(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Eg(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Tg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=as(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=as(e.document)}return n}function Uh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var P0=Ln&&"documentMode"in document&&11>=document.documentMode,ua=null,kh=null,Oo=null,Lh=!1;function Ag(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Lh||ua==null||ua!==as(o)||(o=ua,"selectionStart"in o&&Uh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Oo&&No(Oo,o)||(Oo=o,o=nc(kh,"onSelect"),0<o.length&&(n=new ea("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=ua)))}function ys(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var ca={animationend:ys("Animation","AnimationEnd"),animationiteration:ys("Animation","AnimationIteration"),animationstart:ys("Animation","AnimationStart"),transitionrun:ys("Transition","TransitionRun"),transitionstart:ys("Transition","TransitionStart"),transitioncancel:ys("Transition","TransitionCancel"),transitionend:ys("Transition","TransitionEnd")},zh={},Sg={};Ln&&(Sg=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);function _s(e){if(zh[e])return zh[e];if(!ca[e])return e;var n=ca[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Sg)return zh[e]=n[a];return e}var bg=_s("animationend"),Rg=_s("animationiteration"),wg=_s("animationstart"),x0=_s("transitionrun"),U0=_s("transitionstart"),k0=_s("transitioncancel"),Ig=_s("transitionend"),Cg=new Map,Bh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bh.push("scrollEnd");function zn(e,n){Cg.set(e,n),kn(n,[e])}var Dg=new WeakMap;function In(e,n){if(typeof e=="object"&&e!==null){var a=Dg.get(e);return a!==void 0?a:(n={value:e,source:n,stack:Js(n)},Dg.set(e,n),n)}return{value:e,source:n,stack:Js(n)}}var Cn=[],ha=0,jh=0;function _u(){for(var e=ha,n=jh=ha=0;n<e;){var a=Cn[n];Cn[n++]=null;var o=Cn[n];Cn[n++]=null;var h=Cn[n];Cn[n++]=null;var f=Cn[n];if(Cn[n++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}f!==0&&Ng(a,h,f)}}function vu(e,n,a,o){Cn[ha++]=e,Cn[ha++]=n,Cn[ha++]=a,Cn[ha++]=o,jh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function qh(e,n,a,o){return vu(e,n,a,o),Eu(e)}function fa(e,n){return vu(e,null,null,n),Eu(e)}function Ng(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=e.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(h=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,h&&n!==null&&(h=31-Qe(a),e=f.hiddenUpdates,o=e[h],o===null?e[h]=[n]:o.push(n),n.lane=a|536870912),f):null}function Eu(e){if(50<nl)throw nl=0,Xf=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var da={};function L0(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(e,n,a,o){return new L0(e,n,a,o)}function Hh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ni(e,n){var a=e.alternate;return a===null?(a=mn(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Og(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Tu(e,n,a,o,h,f){var v=0;if(o=e,typeof e=="function")Hh(e)&&(v=1);else if(typeof e=="string")v=BA(e,a,ct.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case I:return e=mn(31,a,n,h),e.elementType=I,e.lanes=f,e;case $:return vs(a.children,h,f,n);case it:v=8,h|=24;break;case Z:return e=mn(12,a,n,h|2),e.elementType=Z,e.lanes=f,e;case Et:return e=mn(13,a,n,h),e.elementType=Et,e.lanes=f,e;case kt:return e=mn(19,a,n,h),e.elementType=kt,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case yt:case ut:v=10;break t;case mt:v=9;break t;case Ut:v=11;break t;case P:v=14;break t;case S:v=16,o=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return n=mn(v,a,n,h),n.elementType=e,n.type=o,n.lanes=f,n}function vs(e,n,a,o){return e=mn(7,e,o,n),e.lanes=a,e}function Gh(e,n,a){return e=mn(6,e,null,n),e.lanes=a,e}function Fh(e,n,a){return n=mn(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var ma=[],ga=0,Au=null,Su=0,Dn=[],Nn=0,Es=null,Oi=1,Vi="";function Ts(e,n){ma[ga++]=Su,ma[ga++]=Au,Au=e,Su=n}function Vg(e,n,a){Dn[Nn++]=Oi,Dn[Nn++]=Vi,Dn[Nn++]=Es,Es=e;var o=Oi;e=Vi;var h=32-Qe(o)-1;o&=~(1<<h),a+=1;var f=32-Qe(n)+h;if(30<f){var v=h-h%5;f=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Oi=1<<32-Qe(n)+h|a<<h|o,Vi=f+e}else Oi=1<<f|a<<h|o,Vi=e}function Qh(e){e.return!==null&&(Ts(e,1),Vg(e,1,0))}function Kh(e){for(;e===Au;)Au=ma[--ga],ma[ga]=null,Su=ma[--ga],ma[ga]=null;for(;e===Es;)Es=Dn[--Nn],Dn[Nn]=null,Vi=Dn[--Nn],Dn[Nn]=null,Oi=Dn[--Nn],Dn[Nn]=null}var nn=null,ue=null,Bt=!1,As=null,ii=!1,Yh=Error(s(519));function Ss(e){var n=Error(s(418,""));throw Po(In(n,e)),Yh}function Mg(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[Se]=e,n[pe]=o,a){case"dialog":Ct("cancel",n),Ct("close",n);break;case"iframe":case"object":case"embed":Ct("load",n);break;case"video":case"audio":for(a=0;a<rl.length;a++)Ct(rl[a],n);break;case"source":Ct("error",n);break;case"img":case"image":case"link":Ct("error",n),Ct("load",n);break;case"details":Ct("toggle",n);break;case"input":Ct("invalid",n),os(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Ws(n);break;case"select":Ct("invalid",n);break;case"textarea":Ct("invalid",n),ls(n,o.value,o.defaultValue,o.children),Ws(n)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||$y(n.textContent,a)?(o.popover!=null&&(Ct("beforetoggle",n),Ct("toggle",n)),o.onScroll!=null&&Ct("scroll",n),o.onScrollEnd!=null&&Ct("scrollend",n),o.onClick!=null&&(n.onclick=ic),n=!0):n=!1,n||Ss(e)}function Pg(e){for(nn=e.return;nn;)switch(nn.tag){case 5:case 13:ii=!1;return;case 27:case 3:ii=!0;return;default:nn=nn.return}}function Vo(e){if(e!==nn)return!1;if(!Bt)return Pg(e),Bt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||hd(e.type,e.memoizedProps)),a=!a),a&&ue&&Ss(e),Pg(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(n===0){ue=jn(e.nextSibling);break t}n--}else a!=="$"&&a!=="$!"&&a!=="$?"||n++;e=e.nextSibling}ue=null}}else n===27?(n=ue,Sr(e.type)?(e=gd,gd=null,ue=e):ue=n):ue=nn?jn(e.stateNode.nextSibling):null;return!0}function Mo(){ue=nn=null,Bt=!1}function xg(){var e=As;return e!==null&&(an===null?an=e:an.push.apply(an,e),As=null),e}function Po(e){As===null?As=[e]:As.push(e)}var Xh=X(null),bs=null,Mi=null;function lr(e,n,a){J(Xh,n._currentValue),n._currentValue=a}function Pi(e){e._currentValue=Xh.current,nt(Xh)}function $h(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function Zh(e,n,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var f=h.dependencies;if(f!==null){var v=h.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=h;for(var b=0;b<n.length;b++)if(E.context===n[b]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),$h(f.return,a,e),o||(v=null);break t}f=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),$h(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function xo(e,n,a,o){e=null;for(var h=n,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=h.type;dn(h.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(h===Ne.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(cl):e=[cl])}h=h.return}e!==null&&Zh(n,e,a,o),n.flags|=262144}function bu(e){for(e=e.firstContext;e!==null;){if(!dn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Rs(e){bs=e,Mi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ke(e){return Ug(bs,e)}function Ru(e,n){return bs===null&&Rs(e),Ug(e,n)}function Ug(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Mi===null){if(e===null)throw Error(s(308));Mi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Mi=Mi.next=n;return a}var z0=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},B0=r.unstable_scheduleCallback,j0=r.unstable_NormalPriority,we={$$typeof:ut,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jh(){return{controller:new z0,data:new Map,refCount:0}}function Uo(e){e.refCount--,e.refCount===0&&B0(j0,function(){e.controller.abort()})}var ko=null,Wh=0,pa=0,ya=null;function q0(e,n){if(ko===null){var a=ko=[];Wh=0,pa=nd(),ya={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Wh++,n.then(kg,kg),n}function kg(){if(--Wh===0&&ko!==null){ya!==null&&(ya.status="fulfilled");var e=ko;ko=null,pa=0,ya=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function H0(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Lg=H.S;H.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&q0(e,n),Lg!==null&&Lg(e,n)};var ws=X(null);function tf(){var e=ws.current;return e!==null?e:te.pooledCache}function wu(e,n){n===null?J(ws,ws.current):J(ws,n.pool)}function zg(){var e=tf();return e===null?null:{parent:we._currentValue,pool:e}}var Lo=Error(s(460)),Bg=Error(s(474)),Iu=Error(s(542)),ef={then:function(){}};function jg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Cu(){}function qg(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(Cu,Cu),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Gg(e),e;default:if(typeof n.status=="string")n.then(Cu,Cu);else{if(e=te,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=o}},function(o){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Gg(e),e}throw zo=n,Lo}}var zo=null;function Hg(){if(zo===null)throw Error(s(459));var e=zo;return zo=null,e}function Gg(e){if(e===Lo||e===Iu)throw Error(s(483))}var ur=!1;function nf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rf(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function cr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function hr(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Gt&2)!==0){var h=o.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),o.pending=n,n=Eu(e),Ng(e,null,a),n}return vu(e,o,n,a),Eu(e)}function Bo(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,mo(e,a)}}function sf(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?h=f=n:f=f.next=n}else h=f=n;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var af=!1;function jo(){if(af){var e=ya;if(e!==null)throw e}}function qo(e,n,a,o){af=!1;var h=e.updateQueue;ur=!1;var f=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var b=E,L=b.next;b.next=null,v===null?f=L:v.next=L,v=b;var G=e.alternate;G!==null&&(G=G.updateQueue,E=G.lastBaseUpdate,E!==v&&(E===null?G.firstBaseUpdate=L:E.next=L,G.lastBaseUpdate=b))}if(f!==null){var Q=h.baseState;v=0,G=L=b=null,E=f;do{var z=E.lane&-536870913,B=z!==E.lane;if(B?(Pt&z)===z:(o&z)===z){z!==0&&z===pa&&(af=!0),G!==null&&(G=G.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var pt=e,ft=E;z=n;var $t=a;switch(ft.tag){case 1:if(pt=ft.payload,typeof pt=="function"){Q=pt.call($t,Q,z);break t}Q=pt;break t;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=ft.payload,z=typeof pt=="function"?pt.call($t,Q,z):pt,z==null)break t;Q=A({},Q,z);break t;case 2:ur=!0}}z=E.callback,z!==null&&(e.flags|=64,B&&(e.flags|=8192),B=h.callbacks,B===null?h.callbacks=[z]:B.push(z))}else B={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},G===null?(L=G=B,b=Q):G=G.next=B,v|=z;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;B=E,E=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);G===null&&(b=Q),h.baseState=b,h.firstBaseUpdate=L,h.lastBaseUpdate=G,f===null&&(h.shared.lanes=0),vr|=v,e.lanes=v,e.memoizedState=Q}}function Fg(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function Qg(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Fg(a[e],n)}var _a=X(null),Du=X(0);function Kg(e,n){e=ji,J(Du,e),J(_a,n),ji=e|n.baseLanes}function of(){J(Du,ji),J(_a,_a.current)}function lf(){ji=Du.current,nt(_a),nt(Du)}var fr=0,bt=null,Yt=null,_e=null,Nu=!1,va=!1,Is=!1,Ou=0,Ho=0,Ea=null,G0=0;function fe(){throw Error(s(321))}function uf(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!dn(e[a],n[a]))return!1;return!0}function cf(e,n,a,o,h,f){return fr=f,bt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,H.H=e===null||e.memoizedState===null?Np:Op,Is=!1,f=a(o,h),Is=!1,va&&(f=Xg(n,a,o,h)),Yg(e),f}function Yg(e){H.H=ku;var n=Yt!==null&&Yt.next!==null;if(fr=0,_e=Yt=bt=null,Nu=!1,Ho=0,Ea=null,n)throw Error(s(300));e===null||Me||(e=e.dependencies,e!==null&&bu(e)&&(Me=!0))}function Xg(e,n,a,o){bt=e;var h=0;do{if(va&&(Ea=null),Ho=0,va=!1,25<=h)throw Error(s(301));if(h+=1,_e=Yt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}H.H=Z0,f=n(a,o)}while(va);return f}function F0(){var e=H.H,n=e.useState()[0];return n=typeof n.then=="function"?Go(n):n,e=e.useState()[0],(Yt!==null?Yt.memoizedState:null)!==e&&(bt.flags|=1024),n}function hf(){var e=Ou!==0;return Ou=0,e}function ff(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function df(e){if(Nu){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Nu=!1}fr=0,_e=Yt=bt=null,va=!1,Ho=Ou=0,Ea=null}function rn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _e===null?bt.memoizedState=_e=e:_e=_e.next=e,_e}function ve(){if(Yt===null){var e=bt.alternate;e=e!==null?e.memoizedState:null}else e=Yt.next;var n=_e===null?bt.memoizedState:_e.next;if(n!==null)_e=n,Yt=e;else{if(e===null)throw bt.alternate===null?Error(s(467)):Error(s(310));Yt=e,e={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},_e===null?bt.memoizedState=_e=e:_e=_e.next=e}return _e}function mf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Go(e){var n=Ho;return Ho+=1,Ea===null&&(Ea=[]),e=qg(Ea,e,n),n=bt,(_e===null?n.memoizedState:_e.next)===null&&(n=n.alternate,H.H=n===null||n.memoizedState===null?Np:Op),e}function Vu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Go(e);if(e.$$typeof===ut)return Ke(e)}throw Error(s(438,String(e)))}function gf(e){var n=null,a=bt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=bt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=mf(),bt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=M;return n.index++,a}function xi(e,n){return typeof n=="function"?n(e):n}function Mu(e){var n=ve();return pf(n,Yt,e)}function pf(e,n,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=e.baseQueue,f=o.pending;if(f!==null){if(h!==null){var v=h.next;h.next=f.next,f.next=v}n.baseQueue=h=f,o.pending=null}if(f=e.baseState,h===null)e.memoizedState=f;else{n=h.next;var E=v=null,b=null,L=n,G=!1;do{var Q=L.lane&-536870913;if(Q!==L.lane?(Pt&Q)===Q:(fr&Q)===Q){var z=L.revertLane;if(z===0)b!==null&&(b=b.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),Q===pa&&(G=!0);else if((fr&z)===z){L=L.next,z===pa&&(G=!0);continue}else Q={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(E=b=Q,v=f):b=b.next=Q,bt.lanes|=z,vr|=z;Q=L.action,Is&&a(f,Q),f=L.hasEagerState?L.eagerState:a(f,Q)}else z={lane:Q,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(E=b=z,v=f):b=b.next=z,bt.lanes|=Q,vr|=Q;L=L.next}while(L!==null&&L!==n);if(b===null?v=f:b.next=E,!dn(f,e.memoizedState)&&(Me=!0,G&&(a=ya,a!==null)))throw a;e.memoizedState=f,e.baseState=v,e.baseQueue=b,o.lastRenderedState=f}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function yf(e){var n=ve(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,f=n.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do f=e(f,v.action),v=v.next;while(v!==h);dn(f,n.memoizedState)||(Me=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),a.lastRenderedState=f}return[f,o]}function $g(e,n,a){var o=bt,h=ve(),f=Bt;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=n();var v=!dn((Yt||h).memoizedState,a);v&&(h.memoizedState=a,Me=!0),h=h.queue;var E=Wg.bind(null,o,h,e);if(Fo(2048,8,E,[e]),h.getSnapshot!==n||v||_e!==null&&_e.memoizedState.tag&1){if(o.flags|=2048,Ta(9,Pu(),Jg.bind(null,o,h,a,n),null),te===null)throw Error(s(349));f||(fr&124)!==0||Zg(o,n,a)}return a}function Zg(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=bt.updateQueue,n===null?(n=mf(),bt.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function Jg(e,n,a,o){n.value=a,n.getSnapshot=o,tp(n)&&ep(e)}function Wg(e,n,a){return a(function(){tp(n)&&ep(e)})}function tp(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!dn(e,a)}catch{return!0}}function ep(e){var n=fa(e,2);n!==null&&vn(n,e,2)}function _f(e){var n=rn();if(typeof e=="function"){var a=e;if(e=a(),Is){hn(!0);try{a()}finally{hn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:e},n}function np(e,n,a,o){return e.baseState=a,pf(e,Yt,typeof o=="function"?o:xi)}function Q0(e,n,a,o,h){if(Uu(e))throw Error(s(485));if(e=n.action,e!==null){var f={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};H.T!==null?a(!0):f.isTransition=!1,o(f),a=n.pending,a===null?(f.next=n.pending=f,ip(n,f)):(f.next=a.next,n.pending=a.next=f)}}function ip(e,n){var a=n.action,o=n.payload,h=e.state;if(n.isTransition){var f=H.T,v={};H.T=v;try{var E=a(h,o),b=H.S;b!==null&&b(v,E),rp(e,n,E)}catch(L){vf(e,n,L)}finally{H.T=f}}else try{f=a(h,o),rp(e,n,f)}catch(L){vf(e,n,L)}}function rp(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){sp(e,n,o)},function(o){return vf(e,n,o)}):sp(e,n,a)}function sp(e,n,a){n.status="fulfilled",n.value=a,ap(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,ip(e,a)))}function vf(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,ap(n),n=n.next;while(n!==o)}e.action=null}function ap(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function op(e,n){return n}function lp(e,n){if(Bt){var a=te.formState;if(a!==null){t:{var o=bt;if(Bt){if(ue){e:{for(var h=ue,f=ii;h.nodeType!==8;){if(!f){h=null;break e}if(h=jn(h.nextSibling),h===null){h=null;break e}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){ue=jn(h.nextSibling),o=h.data==="F!";break t}}Ss(o)}o=!1}o&&(n=a[0])}}return a=rn(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:op,lastRenderedState:n},a.queue=o,a=Ip.bind(null,bt,o),o.dispatch=a,o=_f(!1),f=bf.bind(null,bt,!1,o.queue),o=rn(),h={state:n,dispatch:null,action:e,pending:null},o.queue=h,a=Q0.bind(null,bt,h,f,a),h.dispatch=a,o.memoizedState=e,[n,a,!1]}function up(e){var n=ve();return cp(n,Yt,e)}function cp(e,n,a){if(n=pf(e,n,op)[0],e=Mu(xi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=Go(n)}catch(v){throw v===Lo?Iu:v}else o=n;n=ve();var h=n.queue,f=h.dispatch;return a!==n.memoizedState&&(bt.flags|=2048,Ta(9,Pu(),K0.bind(null,h,a),null)),[o,f,e]}function K0(e,n){e.action=n}function hp(e){var n=ve(),a=Yt;if(a!==null)return cp(n,a,e);ve(),n=n.memoizedState,a=ve();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function Ta(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=bt.updateQueue,n===null&&(n=mf(),bt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function Pu(){return{destroy:void 0,resource:void 0}}function fp(){return ve().memoizedState}function xu(e,n,a,o){var h=rn();o=o===void 0?null:o,bt.flags|=e,h.memoizedState=Ta(1|n,Pu(),a,o)}function Fo(e,n,a,o){var h=ve();o=o===void 0?null:o;var f=h.memoizedState.inst;Yt!==null&&o!==null&&uf(o,Yt.memoizedState.deps)?h.memoizedState=Ta(n,f,a,o):(bt.flags|=e,h.memoizedState=Ta(1|n,f,a,o))}function dp(e,n){xu(8390656,8,e,n)}function mp(e,n){Fo(2048,8,e,n)}function gp(e,n){return Fo(4,2,e,n)}function pp(e,n){return Fo(4,4,e,n)}function yp(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function _p(e,n,a){a=a!=null?a.concat([e]):null,Fo(4,4,yp.bind(null,n,e),a)}function Ef(){}function vp(e,n){var a=ve();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&uf(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function Ep(e,n){var a=ve();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&uf(n,o[1]))return o[0];if(o=e(),Is){hn(!0);try{e()}finally{hn(!1)}}return a.memoizedState=[o,n],o}function Tf(e,n,a){return a===void 0||(fr&1073741824)!==0?e.memoizedState=n:(e.memoizedState=a,e=Sy(),bt.lanes|=e,vr|=e,a)}function Tp(e,n,a,o){return dn(a,n)?a:_a.current!==null?(e=Tf(e,a,o),dn(e,n)||(Me=!0),e):(fr&42)===0?(Me=!0,e.memoizedState=a):(e=Sy(),bt.lanes|=e,vr|=e,n)}function Ap(e,n,a,o,h){var f=et.p;et.p=f!==0&&8>f?f:8;var v=H.T,E={};H.T=E,bf(e,!1,n,a);try{var b=h(),L=H.S;if(L!==null&&L(E,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var G=H0(b,o);Qo(e,n,G,_n(e))}else Qo(e,n,o,_n(e))}catch(Q){Qo(e,n,{then:function(){},status:"rejected",reason:Q},_n())}finally{et.p=f,H.T=v}}function Y0(){}function Af(e,n,a,o){if(e.tag!==5)throw Error(s(476));var h=Sp(e).queue;Ap(e,h,n,lt,a===null?Y0:function(){return bp(e),a(o)})}function Sp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:lt,baseState:lt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:lt},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function bp(e){var n=Sp(e).next.queue;Qo(e,n,{},_n())}function Sf(){return Ke(cl)}function Rp(){return ve().memoizedState}function wp(){return ve().memoizedState}function X0(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=_n();e=cr(a);var o=hr(n,e,a);o!==null&&(vn(o,n,a),Bo(o,n,a)),n={cache:Jh()},e.payload=n;return}n=n.return}}function $0(e,n,a){var o=_n();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Uu(e)?Cp(n,a):(a=qh(e,n,a,o),a!==null&&(vn(a,e,o),Dp(a,n,o)))}function Ip(e,n,a){var o=_n();Qo(e,n,a,o)}function Qo(e,n,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Uu(e))Cp(n,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var v=n.lastRenderedState,E=f(v,a);if(h.hasEagerState=!0,h.eagerState=E,dn(E,v))return vu(e,n,h,0),te===null&&_u(),!1}catch{}finally{}if(a=qh(e,n,h,o),a!==null)return vn(a,e,o),Dp(a,n,o),!0}return!1}function bf(e,n,a,o){if(o={lane:2,revertLane:nd(),action:o,hasEagerState:!1,eagerState:null,next:null},Uu(e)){if(n)throw Error(s(479))}else n=qh(e,a,o,2),n!==null&&vn(n,e,2)}function Uu(e){var n=e.alternate;return e===bt||n!==null&&n===bt}function Cp(e,n){va=Nu=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function Dp(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,mo(e,a)}}var ku={readContext:Ke,use:Vu,useCallback:fe,useContext:fe,useEffect:fe,useImperativeHandle:fe,useLayoutEffect:fe,useInsertionEffect:fe,useMemo:fe,useReducer:fe,useRef:fe,useState:fe,useDebugValue:fe,useDeferredValue:fe,useTransition:fe,useSyncExternalStore:fe,useId:fe,useHostTransitionStatus:fe,useFormState:fe,useActionState:fe,useOptimistic:fe,useMemoCache:fe,useCacheRefresh:fe},Np={readContext:Ke,use:Vu,useCallback:function(e,n){return rn().memoizedState=[e,n===void 0?null:n],e},useContext:Ke,useEffect:dp,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,xu(4194308,4,yp.bind(null,n,e),a)},useLayoutEffect:function(e,n){return xu(4194308,4,e,n)},useInsertionEffect:function(e,n){xu(4,2,e,n)},useMemo:function(e,n){var a=rn();n=n===void 0?null:n;var o=e();if(Is){hn(!0);try{e()}finally{hn(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=rn();if(a!==void 0){var h=a(n);if(Is){hn(!0);try{a(n)}finally{hn(!1)}}}else h=n;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=$0.bind(null,bt,e),[o.memoizedState,e]},useRef:function(e){var n=rn();return e={current:e},n.memoizedState=e},useState:function(e){e=_f(e);var n=e.queue,a=Ip.bind(null,bt,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:Ef,useDeferredValue:function(e,n){var a=rn();return Tf(a,e,n)},useTransition:function(){var e=_f(!1);return e=Ap.bind(null,bt,e.queue,!0,!1),rn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=bt,h=rn();if(Bt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),te===null)throw Error(s(349));(Pt&124)!==0||Zg(o,n,a)}h.memoizedState=a;var f={value:a,getSnapshot:n};return h.queue=f,dp(Wg.bind(null,o,f,e),[e]),o.flags|=2048,Ta(9,Pu(),Jg.bind(null,o,f,a,n),null),a},useId:function(){var e=rn(),n=te.identifierPrefix;if(Bt){var a=Vi,o=Oi;a=(o&~(1<<32-Qe(o)-1)).toString(32)+a,n="«"+n+"R"+a,a=Ou++,0<a&&(n+="H"+a.toString(32)),n+="»"}else a=G0++,n="«"+n+"r"+a.toString(32)+"»";return e.memoizedState=n},useHostTransitionStatus:Sf,useFormState:lp,useActionState:lp,useOptimistic:function(e){var n=rn();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=bf.bind(null,bt,!0,a),a.dispatch=n,[e,n]},useMemoCache:gf,useCacheRefresh:function(){return rn().memoizedState=X0.bind(null,bt)}},Op={readContext:Ke,use:Vu,useCallback:vp,useContext:Ke,useEffect:mp,useImperativeHandle:_p,useInsertionEffect:gp,useLayoutEffect:pp,useMemo:Ep,useReducer:Mu,useRef:fp,useState:function(){return Mu(xi)},useDebugValue:Ef,useDeferredValue:function(e,n){var a=ve();return Tp(a,Yt.memoizedState,e,n)},useTransition:function(){var e=Mu(xi)[0],n=ve().memoizedState;return[typeof e=="boolean"?e:Go(e),n]},useSyncExternalStore:$g,useId:Rp,useHostTransitionStatus:Sf,useFormState:up,useActionState:up,useOptimistic:function(e,n){var a=ve();return np(a,Yt,e,n)},useMemoCache:gf,useCacheRefresh:wp},Z0={readContext:Ke,use:Vu,useCallback:vp,useContext:Ke,useEffect:mp,useImperativeHandle:_p,useInsertionEffect:gp,useLayoutEffect:pp,useMemo:Ep,useReducer:yf,useRef:fp,useState:function(){return yf(xi)},useDebugValue:Ef,useDeferredValue:function(e,n){var a=ve();return Yt===null?Tf(a,e,n):Tp(a,Yt.memoizedState,e,n)},useTransition:function(){var e=yf(xi)[0],n=ve().memoizedState;return[typeof e=="boolean"?e:Go(e),n]},useSyncExternalStore:$g,useId:Rp,useHostTransitionStatus:Sf,useFormState:hp,useActionState:hp,useOptimistic:function(e,n){var a=ve();return Yt!==null?np(a,Yt,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:gf,useCacheRefresh:wp},Aa=null,Ko=0;function Lu(e){var n=Ko;return Ko+=1,Aa===null&&(Aa=[]),qg(Aa,e,n)}function Yo(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function zu(e,n){throw n.$$typeof===C?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Vp(e){var n=e._init;return n(e._payload)}function Mp(e){function n(x,O){if(e){var k=x.deletions;k===null?(x.deletions=[O],x.flags|=16):k.push(O)}}function a(x,O){if(!e)return null;for(;O!==null;)n(x,O),O=O.sibling;return null}function o(x){for(var O=new Map;x!==null;)x.key!==null?O.set(x.key,x):O.set(x.index,x),x=x.sibling;return O}function h(x,O){return x=Ni(x,O),x.index=0,x.sibling=null,x}function f(x,O,k){return x.index=k,e?(k=x.alternate,k!==null?(k=k.index,k<O?(x.flags|=67108866,O):k):(x.flags|=67108866,O)):(x.flags|=1048576,O)}function v(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function E(x,O,k,F){return O===null||O.tag!==6?(O=Gh(k,x.mode,F),O.return=x,O):(O=h(O,k),O.return=x,O)}function b(x,O,k,F){var st=k.type;return st===$?G(x,O,k.props.children,F,k.key):O!==null&&(O.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===S&&Vp(st)===O.type)?(O=h(O,k.props),Yo(O,k),O.return=x,O):(O=Tu(k.type,k.key,k.props,null,x.mode,F),Yo(O,k),O.return=x,O)}function L(x,O,k,F){return O===null||O.tag!==4||O.stateNode.containerInfo!==k.containerInfo||O.stateNode.implementation!==k.implementation?(O=Fh(k,x.mode,F),O.return=x,O):(O=h(O,k.children||[]),O.return=x,O)}function G(x,O,k,F,st){return O===null||O.tag!==7?(O=vs(k,x.mode,F,st),O.return=x,O):(O=h(O,k),O.return=x,O)}function Q(x,O,k){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Gh(""+O,x.mode,k),O.return=x,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case D:return k=Tu(O.type,O.key,O.props,null,x.mode,k),Yo(k,O),k.return=x,k;case q:return O=Fh(O,x.mode,k),O.return=x,O;case S:var F=O._init;return O=F(O._payload),Q(x,O,k)}if(Qt(O)||V(O))return O=vs(O,x.mode,k,null),O.return=x,O;if(typeof O.then=="function")return Q(x,Lu(O),k);if(O.$$typeof===ut)return Q(x,Ru(x,O),k);zu(x,O)}return null}function z(x,O,k,F){var st=O!==null?O.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return st!==null?null:E(x,O,""+k,F);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case D:return k.key===st?b(x,O,k,F):null;case q:return k.key===st?L(x,O,k,F):null;case S:return st=k._init,k=st(k._payload),z(x,O,k,F)}if(Qt(k)||V(k))return st!==null?null:G(x,O,k,F,null);if(typeof k.then=="function")return z(x,O,Lu(k),F);if(k.$$typeof===ut)return z(x,O,Ru(x,k),F);zu(x,k)}return null}function B(x,O,k,F,st){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return x=x.get(k)||null,E(O,x,""+F,st);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case D:return x=x.get(F.key===null?k:F.key)||null,b(O,x,F,st);case q:return x=x.get(F.key===null?k:F.key)||null,L(O,x,F,st);case S:var wt=F._init;return F=wt(F._payload),B(x,O,k,F,st)}if(Qt(F)||V(F))return x=x.get(k)||null,G(O,x,F,st,null);if(typeof F.then=="function")return B(x,O,k,Lu(F),st);if(F.$$typeof===ut)return B(x,O,k,Ru(O,F),st);zu(O,F)}return null}function pt(x,O,k,F){for(var st=null,wt=null,ot=O,dt=O=0,xe=null;ot!==null&&dt<k.length;dt++){ot.index>dt?(xe=ot,ot=null):xe=ot.sibling;var Lt=z(x,ot,k[dt],F);if(Lt===null){ot===null&&(ot=xe);break}e&&ot&&Lt.alternate===null&&n(x,ot),O=f(Lt,O,dt),wt===null?st=Lt:wt.sibling=Lt,wt=Lt,ot=xe}if(dt===k.length)return a(x,ot),Bt&&Ts(x,dt),st;if(ot===null){for(;dt<k.length;dt++)ot=Q(x,k[dt],F),ot!==null&&(O=f(ot,O,dt),wt===null?st=ot:wt.sibling=ot,wt=ot);return Bt&&Ts(x,dt),st}for(ot=o(ot);dt<k.length;dt++)xe=B(ot,x,dt,k[dt],F),xe!==null&&(e&&xe.alternate!==null&&ot.delete(xe.key===null?dt:xe.key),O=f(xe,O,dt),wt===null?st=xe:wt.sibling=xe,wt=xe);return e&&ot.forEach(function(Cr){return n(x,Cr)}),Bt&&Ts(x,dt),st}function ft(x,O,k,F){if(k==null)throw Error(s(151));for(var st=null,wt=null,ot=O,dt=O=0,xe=null,Lt=k.next();ot!==null&&!Lt.done;dt++,Lt=k.next()){ot.index>dt?(xe=ot,ot=null):xe=ot.sibling;var Cr=z(x,ot,Lt.value,F);if(Cr===null){ot===null&&(ot=xe);break}e&&ot&&Cr.alternate===null&&n(x,ot),O=f(Cr,O,dt),wt===null?st=Cr:wt.sibling=Cr,wt=Cr,ot=xe}if(Lt.done)return a(x,ot),Bt&&Ts(x,dt),st;if(ot===null){for(;!Lt.done;dt++,Lt=k.next())Lt=Q(x,Lt.value,F),Lt!==null&&(O=f(Lt,O,dt),wt===null?st=Lt:wt.sibling=Lt,wt=Lt);return Bt&&Ts(x,dt),st}for(ot=o(ot);!Lt.done;dt++,Lt=k.next())Lt=B(ot,x,dt,Lt.value,F),Lt!==null&&(e&&Lt.alternate!==null&&ot.delete(Lt.key===null?dt:Lt.key),O=f(Lt,O,dt),wt===null?st=Lt:wt.sibling=Lt,wt=Lt);return e&&ot.forEach(function(JA){return n(x,JA)}),Bt&&Ts(x,dt),st}function $t(x,O,k,F){if(typeof k=="object"&&k!==null&&k.type===$&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case D:t:{for(var st=k.key;O!==null;){if(O.key===st){if(st=k.type,st===$){if(O.tag===7){a(x,O.sibling),F=h(O,k.props.children),F.return=x,x=F;break t}}else if(O.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===S&&Vp(st)===O.type){a(x,O.sibling),F=h(O,k.props),Yo(F,k),F.return=x,x=F;break t}a(x,O);break}else n(x,O);O=O.sibling}k.type===$?(F=vs(k.props.children,x.mode,F,k.key),F.return=x,x=F):(F=Tu(k.type,k.key,k.props,null,x.mode,F),Yo(F,k),F.return=x,x=F)}return v(x);case q:t:{for(st=k.key;O!==null;){if(O.key===st)if(O.tag===4&&O.stateNode.containerInfo===k.containerInfo&&O.stateNode.implementation===k.implementation){a(x,O.sibling),F=h(O,k.children||[]),F.return=x,x=F;break t}else{a(x,O);break}else n(x,O);O=O.sibling}F=Fh(k,x.mode,F),F.return=x,x=F}return v(x);case S:return st=k._init,k=st(k._payload),$t(x,O,k,F)}if(Qt(k))return pt(x,O,k,F);if(V(k)){if(st=V(k),typeof st!="function")throw Error(s(150));return k=st.call(k),ft(x,O,k,F)}if(typeof k.then=="function")return $t(x,O,Lu(k),F);if(k.$$typeof===ut)return $t(x,O,Ru(x,k),F);zu(x,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,O!==null&&O.tag===6?(a(x,O.sibling),F=h(O,k),F.return=x,x=F):(a(x,O),F=Gh(k,x.mode,F),F.return=x,x=F),v(x)):a(x,O)}return function(x,O,k,F){try{Ko=0;var st=$t(x,O,k,F);return Aa=null,st}catch(ot){if(ot===Lo||ot===Iu)throw ot;var wt=mn(29,ot,null,x.mode);return wt.lanes=F,wt.return=x,wt}finally{}}}var Sa=Mp(!0),Pp=Mp(!1),On=X(null),ri=null;function dr(e){var n=e.alternate;J(Ie,Ie.current&1),J(On,e),ri===null&&(n===null||_a.current!==null||n.memoizedState!==null)&&(ri=e)}function xp(e){if(e.tag===22){if(J(Ie,Ie.current),J(On,e),ri===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(ri=e)}}else mr()}function mr(){J(Ie,Ie.current),J(On,On.current)}function Ui(e){nt(On),ri===e&&(ri=null),nt(Ie)}var Ie=X(0);function Bu(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||md(a)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Rf(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:A({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var wf={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=_n(),h=cr(o);h.payload=n,a!=null&&(h.callback=a),n=hr(e,h,o),n!==null&&(vn(n,e,o),Bo(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=_n(),h=cr(o);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=hr(e,h,o),n!==null&&(vn(n,e,o),Bo(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=_n(),o=cr(a);o.tag=2,n!=null&&(o.callback=n),n=hr(e,o,a),n!==null&&(vn(n,e,a),Bo(n,e,a))}};function Up(e,n,a,o,h,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,v):n.prototype&&n.prototype.isPureReactComponent?!No(a,o)||!No(h,f):!0}function kp(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&wf.enqueueReplaceState(n,n.state,null)}function Cs(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=A({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var ju=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Lp(e){ju(e)}function zp(e){console.error(e)}function Bp(e){ju(e)}function qu(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function jp(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function If(e,n,a){return a=cr(a),a.tag=3,a.payload={element:null},a.callback=function(){qu(e,n)},a}function qp(e){return e=cr(e),e.tag=3,e}function Hp(e,n,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;e.payload=function(){return h(f)},e.callback=function(){jp(n,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){jp(n,a,o),typeof h!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function J0(e,n,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&xo(n,a,h,!0),a=On.current,a!==null){switch(a.tag){case 13:return ri===null?Zf():a.alternate===null&&ce===0&&(ce=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===ef?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),Wf(e,o,h)),!1;case 22:return a.flags|=65536,o===ef?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),Wf(e,o,h)),!1}throw Error(s(435,a.tag))}return Wf(e,o,h),Zf(),!1}if(Bt)return n=On.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,o!==Yh&&(e=Error(s(422),{cause:o}),Po(In(e,a)))):(o!==Yh&&(n=Error(s(423),{cause:o}),Po(In(n,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=In(o,a),h=If(e.stateNode,o,h),sf(e,h),ce!==4&&(ce=2)),!1;var f=Error(s(520),{cause:o});if(f=In(f,a),el===null?el=[f]:el.push(f),ce!==4&&(ce=2),n===null)return!0;o=In(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=If(a.stateNode,o,e),sf(a,e),!1;case 1:if(n=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Er===null||!Er.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=qp(h),Hp(h,e,a,o),sf(a,h),!1}a=a.return}while(a!==null);return!1}var Gp=Error(s(461)),Me=!1;function ze(e,n,a,o){n.child=e===null?Pp(n,null,a,o):Sa(n,e.child,a,o)}function Fp(e,n,a,o,h){a=a.render;var f=n.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return Rs(n),o=cf(e,n,a,v,f,h),E=hf(),e!==null&&!Me?(ff(e,n,h),ki(e,n,h)):(Bt&&E&&Qh(n),n.flags|=1,ze(e,n,o,h),n.child)}function Qp(e,n,a,o,h){if(e===null){var f=a.type;return typeof f=="function"&&!Hh(f)&&f.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=f,Kp(e,n,f,o,h)):(e=Tu(a.type,null,o,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!xf(e,h)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:No,a(v,o)&&e.ref===n.ref)return ki(e,n,h)}return n.flags|=1,e=Ni(f,o),e.ref=n.ref,e.return=n,n.child=e}function Kp(e,n,a,o,h){if(e!==null){var f=e.memoizedProps;if(No(f,o)&&e.ref===n.ref)if(Me=!1,n.pendingProps=o=f,xf(e,h))(e.flags&131072)!==0&&(Me=!0);else return n.lanes=e.lanes,ki(e,n,h)}return Cf(e,n,a,o,h)}function Yp(e,n,a){var o=n.pendingProps,h=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((n.flags&128)!==0){if(o=f!==null?f.baseLanes|a:a,e!==null){for(h=n.child=e.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;n.childLanes=f&~o}else n.childLanes=0,n.child=null;return Xp(e,n,o,a)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&wu(n,f!==null?f.cachePool:null),f!==null?Kg(n,f):of(),xp(n);else return n.lanes=n.childLanes=536870912,Xp(e,n,f!==null?f.baseLanes|a:a,a)}else f!==null?(wu(n,f.cachePool),Kg(n,f),mr(),n.memoizedState=null):(e!==null&&wu(n,null),of(),mr());return ze(e,n,h,a),n.child}function Xp(e,n,a,o){var h=tf();return h=h===null?null:{parent:we._currentValue,pool:h},n.memoizedState={baseLanes:a,cachePool:h},e!==null&&wu(n,null),of(),xp(n),e!==null&&xo(e,n,o,!0),null}function Hu(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Cf(e,n,a,o,h){return Rs(n),a=cf(e,n,a,o,void 0,h),o=hf(),e!==null&&!Me?(ff(e,n,h),ki(e,n,h)):(Bt&&o&&Qh(n),n.flags|=1,ze(e,n,a,h),n.child)}function $p(e,n,a,o,h,f){return Rs(n),n.updateQueue=null,a=Xg(n,o,a,h),Yg(e),o=hf(),e!==null&&!Me?(ff(e,n,f),ki(e,n,f)):(Bt&&o&&Qh(n),n.flags|=1,ze(e,n,a,f),n.child)}function Zp(e,n,a,o,h){if(Rs(n),n.stateNode===null){var f=da,v=a.contextType;typeof v=="object"&&v!==null&&(f=Ke(v)),f=new a(o,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=wf,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=o,f.state=n.memoizedState,f.refs={},nf(n),v=a.contextType,f.context=typeof v=="object"&&v!==null?Ke(v):da,f.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Rf(n,a,v,o),f.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&wf.enqueueReplaceState(f,f.state,null),qo(n,o,f,h),jo(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){f=n.stateNode;var E=n.memoizedProps,b=Cs(a,E);f.props=b;var L=f.context,G=a.contextType;v=da,typeof G=="object"&&G!==null&&(v=Ke(G));var Q=a.getDerivedStateFromProps;G=typeof Q=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,G||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||L!==v)&&kp(n,f,o,v),ur=!1;var z=n.memoizedState;f.state=z,qo(n,o,f,h),jo(),L=n.memoizedState,E||z!==L||ur?(typeof Q=="function"&&(Rf(n,a,Q,o),L=n.memoizedState),(b=ur||Up(n,a,b,o,z,L,v))?(G||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=L),f.props=o,f.state=L,f.context=v,o=b):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{f=n.stateNode,rf(e,n),v=n.memoizedProps,G=Cs(a,v),f.props=G,Q=n.pendingProps,z=f.context,L=a.contextType,b=da,typeof L=="object"&&L!==null&&(b=Ke(L)),E=a.getDerivedStateFromProps,(L=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==Q||z!==b)&&kp(n,f,o,b),ur=!1,z=n.memoizedState,f.state=z,qo(n,o,f,h),jo();var B=n.memoizedState;v!==Q||z!==B||ur||e!==null&&e.dependencies!==null&&bu(e.dependencies)?(typeof E=="function"&&(Rf(n,a,E,o),B=n.memoizedState),(G=ur||Up(n,a,G,o,z,B,b)||e!==null&&e.dependencies!==null&&bu(e.dependencies))?(L||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,B,b),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,B,b)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=B),f.props=o,f.state=B,f.context=b,o=G):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=1024),o=!1)}return f=o,Hu(e,n),o=(n.flags&128)!==0,f||o?(f=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,e!==null&&o?(n.child=Sa(n,e.child,null,h),n.child=Sa(n,null,a,h)):ze(e,n,a,h),n.memoizedState=f.state,e=n.child):e=ki(e,n,h),e}function Jp(e,n,a,o){return Mo(),n.flags|=256,ze(e,n,a,o),n.child}var Df={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nf(e){return{baseLanes:e,cachePool:zg()}}function Of(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=Vn),e}function Wp(e,n,a){var o=n.pendingProps,h=!1,f=(n.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(Ie.current&2)!==0),v&&(h=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(Bt){if(h?dr(n):mr(),Bt){var E=ue,b;if(b=E){t:{for(b=E,E=ii;b.nodeType!==8;){if(!E){E=null;break t}if(b=jn(b.nextSibling),b===null){E=null;break t}}E=b}E!==null?(n.memoizedState={dehydrated:E,treeContext:Es!==null?{id:Oi,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},b=mn(18,null,null,0),b.stateNode=E,b.return=n,n.child=b,nn=n,ue=null,b=!0):b=!1}b||Ss(n)}if(E=n.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return md(E)?n.lanes=32:n.lanes=536870912,null;Ui(n)}return E=o.children,o=o.fallback,h?(mr(),h=n.mode,E=Gu({mode:"hidden",children:E},h),o=vs(o,h,a,null),E.return=n,o.return=n,E.sibling=o,n.child=E,h=n.child,h.memoizedState=Nf(a),h.childLanes=Of(e,v,a),n.memoizedState=Df,o):(dr(n),Vf(n,E))}if(b=e.memoizedState,b!==null&&(E=b.dehydrated,E!==null)){if(f)n.flags&256?(dr(n),n.flags&=-257,n=Mf(e,n,a)):n.memoizedState!==null?(mr(),n.child=e.child,n.flags|=128,n=null):(mr(),h=o.fallback,E=n.mode,o=Gu({mode:"visible",children:o.children},E),h=vs(h,E,a,null),h.flags|=2,o.return=n,h.return=n,o.sibling=h,n.child=o,Sa(n,e.child,null,a),o=n.child,o.memoizedState=Nf(a),o.childLanes=Of(e,v,a),n.memoizedState=Df,n=h);else if(dr(n),md(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var L=v.dgst;v=L,o=Error(s(419)),o.stack="",o.digest=v,Po({value:o,source:null,stack:null}),n=Mf(e,n,a)}else if(Me||xo(e,n,a,!1),v=(a&e.childLanes)!==0,Me||v){if(v=te,v!==null&&(o=a&-a,o=(o&42)!==0?1:er(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==b.retryLane))throw b.retryLane=o,fa(e,o),vn(v,e,o),Gp;E.data==="$?"||Zf(),n=Mf(e,n,a)}else E.data==="$?"?(n.flags|=192,n.child=e.child,n=null):(e=b.treeContext,ue=jn(E.nextSibling),nn=n,Bt=!0,As=null,ii=!1,e!==null&&(Dn[Nn++]=Oi,Dn[Nn++]=Vi,Dn[Nn++]=Es,Oi=e.id,Vi=e.overflow,Es=n),n=Vf(n,o.children),n.flags|=4096);return n}return h?(mr(),h=o.fallback,E=n.mode,b=e.child,L=b.sibling,o=Ni(b,{mode:"hidden",children:o.children}),o.subtreeFlags=b.subtreeFlags&65011712,L!==null?h=Ni(L,h):(h=vs(h,E,a,null),h.flags|=2),h.return=n,o.return=n,o.sibling=h,n.child=o,o=h,h=n.child,E=e.child.memoizedState,E===null?E=Nf(a):(b=E.cachePool,b!==null?(L=we._currentValue,b=b.parent!==L?{parent:L,pool:L}:b):b=zg(),E={baseLanes:E.baseLanes|a,cachePool:b}),h.memoizedState=E,h.childLanes=Of(e,v,a),n.memoizedState=Df,o):(dr(n),a=e.child,e=a.sibling,a=Ni(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=a,n.memoizedState=null,a)}function Vf(e,n){return n=Gu({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Gu(e,n){return e=mn(22,e,null,n),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Mf(e,n,a){return Sa(n,e.child,null,a),e=Vf(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function ty(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),$h(e.return,n,a)}function Pf(e,n,a,o,h){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=h)}function ey(e,n,a){var o=n.pendingProps,h=o.revealOrder,f=o.tail;if(ze(e,n,o.children,a),o=Ie.current,(o&2)!==0)o=o&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ty(e,a,n);else if(e.tag===19)ty(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(J(Ie,o),h){case"forwards":for(a=n.child,h=null;a!==null;)e=a.alternate,e!==null&&Bu(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),Pf(n,!1,h,a,f);break;case"backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&Bu(e)===null){n.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Pf(n,!0,a,null,f);break;case"together":Pf(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function ki(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),vr|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(xo(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,a=Ni(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=Ni(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function xf(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&bu(e)))}function W0(e,n,a){switch(n.tag){case 3:Wt(n,n.stateNode.containerInfo),lr(n,we,e.memoizedState.cache),Mo();break;case 27:case 5:tr(n);break;case 4:Wt(n,n.stateNode.containerInfo);break;case 10:lr(n,n.type,n.memoizedProps.value);break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(dr(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Wp(e,n,a):(dr(n),e=ki(e,n,a),e!==null?e.sibling:null);dr(n);break;case 19:var h=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(xo(e,n,a,!1),o=(a&n.childLanes)!==0),h){if(o)return ey(e,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),J(Ie,Ie.current),o)break;return null;case 22:case 23:return n.lanes=0,Yp(e,n,a);case 24:lr(n,we,e.memoizedState.cache)}return ki(e,n,a)}function ny(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)Me=!0;else{if(!xf(e,a)&&(n.flags&128)===0)return Me=!1,W0(e,n,a);Me=(e.flags&131072)!==0}else Me=!1,Bt&&(n.flags&1048576)!==0&&Vg(n,Su,n.index);switch(n.lanes=0,n.tag){case 16:t:{e=n.pendingProps;var o=n.elementType,h=o._init;if(o=h(o._payload),n.type=o,typeof o=="function")Hh(o)?(e=Cs(o,e),n.tag=1,n=Zp(null,n,o,e,a)):(n.tag=0,n=Cf(null,n,o,e,a));else{if(o!=null){if(h=o.$$typeof,h===Ut){n.tag=11,n=Fp(null,n,o,e,a);break t}else if(h===P){n.tag=14,n=Qp(null,n,o,e,a);break t}}throw n=ie(o)||o,Error(s(306,n,""))}}return n;case 0:return Cf(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,h=Cs(o,n.pendingProps),Zp(e,n,o,h,a);case 3:t:{if(Wt(n,n.stateNode.containerInfo),e===null)throw Error(s(387));o=n.pendingProps;var f=n.memoizedState;h=f.element,rf(e,n),qo(n,o,null,a);var v=n.memoizedState;if(o=v.cache,lr(n,we,o),o!==f.cache&&Zh(n,[we],a,!0),jo(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=Jp(e,n,o,a);break t}else if(o!==h){h=In(Error(s(424)),n),Po(h),n=Jp(e,n,o,a);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ue=jn(e.firstChild),nn=n,Bt=!0,As=null,ii=!0,a=Pp(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Mo(),o===h){n=ki(e,n,a);break t}ze(e,n,o,a)}n=n.child}return n;case 26:return Hu(e,n),e===null?(a=a_(n.type,null,n.pendingProps,null))?n.memoizedState=a:Bt||(a=n.type,e=n.pendingProps,o=rc(vt.current).createElement(a),o[Se]=n,o[pe]=e,je(o,a,e),he(o),n.stateNode=o):n.memoizedState=a_(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return tr(n),e===null&&Bt&&(o=n.stateNode=i_(n.type,n.pendingProps,vt.current),nn=n,ii=!0,h=ue,Sr(n.type)?(gd=h,ue=jn(o.firstChild)):ue=h),ze(e,n,n.pendingProps.children,a),Hu(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Bt&&((h=o=ue)&&(o=IA(o,n.type,n.pendingProps,ii),o!==null?(n.stateNode=o,nn=n,ue=jn(o.firstChild),ii=!1,h=!0):h=!1),h||Ss(n)),tr(n),h=n.type,f=n.pendingProps,v=e!==null?e.memoizedProps:null,o=f.children,hd(h,f)?o=null:v!==null&&hd(h,v)&&(n.flags|=32),n.memoizedState!==null&&(h=cf(e,n,F0,null,null,a),cl._currentValue=h),Hu(e,n),ze(e,n,o,a),n.child;case 6:return e===null&&Bt&&((e=a=ue)&&(a=CA(a,n.pendingProps,ii),a!==null?(n.stateNode=a,nn=n,ue=null,e=!0):e=!1),e||Ss(n)),null;case 13:return Wp(e,n,a);case 4:return Wt(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=Sa(n,null,o,a):ze(e,n,o,a),n.child;case 11:return Fp(e,n,n.type,n.pendingProps,a);case 7:return ze(e,n,n.pendingProps,a),n.child;case 8:return ze(e,n,n.pendingProps.children,a),n.child;case 12:return ze(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,lr(n,n.type,o.value),ze(e,n,o.children,a),n.child;case 9:return h=n.type._context,o=n.pendingProps.children,Rs(n),h=Ke(h),o=o(h),n.flags|=1,ze(e,n,o,a),n.child;case 14:return Qp(e,n,n.type,n.pendingProps,a);case 15:return Kp(e,n,n.type,n.pendingProps,a);case 19:return ey(e,n,a);case 31:return o=n.pendingProps,a=n.mode,o={mode:o.mode,children:o.children},e===null?(a=Gu(o,a),a.ref=n.ref,n.child=a,a.return=n,n=a):(a=Ni(e.child,o),a.ref=n.ref,n.child=a,a.return=n,n=a),n;case 22:return Yp(e,n,a);case 24:return Rs(n),o=Ke(we),e===null?(h=tf(),h===null&&(h=te,f=Jh(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),n.memoizedState={parent:o,cache:h},nf(n),lr(n,we,h)):((e.lanes&a)!==0&&(rf(e,n),qo(n,null,null,a),jo()),h=e.memoizedState,f=n.memoizedState,h.parent!==o?(h={parent:o,cache:o},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),lr(n,we,o)):(o=f.cache,lr(n,we,o),o!==h.cache&&Zh(n,[we],a,!0))),ze(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Li(e){e.flags|=4}function iy(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!h_(n)){if(n=On.current,n!==null&&((Pt&4194048)===Pt?ri!==null:(Pt&62914560)!==Pt&&(Pt&536870912)===0||n!==ri))throw zo=ef,Bg;e.flags|=8192}}function Fu(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?ho():536870912,e.lanes|=n,Ia|=n)}function Xo(e,n){if(!Bt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function ae(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function tA(e,n,a){var o=n.pendingProps;switch(Kh(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ae(n),null;case 1:return ae(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Pi(we),Fn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Vo(n)?Li(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,xg())),ae(n),null;case 26:return a=n.memoizedState,e===null?(Li(n),a!==null?(ae(n),iy(n,a)):(ae(n),n.flags&=-16777217)):a?a!==e.memoizedState?(Li(n),ae(n),iy(n,a)):(ae(n),n.flags&=-16777217):(e.memoizedProps!==o&&Li(n),ae(n),n.flags&=-16777217),null;case 27:yi(n),a=vt.current;var h=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Li(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return ae(n),null}e=ct.current,Vo(n)?Mg(n):(e=i_(h,o,a),n.stateNode=e,Li(n))}return ae(n),null;case 5:if(yi(n),a=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Li(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return ae(n),null}if(e=ct.current,Vo(n))Mg(n);else{switch(h=rc(vt.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}e[Se]=n,e[pe]=o;t:for(h=n.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break t;for(;h.sibling===null;){if(h.return===null||h.return===n)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}n.stateNode=e;t:switch(je(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Li(n)}}return ae(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&Li(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(s(166));if(e=vt.current,Vo(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,h=nn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Se]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||$y(e.nodeValue,a)),e||Ss(n)}else e=rc(e).createTextNode(o),e[Se]=n,n.stateNode=e}return ae(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Vo(n),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Se]=n}else Mo(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ae(n),h=!1}else h=xg(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Ui(n),n):(Ui(n),null)}if(Ui(n),(n.flags&128)!==0)return n.lanes=a,n;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=n.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)}return a!==e&&a&&(n.child.flags|=8192),Fu(n,n.updateQueue),ae(n),null;case 4:return Fn(),e===null&&ad(n.stateNode.containerInfo),ae(n),null;case 10:return Pi(n.type),ae(n),null;case 19:if(nt(Ie),h=n.memoizedState,h===null)return ae(n),null;if(o=(n.flags&128)!==0,f=h.rendering,f===null)if(o)Xo(h,!1);else{if(ce!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=Bu(e),f!==null){for(n.flags|=128,Xo(h,!1),e=f.updateQueue,n.updateQueue=e,Fu(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)Og(a,e),a=a.sibling;return J(Ie,Ie.current&1|2),n.child}e=e.sibling}h.tail!==null&&Tn()>Yu&&(n.flags|=128,o=!0,Xo(h,!1),n.lanes=4194304)}else{if(!o)if(e=Bu(f),e!==null){if(n.flags|=128,o=!0,e=e.updateQueue,n.updateQueue=e,Fu(n,e),Xo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Bt)return ae(n),null}else 2*Tn()-h.renderingStartTime>Yu&&a!==536870912&&(n.flags|=128,o=!0,Xo(h,!1),n.lanes=4194304);h.isBackwards?(f.sibling=n.child,n.child=f):(e=h.last,e!==null?e.sibling=f:n.child=f,h.last=f)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=Tn(),n.sibling=null,e=Ie.current,J(Ie,o?e&1|2:e&1),n):(ae(n),null);case 22:case 23:return Ui(n),lf(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(ae(n),n.subtreeFlags&6&&(n.flags|=8192)):ae(n),a=n.updateQueue,a!==null&&Fu(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&nt(ws),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Pi(we),ae(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function eA(e,n){switch(Kh(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Pi(we),Fn(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return yi(n),null;case 13:if(Ui(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Mo()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return nt(Ie),null;case 4:return Fn(),null;case 10:return Pi(n.type),null;case 22:case 23:return Ui(n),lf(),e!==null&&nt(ws),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Pi(we),null;case 25:return null;default:return null}}function ry(e,n){switch(Kh(n),n.tag){case 3:Pi(we),Fn();break;case 26:case 27:case 5:yi(n);break;case 4:Fn();break;case 13:Ui(n);break;case 19:nt(Ie);break;case 10:Pi(n.type);break;case 22:case 23:Ui(n),lf(),e!==null&&nt(ws);break;case 24:Pi(we)}}function $o(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var f=a.create,v=a.inst;o=f(),v.destroy=o}a=a.next}while(a!==h)}}catch(E){Zt(n,n.return,E)}}function gr(e,n,a){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&e)===e){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=n;var b=a,L=E;try{L()}catch(G){Zt(h,b,G)}}}o=o.next}while(o!==f)}}catch(G){Zt(n,n.return,G)}}function sy(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{Qg(n,a)}catch(o){Zt(e,e.return,o)}}}function ay(e,n,a){a.props=Cs(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Zt(e,n,o)}}function Zo(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){Zt(e,n,h)}}function si(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){Zt(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Zt(e,n,h)}else a.current=null}function oy(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){Zt(e,e.return,h)}}function Uf(e,n,a){try{var o=e.stateNode;AA(o,e.type,a,n),o[pe]=n}catch(h){Zt(e,e.return,h)}}function ly(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Sr(e.type)||e.tag===4}function kf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||ly(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Sr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Lf(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=ic));else if(o!==4&&(o===27&&Sr(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(Lf(e,n,a),e=e.sibling;e!==null;)Lf(e,n,a),e=e.sibling}function Qu(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&Sr(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Qu(e,n,a),e=e.sibling;e!==null;)Qu(e,n,a),e=e.sibling}function uy(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);je(n,o,a),n[Se]=e,n[pe]=a}catch(f){Zt(e,e.return,f)}}var zi=!1,de=!1,zf=!1,cy=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function nA(e,n){if(e=e.containerInfo,ud=cc,e=Tg(e),Uh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break t}var v=0,E=-1,b=-1,L=0,G=0,Q=e,z=null;e:for(;;){for(var B;Q!==a||h!==0&&Q.nodeType!==3||(E=v+h),Q!==f||o!==0&&Q.nodeType!==3||(b=v+o),Q.nodeType===3&&(v+=Q.nodeValue.length),(B=Q.firstChild)!==null;)z=Q,Q=B;for(;;){if(Q===e)break e;if(z===a&&++L===h&&(E=v),z===f&&++G===o&&(b=v),(B=Q.nextSibling)!==null)break;Q=z,z=Q.parentNode}Q=B}a=E===-1||b===-1?null:{start:E,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(cd={focusedElem:e,selectionRange:a},cc=!1,Pe=n;Pe!==null;)if(n=Pe,e=n.child,(n.subtreeFlags&1024)!==0&&e!==null)e.return=n,Pe=e;else for(;Pe!==null;){switch(n=Pe,f=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=n,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var pt=Cs(a.type,h,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(pt,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(ft){Zt(a,a.return,ft)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)dd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":dd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,Pe=e;break}Pe=n.return}}function hy(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:pr(e,a),o&4&&$o(5,a);break;case 1:if(pr(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(v){Zt(a,a.return,v)}else{var h=Cs(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Zt(a,a.return,v)}}o&64&&sy(a),o&512&&Zo(a,a.return);break;case 3:if(pr(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Qg(e,n)}catch(v){Zt(a,a.return,v)}}break;case 27:n===null&&o&4&&uy(a);case 26:case 5:pr(e,a),n===null&&o&4&&oy(a),o&512&&Zo(a,a.return);break;case 12:pr(e,a);break;case 13:pr(e,a),o&4&&my(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=hA.bind(null,a),DA(e,a))));break;case 22:if(o=a.memoizedState!==null||zi,!o){n=n!==null&&n.memoizedState!==null||de,h=zi;var f=de;zi=o,(de=n)&&!f?yr(e,a,(a.subtreeFlags&8772)!==0):pr(e,a),zi=h,de=f}break;case 30:break;default:pr(e,a)}}function fy(e){var n=e.alternate;n!==null&&(e.alternate=null,fy(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&rr(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var se=null,sn=!1;function Bi(e,n,a){for(a=a.child;a!==null;)dy(e,n,a),a=a.sibling}function dy(e,n,a){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(le,a)}catch{}switch(a.tag){case 26:de||si(a,n),Bi(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:de||si(a,n);var o=se,h=sn;Sr(a.type)&&(se=a.stateNode,sn=!1),Bi(e,n,a),al(a.stateNode),se=o,sn=h;break;case 5:de||si(a,n);case 6:if(o=se,h=sn,se=null,Bi(e,n,a),se=o,sn=h,se!==null)if(sn)try{(se.nodeType===9?se.body:se.nodeName==="HTML"?se.ownerDocument.body:se).removeChild(a.stateNode)}catch(f){Zt(a,n,f)}else try{se.removeChild(a.stateNode)}catch(f){Zt(a,n,f)}break;case 18:se!==null&&(sn?(e=se,e_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),ml(e)):e_(se,a.stateNode));break;case 4:o=se,h=sn,se=a.stateNode.containerInfo,sn=!0,Bi(e,n,a),se=o,sn=h;break;case 0:case 11:case 14:case 15:de||gr(2,a,n),de||gr(4,a,n),Bi(e,n,a);break;case 1:de||(si(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&ay(a,n,o)),Bi(e,n,a);break;case 21:Bi(e,n,a);break;case 22:de=(o=de)||a.memoizedState!==null,Bi(e,n,a),de=o;break;default:Bi(e,n,a)}}function my(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ml(e)}catch(a){Zt(n,n.return,a)}}function iA(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new cy),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new cy),n;default:throw Error(s(435,e.tag))}}function Bf(e,n){var a=iA(e);n.forEach(function(o){var h=fA.bind(null,e,o);a.has(o)||(a.add(o),o.then(h,h))})}function gn(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=e,v=n,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(Sr(E.type)){se=E.stateNode,sn=!1;break t}break;case 5:se=E.stateNode,sn=!1;break t;case 3:case 4:se=E.stateNode.containerInfo,sn=!0;break t}E=E.return}if(se===null)throw Error(s(160));dy(f,v,h),se=null,sn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)gy(n,e),n=n.sibling}var Bn=null;function gy(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:gn(n,e),pn(e),o&4&&(gr(3,e,e.return),$o(3,e),gr(5,e,e.return));break;case 1:gn(n,e),pn(e),o&512&&(de||a===null||si(a,a.return)),o&64&&zi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Bn;if(gn(n,e),pn(e),o&512&&(de||a===null||si(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[is]||f[Se]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),je(f,o,a),f[Se]=e,he(f),o=f;break t;case"link":var v=u_("link","href",h).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(f=v[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}f=h.createElement(o),je(f,o,a),h.head.appendChild(f);break;case"meta":if(v=u_("meta","content",h).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(f=v[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}f=h.createElement(o),je(f,o,a),h.head.appendChild(f);break;default:throw Error(s(468,o))}f[Se]=e,he(f),o=f}e.stateNode=o}else c_(h,e.type,e.stateNode);else e.stateNode=l_(h,o,e.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?c_(h,e.type,e.stateNode):l_(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Uf(e,e.memoizedProps,a.memoizedProps)}break;case 27:gn(n,e),pn(e),o&512&&(de||a===null||si(a,a.return)),a!==null&&o&4&&Uf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(gn(n,e),pn(e),o&512&&(de||a===null||si(a,a.return)),e.flags&32){h=e.stateNode;try{Sn(h,"")}catch(B){Zt(e,e.return,B)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,Uf(e,h,a!==null?a.memoizedProps:h)),o&1024&&(zf=!0);break;case 6:if(gn(n,e),pn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(B){Zt(e,e.return,B)}}break;case 3:if(oc=null,h=Bn,Bn=sc(n.containerInfo),gn(n,e),Bn=h,pn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{ml(n.containerInfo)}catch(B){Zt(e,e.return,B)}zf&&(zf=!1,py(e));break;case 4:o=Bn,Bn=sc(e.stateNode.containerInfo),gn(n,e),pn(e),Bn=o;break;case 12:gn(n,e),pn(e);break;case 13:gn(n,e),pn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Qf=Tn()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Bf(e,o)));break;case 22:h=e.memoizedState!==null;var b=a!==null&&a.memoizedState!==null,L=zi,G=de;if(zi=L||h,de=G||b,gn(n,e),de=G,zi=L,pn(e),o&8192)t:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||b||zi||de||Ds(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){b=a=n;try{if(f=b.stateNode,h)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=b.stateNode;var Q=b.memoizedProps.style,z=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;E.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(B){Zt(b,b.return,B)}}}else if(n.tag===6){if(a===null){b=n;try{b.stateNode.nodeValue=h?"":b.memoizedProps}catch(B){Zt(b,b.return,B)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Bf(e,a))));break;case 19:gn(n,e),pn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Bf(e,o)));break;case 30:break;case 21:break;default:gn(n,e),pn(e)}}function pn(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if(ly(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=kf(e);Qu(e,f,h);break;case 5:var v=a.stateNode;a.flags&32&&(Sn(v,""),a.flags&=-33);var E=kf(e);Qu(e,E,v);break;case 3:case 4:var b=a.stateNode.containerInfo,L=kf(e);Lf(e,L,b);break;default:throw Error(s(161))}}catch(G){Zt(e,e.return,G)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function py(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;py(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function pr(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)hy(e,n.alternate,n),n=n.sibling}function Ds(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:gr(4,n,n.return),Ds(n);break;case 1:si(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&ay(n,n.return,a),Ds(n);break;case 27:al(n.stateNode);case 26:case 5:si(n,n.return),Ds(n);break;case 22:n.memoizedState===null&&Ds(n);break;case 30:Ds(n);break;default:Ds(n)}e=e.sibling}}function yr(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,h=e,f=n,v=f.flags;switch(f.tag){case 0:case 11:case 15:yr(h,f,a),$o(4,f);break;case 1:if(yr(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(L){Zt(o,o.return,L)}if(o=f,h=o.updateQueue,h!==null){var E=o.stateNode;try{var b=h.shared.hiddenCallbacks;if(b!==null)for(h.shared.hiddenCallbacks=null,h=0;h<b.length;h++)Fg(b[h],E)}catch(L){Zt(o,o.return,L)}}a&&v&64&&sy(f),Zo(f,f.return);break;case 27:uy(f);case 26:case 5:yr(h,f,a),a&&o===null&&v&4&&oy(f),Zo(f,f.return);break;case 12:yr(h,f,a);break;case 13:yr(h,f,a),a&&v&4&&my(h,f);break;case 22:f.memoizedState===null&&yr(h,f,a),Zo(f,f.return);break;case 30:break;default:yr(h,f,a)}n=n.sibling}}function jf(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Uo(a))}function qf(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Uo(e))}function ai(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)yy(e,n,a,o),n=n.sibling}function yy(e,n,a,o){var h=n.flags;switch(n.tag){case 0:case 11:case 15:ai(e,n,a,o),h&2048&&$o(9,n);break;case 1:ai(e,n,a,o);break;case 3:ai(e,n,a,o),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Uo(e)));break;case 12:if(h&2048){ai(e,n,a,o),e=n.stateNode;try{var f=n.memoizedProps,v=f.id,E=f.onPostCommit;typeof E=="function"&&E(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){Zt(n,n.return,b)}}else ai(e,n,a,o);break;case 13:ai(e,n,a,o);break;case 23:break;case 22:f=n.stateNode,v=n.alternate,n.memoizedState!==null?f._visibility&2?ai(e,n,a,o):Jo(e,n):f._visibility&2?ai(e,n,a,o):(f._visibility|=2,ba(e,n,a,o,(n.subtreeFlags&10256)!==0)),h&2048&&jf(v,n);break;case 24:ai(e,n,a,o),h&2048&&qf(n.alternate,n);break;default:ai(e,n,a,o)}}function ba(e,n,a,o,h){for(h=h&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var f=e,v=n,E=a,b=o,L=v.flags;switch(v.tag){case 0:case 11:case 15:ba(f,v,E,b,h),$o(8,v);break;case 23:break;case 22:var G=v.stateNode;v.memoizedState!==null?G._visibility&2?ba(f,v,E,b,h):Jo(f,v):(G._visibility|=2,ba(f,v,E,b,h)),h&&L&2048&&jf(v.alternate,v);break;case 24:ba(f,v,E,b,h),h&&L&2048&&qf(v.alternate,v);break;default:ba(f,v,E,b,h)}n=n.sibling}}function Jo(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,h=o.flags;switch(o.tag){case 22:Jo(a,o),h&2048&&jf(o.alternate,o);break;case 24:Jo(a,o),h&2048&&qf(o.alternate,o);break;default:Jo(a,o)}n=n.sibling}}var Wo=8192;function Ra(e){if(e.subtreeFlags&Wo)for(e=e.child;e!==null;)_y(e),e=e.sibling}function _y(e){switch(e.tag){case 26:Ra(e),e.flags&Wo&&e.memoizedState!==null&&qA(Bn,e.memoizedState,e.memoizedProps);break;case 5:Ra(e);break;case 3:case 4:var n=Bn;Bn=sc(e.stateNode.containerInfo),Ra(e),Bn=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Wo,Wo=16777216,Ra(e),Wo=n):Ra(e));break;default:Ra(e)}}function vy(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function tl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];Pe=o,Ty(o,e)}vy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ey(e),e=e.sibling}function Ey(e){switch(e.tag){case 0:case 11:case 15:tl(e),e.flags&2048&&gr(9,e,e.return);break;case 3:tl(e);break;case 12:tl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Ku(e)):tl(e);break;default:tl(e)}}function Ku(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];Pe=o,Ty(o,e)}vy(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:gr(8,n,n.return),Ku(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Ku(n));break;default:Ku(n)}e=e.sibling}}function Ty(e,n){for(;Pe!==null;){var a=Pe;switch(a.tag){case 0:case 11:case 15:gr(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Uo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Pe=o;else t:for(a=e;Pe!==null;){o=Pe;var h=o.sibling,f=o.return;if(fy(o),o===a){Pe=null;break t}if(h!==null){h.return=f,Pe=h;break t}Pe=f}}}var rA={getCacheForType:function(e){var n=Ke(we),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a}},sA=typeof WeakMap=="function"?WeakMap:Map,Gt=0,te=null,It=null,Pt=0,Ft=0,yn=null,_r=!1,wa=!1,Hf=!1,ji=0,ce=0,vr=0,Ns=0,Gf=0,Vn=0,Ia=0,el=null,an=null,Ff=!1,Qf=0,Yu=1/0,Xu=null,Er=null,Be=0,Tr=null,Ca=null,Da=0,Kf=0,Yf=null,Ay=null,nl=0,Xf=null;function _n(){if((Gt&2)!==0&&Pt!==0)return Pt&-Pt;if(H.T!==null){var e=pa;return e!==0?e:nd()}return nr()}function Sy(){Vn===0&&(Vn=(Pt&536870912)===0||Bt?co():536870912);var e=On.current;return e!==null&&(e.flags|=32),Vn}function vn(e,n,a){(e===te&&(Ft===2||Ft===9)||e.cancelPendingCommit!==null)&&(Na(e,0),Ar(e,Pt,Vn,!1)),vi(e,a),((Gt&2)===0||e!==te)&&(e===te&&((Gt&2)===0&&(Ns|=a),ce===4&&Ar(e,Pt,Vn,!1)),oi(e))}function by(e,n,a){if((Gt&6)!==0)throw Error(s(327));var o=!a&&(n&124)===0&&(n&e.expiredLanes)===0||ns(e,n),h=o?lA(e,n):Jf(e,n,!0),f=o;do{if(h===0){wa&&!o&&Ar(e,n,0,!1);break}else{if(a=e.current.alternate,f&&!aA(a)){h=Jf(e,n,!1),f=!1;continue}if(h===2){if(f=n,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;t:{var E=e;h=el;var b=E.current.memoizedState.isDehydrated;if(b&&(Na(E,v).flags|=256),v=Jf(E,v,!1),v!==2){if(Hf&&!b){E.errorRecoveryDisabledLanes|=f,Ns|=f,h=4;break t}f=an,an=h,f!==null&&(an===null?an=f:an.push.apply(an,f))}h=v}if(f=!1,h!==2)continue}}if(h===1){Na(e,0),Ar(e,n,0,!0);break}t:{switch(o=e,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Ar(o,n,Vn,!_r);break t;case 2:an=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(h=Qf+300-Tn(),10<h)){if(Ar(o,n,Vn,!_r),Ks(o,0,!0)!==0)break t;o.timeoutHandle=Wy(Ry.bind(null,o,a,an,Xu,Ff,n,Vn,Ns,Ia,_r,f,2,-0,0),h);break t}Ry(o,a,an,Xu,Ff,n,Vn,Ns,Ia,_r,f,0,-0,0)}}break}while(!0);oi(e)}function Ry(e,n,a,o,h,f,v,E,b,L,G,Q,z,B){if(e.timeoutHandle=-1,Q=n.subtreeFlags,(Q&8192||(Q&16785408)===16785408)&&(ul={stylesheets:null,count:0,unsuspend:jA},_y(n),Q=HA(),Q!==null)){e.cancelPendingCommit=Q(Vy.bind(null,e,n,f,a,o,h,v,E,b,G,1,z,B)),Ar(e,f,v,!L);return}Vy(e,n,f,a,o,h,v,E,b)}function aA(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!dn(f(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ar(e,n,a,o){n&=~Gf,n&=~Ns,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var h=n;0<h;){var f=31-Qe(h),v=1<<f;o[f]=-1,h&=~v}a!==0&&Qn(e,a,n)}function $u(){return(Gt&6)===0?(il(0),!1):!0}function $f(){if(It!==null){if(Ft===0)var e=It.return;else e=It,Mi=bs=null,df(e),Aa=null,Ko=0,e=It;for(;e!==null;)ry(e.alternate,e),e=e.return;It=null}}function Na(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,bA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),$f(),te=e,It=a=Ni(e.current,null),Pt=n,Ft=0,yn=null,_r=!1,wa=ns(e,n),Hf=!1,Ia=Vn=Gf=Ns=vr=ce=0,an=el=null,Ff=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var h=31-Qe(o),f=1<<h;n|=e[h],o&=~f}return ji=n,_u(),a}function wy(e,n){bt=null,H.H=ku,n===Lo||n===Iu?(n=Hg(),Ft=3):n===Bg?(n=Hg(),Ft=4):Ft=n===Gp?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,yn=n,It===null&&(ce=1,qu(e,In(n,e.current)))}function Iy(){var e=H.H;return H.H=ku,e===null?ku:e}function Cy(){var e=H.A;return H.A=rA,e}function Zf(){ce=4,_r||(Pt&4194048)!==Pt&&On.current!==null||(wa=!0),(vr&134217727)===0&&(Ns&134217727)===0||te===null||Ar(te,Pt,Vn,!1)}function Jf(e,n,a){var o=Gt;Gt|=2;var h=Iy(),f=Cy();(te!==e||Pt!==n)&&(Xu=null,Na(e,n)),n=!1;var v=ce;t:do try{if(Ft!==0&&It!==null){var E=It,b=yn;switch(Ft){case 8:$f(),v=6;break t;case 3:case 2:case 9:case 6:On.current===null&&(n=!0);var L=Ft;if(Ft=0,yn=null,Oa(e,E,b,L),a&&wa){v=0;break t}break;default:L=Ft,Ft=0,yn=null,Oa(e,E,b,L)}}oA(),v=ce;break}catch(G){wy(e,G)}while(!0);return n&&e.shellSuspendCounter++,Mi=bs=null,Gt=o,H.H=h,H.A=f,It===null&&(te=null,Pt=0,_u()),v}function oA(){for(;It!==null;)Dy(It)}function lA(e,n){var a=Gt;Gt|=2;var o=Iy(),h=Cy();te!==e||Pt!==n?(Xu=null,Yu=Tn()+500,Na(e,n)):wa=ns(e,n);t:do try{if(Ft!==0&&It!==null){n=It;var f=yn;e:switch(Ft){case 1:Ft=0,yn=null,Oa(e,n,f,1);break;case 2:case 9:if(jg(f)){Ft=0,yn=null,Ny(n);break}n=function(){Ft!==2&&Ft!==9||te!==e||(Ft=7),oi(e)},f.then(n,n);break t;case 3:Ft=7;break t;case 4:Ft=5;break t;case 7:jg(f)?(Ft=0,yn=null,Ny(n)):(Ft=0,yn=null,Oa(e,n,f,7));break;case 5:var v=null;switch(It.tag){case 26:v=It.memoizedState;case 5:case 27:var E=It;if(!v||h_(v)){Ft=0,yn=null;var b=E.sibling;if(b!==null)It=b;else{var L=E.return;L!==null?(It=L,Zu(L)):It=null}break e}}Ft=0,yn=null,Oa(e,n,f,5);break;case 6:Ft=0,yn=null,Oa(e,n,f,6);break;case 8:$f(),ce=6;break t;default:throw Error(s(462))}}uA();break}catch(G){wy(e,G)}while(!0);return Mi=bs=null,H.H=o,H.A=h,Gt=a,It!==null?0:(te=null,Pt=0,_u(),ce)}function uA(){for(;It!==null&&!ao();)Dy(It)}function Dy(e){var n=ny(e.alternate,e,ji);e.memoizedProps=e.pendingProps,n===null?Zu(e):It=n}function Ny(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=$p(a,n,n.pendingProps,n.type,void 0,Pt);break;case 11:n=$p(a,n,n.pendingProps,n.type.render,n.ref,Pt);break;case 5:df(n);default:ry(a,n),n=It=Og(n,ji),n=ny(a,n,ji)}e.memoizedProps=e.pendingProps,n===null?Zu(e):It=n}function Oa(e,n,a,o){Mi=bs=null,df(n),Aa=null,Ko=0;var h=n.return;try{if(J0(e,h,n,a,Pt)){ce=1,qu(e,In(a,e.current)),It=null;return}}catch(f){if(h!==null)throw It=h,f;ce=1,qu(e,In(a,e.current)),It=null;return}n.flags&32768?(Bt||o===1?e=!0:wa||(Pt&536870912)!==0?e=!1:(_r=e=!0,(o===2||o===9||o===3||o===6)&&(o=On.current,o!==null&&o.tag===13&&(o.flags|=16384))),Oy(n,e)):Zu(n)}function Zu(e){var n=e;do{if((n.flags&32768)!==0){Oy(n,_r);return}e=n.return;var a=tA(n.alternate,n,ji);if(a!==null){It=a;return}if(n=n.sibling,n!==null){It=n;return}It=n=e}while(n!==null);ce===0&&(ce=5)}function Oy(e,n){do{var a=eA(e.alternate,e);if(a!==null){a.flags&=32767,It=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){It=e;return}It=e=a}while(e!==null);ce=6,It=null}function Vy(e,n,a,o,h,f,v,E,b){e.cancelPendingCommit=null;do Ju();while(Be!==0);if((Gt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(f=n.lanes|n.childLanes,f|=jh,fo(e,a,f,v,E,b),e===te&&(It=te=null,Pt=0),Ca=n,Tr=e,Da=a,Kf=f,Yf=h,Ay=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,dA(Jr,function(){return ky(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=H.T,H.T=null,h=et.p,et.p=2,v=Gt,Gt|=4;try{nA(e,n,a)}finally{Gt=v,et.p=h,H.T=o}}Be=1,My(),Py(),xy()}}function My(){if(Be===1){Be=0;var e=Tr,n=Ca,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var o=et.p;et.p=2;var h=Gt;Gt|=4;try{gy(n,e);var f=cd,v=Tg(e.containerInfo),E=f.focusedElem,b=f.selectionRange;if(v!==E&&E&&E.ownerDocument&&Eg(E.ownerDocument.documentElement,E)){if(b!==null&&Uh(E)){var L=b.start,G=b.end;if(G===void 0&&(G=L),"selectionStart"in E)E.selectionStart=L,E.selectionEnd=Math.min(G,E.value.length);else{var Q=E.ownerDocument||document,z=Q&&Q.defaultView||window;if(z.getSelection){var B=z.getSelection(),pt=E.textContent.length,ft=Math.min(b.start,pt),$t=b.end===void 0?ft:Math.min(b.end,pt);!B.extend&&ft>$t&&(v=$t,$t=ft,ft=v);var x=vg(E,ft),O=vg(E,$t);if(x&&O&&(B.rangeCount!==1||B.anchorNode!==x.node||B.anchorOffset!==x.offset||B.focusNode!==O.node||B.focusOffset!==O.offset)){var k=Q.createRange();k.setStart(x.node,x.offset),B.removeAllRanges(),ft>$t?(B.addRange(k),B.extend(O.node,O.offset)):(k.setEnd(O.node,O.offset),B.addRange(k))}}}}for(Q=[],B=E;B=B.parentNode;)B.nodeType===1&&Q.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Q.length;E++){var F=Q[E];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}cc=!!ud,cd=ud=null}finally{Gt=h,et.p=o,H.T=a}}e.current=n,Be=2}}function Py(){if(Be===2){Be=0;var e=Tr,n=Ca,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var o=et.p;et.p=2;var h=Gt;Gt|=4;try{hy(e,n.alternate,n)}finally{Gt=h,et.p=o,H.T=a}}Be=3}}function xy(){if(Be===4||Be===3){Be=0,Kl();var e=Tr,n=Ca,a=Da,o=Ay;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Be=5:(Be=0,Ca=Tr=null,Uy(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Er=null),Ys(a),n=n.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(le,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=H.T,h=et.p,et.p=2,H.T=null;try{for(var f=e.onRecoverableError,v=0;v<o.length;v++){var E=o[v];f(E.value,{componentStack:E.stack})}}finally{H.T=n,et.p=h}}(Da&3)!==0&&Ju(),oi(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===Xf?nl++:(nl=0,Xf=e):nl=0,il(0)}}function Uy(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Uo(n)))}function Ju(e){return My(),Py(),xy(),ky()}function ky(){if(Be!==5)return!1;var e=Tr,n=Kf;Kf=0;var a=Ys(Da),o=H.T,h=et.p;try{et.p=32>a?32:a,H.T=null,a=Yf,Yf=null;var f=Tr,v=Da;if(Be=0,Ca=Tr=null,Da=0,(Gt&6)!==0)throw Error(s(331));var E=Gt;if(Gt|=4,Ey(f.current),yy(f,f.current,v,a),Gt=E,il(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(le,f)}catch{}return!0}finally{et.p=h,H.T=o,Uy(e,n)}}function Ly(e,n,a){n=In(a,n),n=If(e.stateNode,n,2),e=hr(e,n,2),e!==null&&(vi(e,2),oi(e))}function Zt(e,n,a){if(e.tag===3)Ly(e,e,a);else for(;n!==null;){if(n.tag===3){Ly(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Er===null||!Er.has(o))){e=In(a,e),a=qp(2),o=hr(n,a,2),o!==null&&(Hp(a,o,n,e),vi(o,2),oi(o));break}}n=n.return}}function Wf(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new sA;var h=new Set;o.set(n,h)}else h=o.get(n),h===void 0&&(h=new Set,o.set(n,h));h.has(a)||(Hf=!0,h.add(a),e=cA.bind(null,e,n,a),n.then(e,e))}function cA(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,te===e&&(Pt&a)===a&&(ce===4||ce===3&&(Pt&62914560)===Pt&&300>Tn()-Qf?(Gt&2)===0&&Na(e,0):Gf|=a,Ia===Pt&&(Ia=0)),oi(e)}function zy(e,n){n===0&&(n=ho()),e=fa(e,n),e!==null&&(vi(e,n),oi(e))}function hA(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),zy(e,a)}function fA(e,n){var a=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(n),zy(e,a)}function dA(e,n){return $r(e,n)}var Wu=null,Va=null,td=!1,tc=!1,ed=!1,Os=0;function oi(e){e!==Va&&e.next===null&&(Va===null?Wu=Va=e:Va=Va.next=e),tc=!0,td||(td=!0,gA())}function il(e,n){if(!ed&&tc){ed=!0;do for(var a=!1,o=Wu;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var v=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-Qe(42|e)+1)-1,f&=h&~(v&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Hy(o,f))}else f=Pt,f=Ks(o,o===te?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||ns(o,f)||(a=!0,Hy(o,f));o=o.next}while(a);ed=!1}}function mA(){By()}function By(){tc=td=!1;var e=0;Os!==0&&(SA()&&(e=Os),Os=0);for(var n=Tn(),a=null,o=Wu;o!==null;){var h=o.next,f=jy(o,n);f===0?(o.next=null,a===null?Wu=h:a.next=h,h===null&&(Va=a)):(a=o,(e!==0||(f&3)!==0)&&(tc=!0)),o=h}il(e)}function jy(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-Qe(f),E=1<<v,b=h[v];b===-1?((E&a)===0||(E&o)!==0)&&(h[v]=uo(E,n)):b<=n&&(e.expiredLanes|=E),f&=~E}if(n=te,a=Pt,a=Ks(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(Ft===2||Ft===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Zr(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ns(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&Zr(o),Ys(a)){case 2:case 8:a=Fs;break;case 32:a=Jr;break;case 268435456:a=Qs;break;default:a=Jr}return o=qy.bind(null,e),a=$r(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&Zr(o),e.callbackPriority=2,e.callbackNode=null,2}function qy(e,n){if(Be!==0&&Be!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Ju()&&e.callbackNode!==a)return null;var o=Pt;return o=Ks(e,e===te?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(by(e,o,n),jy(e,Tn()),e.callbackNode!=null&&e.callbackNode===a?qy.bind(null,e):null)}function Hy(e,n){if(Ju())return null;by(e,n,!0)}function gA(){RA(function(){(Gt&6)!==0?$r(oo,mA):By()})}function nd(){return Os===0&&(Os=co()),Os}function Gy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ta(""+e)}function Fy(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function pA(e,n,a,o,h){if(n==="submit"&&a&&a.stateNode===h){var f=Gy((h[pe]||null).action),v=o.submitter;v&&(n=(n=v[pe]||null)?Gy(n.formAction):v.getAttribute("formAction"),n!==null&&(f=n,v=null));var E=new ea("action","action",null,o,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Os!==0){var b=v?Fy(h,v):new FormData(h);Af(a,{pending:!0,data:b,method:h.method,action:f},null,b)}}else typeof f=="function"&&(E.preventDefault(),b=v?Fy(h,v):new FormData(h),Af(a,{pending:!0,data:b,method:h.method,action:f},f,b))},currentTarget:h}]})}}for(var id=0;id<Bh.length;id++){var rd=Bh[id],yA=rd.toLowerCase(),_A=rd[0].toUpperCase()+rd.slice(1);zn(yA,"on"+_A)}zn(bg,"onAnimationEnd"),zn(Rg,"onAnimationIteration"),zn(wg,"onAnimationStart"),zn("dblclick","onDoubleClick"),zn("focusin","onFocus"),zn("focusout","onBlur"),zn(x0,"onTransitionRun"),zn(U0,"onTransitionStart"),zn(k0,"onTransitionCancel"),zn(Ig,"onTransitionEnd"),Ti("onMouseEnter",["mouseout","mouseover"]),Ti("onMouseLeave",["mouseout","mouseover"]),Ti("onPointerEnter",["pointerout","pointerover"]),Ti("onPointerLeave",["pointerout","pointerover"]),kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rl));function Qy(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var f=void 0;if(n)for(var v=o.length-1;0<=v;v--){var E=o[v],b=E.instance,L=E.currentTarget;if(E=E.listener,b!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=L;try{f(h)}catch(G){ju(G)}h.currentTarget=null,f=b}else for(v=0;v<o.length;v++){if(E=o[v],b=E.instance,L=E.currentTarget,E=E.listener,b!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=L;try{f(h)}catch(G){ju(G)}h.currentTarget=null,f=b}}}}function Ct(e,n){var a=n[go];a===void 0&&(a=n[go]=new Set);var o=e+"__bubble";a.has(o)||(Ky(n,e,2,!1),a.add(o))}function sd(e,n,a){var o=0;n&&(o|=4),Ky(a,e,o,n)}var ec="_reactListening"+Math.random().toString(36).slice(2);function ad(e){if(!e[ec]){e[ec]=!0,po.forEach(function(a){a!=="selectionchange"&&(vA.has(a)||sd(a,!1,e),sd(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[ec]||(n[ec]=!0,sd("selectionchange",!1,n))}}function Ky(e,n,a,o){switch(y_(n)){case 2:var h=QA;break;case 8:h=KA;break;default:h=Ed}a=h.bind(null,n,a,e),h=void 0,!Rn||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(n,a,{capture:!0,passive:h}):e.addEventListener(n,a,!0):h!==void 0?e.addEventListener(n,a,{passive:h}):e.addEventListener(n,a,!1)}function od(e,n,a,o,h){var f=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=o.return;v!==null;){var b=v.tag;if((b===3||b===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=Ei(E),v===null)return;if(b=v.tag,b===5||b===6||b===26||b===27){o=f=v;continue t}E=E.parentNode}}o=o.return}iu(function(){var L=f,G=bn(a),Q=[];t:{var z=Cg.get(e);if(z!==void 0){var B=ea,pt=e;switch(e){case"keypress":if(Jn(a)===0)break t;case"keydown":case"keyup":B=oa;break;case"focusin":pt="focus",B=ra;break;case"focusout":pt="blur",B=ra;break;case"beforeblur":case"afterblur":B=ra;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=wn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=Vh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=hu;break;case bg:case Rg:case wg:B=sa;break;case Ig:B=du;break;case"scroll":case"scrollend":B=ru;break;case"wheel":B=la;break;case"copy":case"cut":case"paste":B=aa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Co;break;case"toggle":case"beforetoggle":B=gu}var ft=(n&4)!==0,$t=!ft&&(e==="scroll"||e==="scrollend"),x=ft?z!==null?z+"Capture":null:z;ft=[];for(var O=L,k;O!==null;){var F=O;if(k=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||k===null||x===null||(F=cs(O,x),F!=null&&ft.push(sl(O,F,k))),$t)break;O=O.return}0<ft.length&&(z=new B(z,pt,null,a,G),Q.push({event:z,listeners:ft}))}}if((n&7)===0){t:{if(z=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",z&&a!==bi&&(pt=a.relatedTarget||a.fromElement)&&(Ei(pt)||pt[An]))break t;if((B||z)&&(z=G.window===G?G:(z=G.ownerDocument)?z.defaultView||z.parentWindow:window,B?(pt=a.relatedTarget||a.toElement,B=L,pt=pt?Ei(pt):null,pt!==null&&($t=c(pt),ft=pt.tag,pt!==$t||ft!==5&&ft!==27&&ft!==6)&&(pt=null)):(B=null,pt=L),B!==pt)){if(ft=wn,F="onMouseLeave",x="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(ft=Co,F="onPointerLeave",x="onPointerEnter",O="pointer"),$t=B==null?z:Yn(B),k=pt==null?z:Yn(pt),z=new ft(F,O+"leave",B,a,G),z.target=$t,z.relatedTarget=k,F=null,Ei(G)===L&&(ft=new ft(x,O+"enter",pt,a,G),ft.target=k,ft.relatedTarget=$t,F=ft),$t=F,B&&pt)e:{for(ft=B,x=pt,O=0,k=ft;k;k=Ma(k))O++;for(k=0,F=x;F;F=Ma(F))k++;for(;0<O-k;)ft=Ma(ft),O--;for(;0<k-O;)x=Ma(x),k--;for(;O--;){if(ft===x||x!==null&&ft===x.alternate)break e;ft=Ma(ft),x=Ma(x)}ft=null}else ft=null;B!==null&&Yy(Q,z,B,ft,!1),pt!==null&&$t!==null&&Yy(Q,$t,pt,ft,!0)}}t:{if(z=L?Yn(L):window,B=z.nodeName&&z.nodeName.toLowerCase(),B==="select"||B==="input"&&z.type==="file")var st=dg;else if(Re(z))if(mg)st=V0;else{st=N0;var wt=D0}else B=z.nodeName,!B||B.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?L&&To(L.elementType)&&(st=dg):st=O0;if(st&&(st=st(e,L))){Di(Q,st,a,G);break t}wt&&wt(e,z,L),e==="focusout"&&L&&z.type==="number"&&L.memoizedProps.value!=null&&ar(z,"number",z.value)}switch(wt=L?Yn(L):window,e){case"focusin":(Re(wt)||wt.contentEditable==="true")&&(ua=wt,kh=L,Oo=null);break;case"focusout":Oo=kh=ua=null;break;case"mousedown":Lh=!0;break;case"contextmenu":case"mouseup":case"dragend":Lh=!1,Ag(Q,a,G);break;case"selectionchange":if(P0)break;case"keydown":case"keyup":Ag(Q,a,G)}var ot;if(ei)t:{switch(e){case"compositionstart":var dt="onCompositionStart";break t;case"compositionend":dt="onCompositionEnd";break t;case"compositionupdate":dt="onCompositionUpdate";break t}dt=void 0}else Vt?j(e,a)&&(dt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(dt="onCompositionStart");dt&&(y&&a.locale!=="ko"&&(Vt||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Vt&&(ot=So()):(Zn=G,or="value"in Zn?Zn.value:Zn.textContent,Vt=!0)),wt=nc(L,dt),0<wt.length&&(dt=new wo(dt,e,null,a,G),Q.push({event:dt,listeners:wt}),ot?dt.data=ot:(ot=W(a),ot!==null&&(dt.data=ot)))),(ot=m?be(e,a):Mt(e,a))&&(dt=nc(L,"onBeforeInput"),0<dt.length&&(wt=new wo("onBeforeInput","beforeinput",null,a,G),Q.push({event:wt,listeners:dt}),wt.data=ot)),pA(Q,e,L,a,G)}Qy(Q,n)})}function sl(e,n,a){return{instance:e,listener:n,currentTarget:a}}function nc(e,n){for(var a=n+"Capture",o=[];e!==null;){var h=e,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=cs(e,a),h!=null&&o.unshift(sl(e,h,f)),h=cs(e,n),h!=null&&o.push(sl(e,h,f))),e.tag===3)return o;e=e.return}return[]}function Ma(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Yy(e,n,a,o,h){for(var f=n._reactName,v=[];a!==null&&a!==o;){var E=a,b=E.alternate,L=E.stateNode;if(E=E.tag,b!==null&&b===o)break;E!==5&&E!==26&&E!==27||L===null||(b=L,h?(L=cs(a,f),L!=null&&v.unshift(sl(a,L,b))):h||(L=cs(a,f),L!=null&&v.push(sl(a,L,b)))),a=a.return}v.length!==0&&e.push({event:n,listeners:v})}var EA=/\r\n?/g,TA=/\u0000|\uFFFD/g;function Xy(e){return(typeof e=="string"?e:""+e).replace(EA,`
`).replace(TA,"")}function $y(e,n){return n=Xy(n),Xy(e)===n}function ic(){}function Xt(e,n,a,o,h,f){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||Sn(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&Sn(e,""+o);break;case"className":Xn(e,"class",o);break;case"tabIndex":Xn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Xn(e,a,o);break;case"style":Eo(e,o,f);break;case"data":if(n!=="object"){Xn(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=ta(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(n!=="input"&&Xt(e,n,"name",h.name,h,null),Xt(e,n,"formEncType",h.formEncType,h,null),Xt(e,n,"formMethod",h.formMethod,h,null),Xt(e,n,"formTarget",h.formTarget,h,null)):(Xt(e,n,"encType",h.encType,h,null),Xt(e,n,"method",h.method,h,null),Xt(e,n,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=ta(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=ic);break;case"onScroll":o!=null&&Ct("scroll",e);break;case"onScrollEnd":o!=null&&Ct("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=ta(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Ct("beforetoggle",e),Ct("toggle",e),sr(e,"popover",o);break;case"xlinkActuate":ke(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":ke(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":ke(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":ke(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":ke(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":ke(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":ke(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":ke(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":ke(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":sr(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Nh.get(a)||a,sr(e,a,o))}}function ld(e,n,a,o,h,f){switch(a){case"style":Eo(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?Sn(e,o):(typeof o=="number"||typeof o=="bigint")&&Sn(e,""+o);break;case"onScroll":o!=null&&Ct("scroll",e);break;case"onScrollEnd":o!=null&&Ct("scrollend",e);break;case"onClick":o!=null&&(e.onclick=ic);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xs.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),f=e[pe]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(n,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):sr(e,a,o)}}}function je(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ct("error",e),Ct("load",e);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Xt(e,n,f,v,a,null)}}h&&Xt(e,n,"srcSet",a.srcSet,a,null),o&&Xt(e,n,"src",a.src,a,null);return;case"input":Ct("invalid",e);var E=f=v=h=null,b=null,L=null;for(o in a)if(a.hasOwnProperty(o)){var G=a[o];if(G!=null)switch(o){case"name":h=G;break;case"type":v=G;break;case"checked":b=G;break;case"defaultChecked":L=G;break;case"value":f=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,n));break;default:Xt(e,n,o,G,a,null)}}os(e,f,E,b,L,v,h,!1),Ws(e);return;case"select":Ct("invalid",e),o=v=f=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:Xt(e,n,h,E,a,null)}n=f,a=v,e.multiple=!!o,n!=null?Si(e,!!o,n,!1):a!=null&&Si(e,!!o,a,!0);return;case"textarea":Ct("invalid",e),f=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Xt(e,n,v,E,a,null)}ls(e,o,h,f),Ws(e);return;case"option":for(b in a)if(a.hasOwnProperty(b)&&(o=a[b],o!=null))switch(b){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Xt(e,n,b,o,a,null)}return;case"dialog":Ct("beforetoggle",e),Ct("toggle",e),Ct("cancel",e),Ct("close",e);break;case"iframe":case"object":Ct("load",e);break;case"video":case"audio":for(o=0;o<rl.length;o++)Ct(rl[o],e);break;case"image":Ct("error",e),Ct("load",e);break;case"details":Ct("toggle",e);break;case"embed":case"source":case"link":Ct("error",e),Ct("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(o=a[L],o!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Xt(e,n,L,o,a,null)}return;default:if(To(n)){for(G in a)a.hasOwnProperty(G)&&(o=a[G],o!==void 0&&ld(e,n,G,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&Xt(e,n,E,o,a,null))}function AA(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,v=null,E=null,b=null,L=null,G=null;for(B in a){var Q=a[B];if(a.hasOwnProperty(B)&&Q!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":b=Q;default:o.hasOwnProperty(B)||Xt(e,n,B,null,o,Q)}}for(var z in o){var B=o[z];if(Q=a[z],o.hasOwnProperty(z)&&(B!=null||Q!=null))switch(z){case"type":f=B;break;case"name":h=B;break;case"checked":L=B;break;case"defaultChecked":G=B;break;case"value":v=B;break;case"defaultValue":E=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,n));break;default:B!==Q&&Xt(e,n,z,B,o,Q)}}fn(e,v,E,b,L,G,f,h);return;case"select":B=v=E=z=null;for(f in a)if(b=a[f],a.hasOwnProperty(f)&&b!=null)switch(f){case"value":break;case"multiple":B=b;default:o.hasOwnProperty(f)||Xt(e,n,f,null,o,b)}for(h in o)if(f=o[h],b=a[h],o.hasOwnProperty(h)&&(f!=null||b!=null))switch(h){case"value":z=f;break;case"defaultValue":E=f;break;case"multiple":v=f;default:f!==b&&Xt(e,n,h,f,o,b)}n=E,a=v,o=B,z!=null?Si(e,!!a,z,!1):!!o!=!!a&&(n!=null?Si(e,!!a,n,!0):Si(e,!!a,a?[]:"",!1));return;case"textarea":B=z=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Xt(e,n,E,null,o,h)}for(v in o)if(h=o[v],f=a[v],o.hasOwnProperty(v)&&(h!=null||f!=null))switch(v){case"value":z=h;break;case"defaultValue":B=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&Xt(e,n,v,h,o,f)}Kt(e,z,B);return;case"option":for(var pt in a)if(z=a[pt],a.hasOwnProperty(pt)&&z!=null&&!o.hasOwnProperty(pt))switch(pt){case"selected":e.selected=!1;break;default:Xt(e,n,pt,null,o,z)}for(b in o)if(z=o[b],B=a[b],o.hasOwnProperty(b)&&z!==B&&(z!=null||B!=null))switch(b){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Xt(e,n,b,z,o,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ft in a)z=a[ft],a.hasOwnProperty(ft)&&z!=null&&!o.hasOwnProperty(ft)&&Xt(e,n,ft,null,o,z);for(L in o)if(z=o[L],B=a[L],o.hasOwnProperty(L)&&z!==B&&(z!=null||B!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,n));break;default:Xt(e,n,L,z,o,B)}return;default:if(To(n)){for(var $t in a)z=a[$t],a.hasOwnProperty($t)&&z!==void 0&&!o.hasOwnProperty($t)&&ld(e,n,$t,void 0,o,z);for(G in o)z=o[G],B=a[G],!o.hasOwnProperty(G)||z===B||z===void 0&&B===void 0||ld(e,n,G,z,o,B);return}}for(var x in a)z=a[x],a.hasOwnProperty(x)&&z!=null&&!o.hasOwnProperty(x)&&Xt(e,n,x,null,o,z);for(Q in o)z=o[Q],B=a[Q],!o.hasOwnProperty(Q)||z===B||z==null&&B==null||Xt(e,n,Q,z,o,B)}var ud=null,cd=null;function rc(e){return e.nodeType===9?e:e.ownerDocument}function Zy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jy(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function hd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var fd=null;function SA(){var e=window.event;return e&&e.type==="popstate"?e===fd?!1:(fd=e,!0):(fd=null,!1)}var Wy=typeof setTimeout=="function"?setTimeout:void 0,bA=typeof clearTimeout=="function"?clearTimeout:void 0,t_=typeof Promise=="function"?Promise:void 0,RA=typeof queueMicrotask=="function"?queueMicrotask:typeof t_<"u"?function(e){return t_.resolve(null).then(e).catch(wA)}:Wy;function wA(e){setTimeout(function(){throw e})}function Sr(e){return e==="head"}function e_(e,n){var a=n,o=0,h=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<o&&8>o){a=o;var v=e.ownerDocument;if(a&1&&al(v.documentElement),a&2&&al(v.body),a&4)for(a=v.head,al(a),v=a.firstChild;v;){var E=v.nextSibling,b=v.nodeName;v[is]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(h===0){e.removeChild(f),ml(n);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=f}while(a);ml(n)}function dd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":dd(a),rr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function IA(e,n,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[is])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=jn(e.nextSibling),e===null)break}return null}function CA(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=jn(e.nextSibling),e===null))return null;return e}function md(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function DA(e,n){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function jn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}var gd=null;function n_(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(n===0)return e;n--}else a==="/$"&&n++}e=e.previousSibling}return null}function i_(e,n,a){switch(n=rc(a),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function al(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);rr(e)}var Mn=new Map,r_=new Set;function sc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var qi=et.d;et.d={f:NA,r:OA,D:VA,C:MA,L:PA,m:xA,X:kA,S:UA,M:LA};function NA(){var e=qi.f(),n=$u();return e||n}function OA(e){var n=Kn(e);n!==null&&n.tag===5&&n.type==="form"?bp(n):qi.r(e)}var Pa=typeof document>"u"?null:document;function s_(e,n,a){var o=Pa;if(o&&typeof n=="string"&&n){var h=ye(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),r_.has(h)||(r_.add(h),e={rel:e,crossOrigin:a,href:n},o.querySelector(h)===null&&(n=o.createElement("link"),je(n,"link",e),he(n),o.head.appendChild(n)))}}function VA(e){qi.D(e),s_("dns-prefetch",e,null)}function MA(e,n){qi.C(e,n),s_("preconnect",e,n)}function PA(e,n,a){qi.L(e,n,a);var o=Pa;if(o&&e&&n){var h='link[rel="preload"][as="'+ye(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+ye(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+ye(a.imageSizes)+'"]')):h+='[href="'+ye(e)+'"]';var f=h;switch(n){case"style":f=xa(e);break;case"script":f=Ua(e)}Mn.has(f)||(e=A({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),Mn.set(f,e),o.querySelector(h)!==null||n==="style"&&o.querySelector(ol(f))||n==="script"&&o.querySelector(ll(f))||(n=o.createElement("link"),je(n,"link",e),he(n),o.head.appendChild(n)))}}function xA(e,n){qi.m(e,n);var a=Pa;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+ye(o)+'"][href="'+ye(e)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Ua(e)}if(!Mn.has(f)&&(e=A({rel:"modulepreload",href:e},n),Mn.set(f,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ll(f)))return}o=a.createElement("link"),je(o,"link",e),he(o),a.head.appendChild(o)}}}function UA(e,n,a){qi.S(e,n,a);var o=Pa;if(o&&e){var h=We(o).hoistableStyles,f=xa(e);n=n||"default";var v=h.get(f);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(ol(f)))E.loading=5;else{e=A({rel:"stylesheet",href:e,"data-precedence":n},a),(a=Mn.get(f))&&pd(e,a);var b=v=o.createElement("link");he(b),je(b,"link",e),b._p=new Promise(function(L,G){b.onload=L,b.onerror=G}),b.addEventListener("load",function(){E.loading|=1}),b.addEventListener("error",function(){E.loading|=2}),E.loading|=4,ac(v,n,o)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(f,v)}}}function kA(e,n){qi.X(e,n);var a=Pa;if(a&&e){var o=We(a).hoistableScripts,h=Ua(e),f=o.get(h);f||(f=a.querySelector(ll(h)),f||(e=A({src:e,async:!0},n),(n=Mn.get(h))&&yd(e,n),f=a.createElement("script"),he(f),je(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function LA(e,n){qi.M(e,n);var a=Pa;if(a&&e){var o=We(a).hoistableScripts,h=Ua(e),f=o.get(h);f||(f=a.querySelector(ll(h)),f||(e=A({src:e,async:!0,type:"module"},n),(n=Mn.get(h))&&yd(e,n),f=a.createElement("script"),he(f),je(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function a_(e,n,a,o){var h=(h=vt.current)?sc(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=xa(a.href),a=We(h).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=xa(a.href);var f=We(h).hoistableStyles,v=f.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=h.querySelector(ol(e)))&&!f._p&&(v.instance=f,v.state.loading=5),Mn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Mn.set(e,a),f||zA(h,e,a,v.state))),n&&o===null)throw Error(s(528,""));return v}if(n&&o!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ua(a),a=We(h).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function xa(e){return'href="'+ye(e)+'"'}function ol(e){return'link[rel="stylesheet"]['+e+"]"}function o_(e){return A({},e,{"data-precedence":e.precedence,precedence:null})}function zA(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),je(n,"link",a),he(n),e.head.appendChild(n))}function Ua(e){return'[src="'+ye(e)+'"]'}function ll(e){return"script[async]"+e}function l_(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+ye(a.href)+'"]');if(o)return n.instance=o,he(o),o;var h=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),he(o),je(o,"style",h),ac(o,a.precedence,e),n.instance=o;case"stylesheet":h=xa(a.href);var f=e.querySelector(ol(h));if(f)return n.state.loading|=4,n.instance=f,he(f),f;o=o_(a),(h=Mn.get(h))&&pd(o,h),f=(e.ownerDocument||e).createElement("link"),he(f);var v=f;return v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),je(f,"link",o),n.state.loading|=4,ac(f,a.precedence,e),n.instance=f;case"script":return f=Ua(a.src),(h=e.querySelector(ll(f)))?(n.instance=h,he(h),h):(o=a,(h=Mn.get(f))&&(o=A({},a),yd(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),he(h),je(h,"link",o),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,ac(o,a.precedence,e));return n.instance}function ac(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===n)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(e,f.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function pd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function yd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var oc=null;function u_(e,n,a){if(oc===null){var o=new Map,h=oc=new Map;h.set(a,o)}else h=oc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var f=a[h];if(!(f[is]||f[Se]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(n)||"";v=e+v;var E=o.get(v);E?E.push(f):o.set(v,[f])}}return o}function c_(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function BA(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function h_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var ul=null;function jA(){}function qA(e,n,a){if(ul===null)throw Error(s(475));var o=ul;if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var h=xa(a.href),f=e.querySelector(ol(h));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=lc.bind(o),e.then(o,o)),n.state.loading|=4,n.instance=f,he(f);return}f=e.ownerDocument||e,a=o_(a),(h=Mn.get(h))&&pd(a,h),f=f.createElement("link"),he(f);var v=f;v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),je(f,"link",a),n.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(o.count++,n=lc.bind(o),e.addEventListener("load",n),e.addEventListener("error",n))}}function HA(){if(ul===null)throw Error(s(475));var e=ul;return e.stylesheets&&e.count===0&&_d(e,e.stylesheets),0<e.count?function(n){var a=setTimeout(function(){if(e.stylesheets&&_d(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a)}}:null}function lc(){if(this.count--,this.count===0){if(this.stylesheets)_d(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var uc=null;function _d(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,uc=new Map,n.forEach(GA,e),uc=null,lc.call(e))}function GA(e,n){if(!(n.state.loading&4)){var a=uc.get(e);if(a)var o=a.get(null);else{a=new Map,uc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var v=h[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=n.instance,v=h.getAttribute("data-precedence"),f=a.get(v)||o,f===o&&a.set(null,h),a.set(v,h),this.count++,o=lc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var cl={$$typeof:ut,Provider:null,Consumer:null,_currentValue:lt,_currentValue2:lt,_threadCount:0};function FA(e,n,a,o,h,f,v,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_i(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_i(0),this.hiddenUpdates=_i(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function f_(e,n,a,o,h,f,v,E,b,L,G,Q){return e=new FA(e,n,a,v,E,b,L,Q),n=1,f===!0&&(n|=24),f=mn(3,null,null,n),e.current=f,f.stateNode=e,n=Jh(),n.refCount++,e.pooledCache=n,n.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:n},nf(f),e}function d_(e){return e?(e=da,e):da}function m_(e,n,a,o,h,f){h=d_(h),o.context===null?o.context=h:o.pendingContext=h,o=cr(n),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=hr(e,o,n),a!==null&&(vn(a,e,n),Bo(a,e,n))}function g_(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function vd(e,n){g_(e,n),(e=e.alternate)&&g_(e,n)}function p_(e){if(e.tag===13){var n=fa(e,67108864);n!==null&&vn(n,e,67108864),vd(e,67108864)}}var cc=!0;function QA(e,n,a,o){var h=H.T;H.T=null;var f=et.p;try{et.p=2,Ed(e,n,a,o)}finally{et.p=f,H.T=h}}function KA(e,n,a,o){var h=H.T;H.T=null;var f=et.p;try{et.p=8,Ed(e,n,a,o)}finally{et.p=f,H.T=h}}function Ed(e,n,a,o){if(cc){var h=Td(o);if(h===null)od(e,n,o,hc,a),__(e,o);else if(XA(h,e,n,a,o))o.stopPropagation();else if(__(e,o),n&4&&-1<YA.indexOf(e)){for(;h!==null;){var f=Kn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=Un(f.pendingLanes);if(v!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var b=1<<31-Qe(v);E.entanglements[1]|=b,v&=~b}oi(f),(Gt&6)===0&&(Yu=Tn()+500,il(0))}}break;case 13:E=fa(f,2),E!==null&&vn(E,f,2),$u(),vd(f,2)}if(f=Td(o),f===null&&od(e,n,o,hc,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else od(e,n,o,null,a)}}function Td(e){return e=bn(e),Ad(e)}var hc=null;function Ad(e){if(hc=null,e=Ei(e),e!==null){var n=c(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=d(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return hc=e,null}function y_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bh()){case oo:return 2;case Fs:return 8;case Jr:case Rh:return 32;case Qs:return 268435456;default:return 32}default:return 32}}var Sd=!1,br=null,Rr=null,wr=null,hl=new Map,fl=new Map,Ir=[],YA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function __(e,n){switch(e){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":hl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":fl.delete(n.pointerId)}}function dl(e,n,a,o,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},n!==null&&(n=Kn(n),n!==null&&p_(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function XA(e,n,a,o,h){switch(n){case"focusin":return br=dl(br,e,n,a,o,h),!0;case"dragenter":return Rr=dl(Rr,e,n,a,o,h),!0;case"mouseover":return wr=dl(wr,e,n,a,o,h),!0;case"pointerover":var f=h.pointerId;return hl.set(f,dl(hl.get(f)||null,e,n,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,fl.set(f,dl(fl.get(f)||null,e,n,a,o,h)),!0}return!1}function v_(e){var n=Ei(e.target);if(n!==null){var a=c(n);if(a!==null){if(n=a.tag,n===13){if(n=d(a),n!==null){e.blockedOn=n,$l(e.priority,function(){if(a.tag===13){var o=_n();o=er(o);var h=fa(a,o);h!==null&&vn(h,a,o),vd(a,o)}});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=Td(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);bi=o,a.target.dispatchEvent(o),bi=null}else return n=Kn(a),n!==null&&p_(n),e.blockedOn=a,!1;n.shift()}return!0}function E_(e,n,a){fc(e)&&a.delete(n)}function $A(){Sd=!1,br!==null&&fc(br)&&(br=null),Rr!==null&&fc(Rr)&&(Rr=null),wr!==null&&fc(wr)&&(wr=null),hl.forEach(E_),fl.forEach(E_)}function dc(e,n){e.blockedOn===n&&(e.blockedOn=null,Sd||(Sd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,$A)))}var mc=null;function T_(e){mc!==e&&(mc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){mc===e&&(mc=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],h=e[n+2];if(typeof o!="function"){if(Ad(o||a)===null)continue;break}var f=Kn(a);f!==null&&(e.splice(n,3),n-=3,Af(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function ml(e){function n(b){return dc(b,e)}br!==null&&dc(br,e),Rr!==null&&dc(Rr,e),wr!==null&&dc(wr,e),hl.forEach(n),fl.forEach(n);for(var a=0;a<Ir.length;a++){var o=Ir[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Ir.length&&(a=Ir[0],a.blockedOn===null);)v_(a),a.blockedOn===null&&Ir.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],v=h[pe]||null;if(typeof f=="function")v||T_(a);else if(v){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,v=f[pe]||null)E=v.formAction;else if(Ad(h)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),T_(a)}}}function bd(e){this._internalRoot=e}gc.prototype.render=bd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,o=_n();m_(a,o,e,n,null,null)},gc.prototype.unmount=bd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;m_(e.current,2,null,e,null,null),$u(),n[An]=null}};function gc(e){this._internalRoot=e}gc.prototype.unstable_scheduleHydration=function(e){if(e){var n=nr();e={blockedOn:null,target:e,priority:n};for(var a=0;a<Ir.length&&n!==0&&n<Ir[a].priority;a++);Ir.splice(a,0,e),a===0&&v_(e)}};var A_=t.version;if(A_!=="19.1.1")throw Error(s(527,A_,"19.1.1"));et.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=p(n),e=e!==null?_(e):null,e=e===null?null:e.stateNode,e};var ZA={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pc.isDisabled&&pc.supportsFiber)try{le=pc.inject(ZA),Ht=pc}catch{}}return pl.createRoot=function(e,n){if(!l(e))throw Error(s(299));var a=!1,o="",h=Lp,f=zp,v=Bp,E=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(E=n.unstable_transitionCallbacks)),n=f_(e,1,!1,null,null,a,o,h,f,v,E,null),e[An]=n.current,ad(e),new bd(n)},pl.hydrateRoot=function(e,n,a){if(!l(e))throw Error(s(299));var o=!1,h="",f=Lp,v=zp,E=Bp,b=null,L=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(b=a.unstable_transitionCallbacks),a.formState!==void 0&&(L=a.formState)),n=f_(e,1,!0,n,a??null,o,h,f,v,E,b,L),n.context=d_(null),a=n.current,o=_n(),o=er(o),h=cr(o),h.callback=null,hr(a,h,o),a=o,n.current.lanes=a,vi(n,a),oi(n),e[An]=n.current,ad(e),new gc(n)},pl.version="19.1.1",pl}var V_;function oS(){if(V_)return Id.exports;V_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Id.exports=aS(),Id.exports}var lS=oS();const uS=()=>{};var M_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE=function(r){const t=[];let i=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[i++]=l:l<2048?(t[i++]=l>>6|192,t[i++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[i++]=l>>18|240,t[i++]=l>>12&63|128,t[i++]=l>>6&63|128,t[i++]=l&63|128):(t[i++]=l>>12|224,t[i++]=l>>6&63|128,t[i++]=l&63|128)}return t},cS=function(r){const t=[];let i=0,s=0;for(;i<r.length;){const l=r[i++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[i++];t[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[i++],d=r[i++],g=r[i++],p=((l&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;t[s++]=String.fromCharCode(55296+(p>>10)),t[s++]=String.fromCharCode(56320+(p&1023))}else{const c=r[i++],d=r[i++];t[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return t.join("")},lE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,g=d?r[l+1]:0,p=l+2<r.length,_=p?r[l+2]:0,A=c>>2,C=(c&3)<<4|g>>4;let D=(g&15)<<2|_>>6,q=_&63;p||(q=64,d||(D=64)),s.push(i[A],i[C],i[D],i[q])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(oE(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):cS(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=i[r.charAt(l++)],g=l<r.length?i[r.charAt(l)]:0;++l;const _=l<r.length?i[r.charAt(l)]:64;++l;const C=l<r.length?i[r.charAt(l)]:64;if(++l,c==null||g==null||_==null||C==null)throw new hS;const D=c<<2|g>>4;if(s.push(D),_!==64){const q=g<<4&240|_>>2;if(s.push(q),C!==64){const $=_<<6&192|C;s.push($)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class hS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fS=function(r){const t=oE(r);return lE.encodeByteArray(t,!0)},Pc=function(r){return fS(r).replace(/\./g,"")},uE=function(r){try{return lE.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=()=>dS().__FIREBASE_DEFAULTS__,gS=()=>{if(typeof process>"u"||typeof M_>"u")return;const r=M_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},pS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&uE(r[1]);return t&&JSON.parse(t)},th=()=>{try{return uS()||mS()||gS()||pS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},cE=r=>th()?.emulatorHosts?.[r],yS=r=>{const t=cE(r);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),s]:[t.substring(0,i),s]},hE=()=>th()?.config,fE=r=>th()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,s)=>{i?this.reject(i):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function dE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Pc(JSON.stringify(i)),Pc(JSON.stringify(d)),""].join(".")}const Tl={};function ES(){const r={prod:[],emulator:[]};for(const t of Object.keys(Tl))Tl[t]?r.emulator.push(t):r.prod.push(t);return r}function TS(r){let t=document.getElementById(r),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),i=!0),{created:i,element:t}}let P_=!1;function mE(r,t){if(typeof window>"u"||typeof document>"u"||!Wa(window.location.host)||Tl[r]===t||Tl[r]||P_)return;Tl[r]=t;function i(D){return`__firebase__banner__${D}`}const s="__firebase__banner",c=ES().prod.length>0;function d(){const D=document.getElementById(s);D&&D.remove()}function g(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function p(D,q){D.setAttribute("width","24"),D.setAttribute("id",q),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function _(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{P_=!0,d()},D}function A(D,q){D.setAttribute("id",q),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function C(){const D=TS(s),q=i("text"),$=document.getElementById(q)||document.createElement("span"),it=i("learnmore"),Z=document.getElementById(it)||document.createElement("a"),yt=i("preprendIcon"),mt=document.getElementById(yt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const ut=D.element;g(ut),A(Z,it);const Ut=_();p(mt,yt),ut.append(mt,$,Z,Ut),document.body.appendChild(ut)}c?($.innerText="Preview backend disconnected.",mt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(mt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function SS(){const r=th()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function wS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IS(){const r=Je();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function CS(){return!SS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DS(){try{return typeof indexedDB=="object"}catch{return!1}}function NS(){return new Promise((r,t)=>{try{let i=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(i){t(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="FirebaseError";class Wi extends Error{constructor(t,i,s){super(i),this.code=t,this.customData=s,this.name=OS,Object.setPrototypeOf(this,Wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ul.prototype.create)}}class Ul{constructor(t,i,s){this.service=t,this.serviceName=i,this.errors=s}create(t,...i){const s=i[0]||{},l=`${this.service}/${t}`,c=this.errors[t],d=c?VS(c,s):"Error",g=`${this.serviceName}: ${d} (${l}).`;return new Wi(l,g,s)}}function VS(r,t){return r.replace(MS,(i,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const MS=/\{\$([^}]+)}/g;function PS(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Ls(r,t){if(r===t)return!0;const i=Object.keys(r),s=Object.keys(t);for(const l of i){if(!s.includes(l))return!1;const c=r[l],d=t[l];if(x_(c)&&x_(d)){if(!Ls(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!i.includes(l))return!1;return!0}function x_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(r){const t=[];for(const[i,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function xS(r,t){const i=new US(r,t);return i.subscribe.bind(i)}class US{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,s){let l;if(t===void 0&&i===void 0&&s===void 0)throw new Error("Missing Observer.");kS(t,["next","error","complete"])?l=t:l={next:t,error:i,complete:s},l.next===void 0&&(l.next=Od),l.error===void 0&&(l.error=Od),l.complete===void 0&&(l.complete=Od);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kS(r,t){if(typeof r!="object"||r===null)return!1;for(const i of t)if(i in r&&typeof r[i]=="function")return!0;return!1}function Od(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(r){return r&&r._delegate?r._delegate:r}class zs{constructor(t,i,s){this.name=t,this.instanceFactory=i,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const s=new _S;if(this.instancesDeferred.set(i,s),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(BS(t))try{this.getOrInitializeService({instanceIdentifier:Vs})}catch{}for(const[i,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(t=Vs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Vs){return this.instances.has(t)}getOptions(t=Vs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:i});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);s===g&&d.resolve(l)}return l}onInit(t,i){const s=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&t(c,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,i){const s=this.onInitCallbacks.get(i);if(s)for(const l of s)try{l(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:zS(t),options:i}),this.instances.set(t,s),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Vs){return this.component?this.component.multipleInstances?t:Vs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zS(r){return r===Vs?void 0:r}function BS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new LS(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Dt||(Dt={}));const qS={debug:Dt.DEBUG,verbose:Dt.VERBOSE,info:Dt.INFO,warn:Dt.WARN,error:Dt.ERROR,silent:Dt.SILENT},HS=Dt.INFO,GS={[Dt.DEBUG]:"log",[Dt.VERBOSE]:"log",[Dt.INFO]:"info",[Dt.WARN]:"warn",[Dt.ERROR]:"error"},FS=(r,t,...i)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=GS[t];if(l)console[l](`[${s}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class pm{constructor(t){this.name=t,this._logLevel=HS,this._logHandler=FS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Dt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?qS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Dt.DEBUG,...t),this._logHandler(this,Dt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Dt.VERBOSE,...t),this._logHandler(this,Dt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Dt.INFO,...t),this._logHandler(this,Dt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Dt.WARN,...t),this._logHandler(this,Dt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Dt.ERROR,...t),this._logHandler(this,Dt.ERROR,...t)}}const QS=(r,t)=>t.some(i=>r instanceof i);let U_,k_;function KS(){return U_||(U_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YS(){return k_||(k_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gE=new WeakMap,Gd=new WeakMap,pE=new WeakMap,Vd=new WeakMap,ym=new WeakMap;function XS(r){const t=new Promise((i,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{i(xr(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return t.then(i=>{i instanceof IDBCursor&&gE.set(i,r)}).catch(()=>{}),ym.set(t,r),t}function $S(r){if(Gd.has(r))return;const t=new Promise((i,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{i(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});Gd.set(r,t)}let Fd={get(r,t,i){if(r instanceof IDBTransaction){if(t==="done")return Gd.get(r);if(t==="objectStoreNames")return r.objectStoreNames||pE.get(r);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return xr(r[t])},set(r,t,i){return r[t]=i,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function ZS(r){Fd=r(Fd)}function JS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const s=r.call(Md(this),t,...i);return pE.set(s,t.sort?t.sort():[t]),xr(s)}:YS().includes(r)?function(...t){return r.apply(Md(this),t),xr(gE.get(this))}:function(...t){return xr(r.apply(Md(this),t))}}function WS(r){return typeof r=="function"?JS(r):(r instanceof IDBTransaction&&$S(r),QS(r,KS())?new Proxy(r,Fd):r)}function xr(r){if(r instanceof IDBRequest)return XS(r);if(Vd.has(r))return Vd.get(r);const t=WS(r);return t!==r&&(Vd.set(r,t),ym.set(t,r)),t}const Md=r=>ym.get(r);function t1(r,t,{blocked:i,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,t),g=xr(d);return s&&d.addEventListener("upgradeneeded",p=>{s(xr(d.result),p.oldVersion,p.newVersion,xr(d.transaction),p)}),i&&d.addEventListener("blocked",p=>i(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),l&&p.addEventListener("versionchange",_=>l(_.oldVersion,_.newVersion,_))}).catch(()=>{}),g}const e1=["get","getKey","getAll","getAllKeys","count"],n1=["put","add","delete","clear"],Pd=new Map;function L_(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Pd.get(t))return Pd.get(t);const i=t.replace(/FromIndex$/,""),s=t!==i,l=n1.includes(i);if(!(i in(s?IDBIndex:IDBObjectStore).prototype)||!(l||e1.includes(i)))return;const c=async function(d,...g){const p=this.transaction(d,l?"readwrite":"readonly");let _=p.store;return s&&(_=_.index(g.shift())),(await Promise.all([_[i](...g),l&&p.done]))[0]};return Pd.set(t,c),c}ZS(r=>({...r,get:(t,i,s)=>L_(t,i)||r.get(t,i,s),has:(t,i)=>!!L_(t,i)||r.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(r1(i)){const s=i.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(i=>i).join(" ")}}function r1(r){return r.getComponent()?.type==="VERSION"}const Qd="@firebase/app",z_="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=new pm("@firebase/app"),s1="@firebase/app-compat",a1="@firebase/analytics-compat",o1="@firebase/analytics",l1="@firebase/app-check-compat",u1="@firebase/app-check",c1="@firebase/auth",h1="@firebase/auth-compat",f1="@firebase/database",d1="@firebase/data-connect",m1="@firebase/database-compat",g1="@firebase/functions",p1="@firebase/functions-compat",y1="@firebase/installations",_1="@firebase/installations-compat",v1="@firebase/messaging",E1="@firebase/messaging-compat",T1="@firebase/performance",A1="@firebase/performance-compat",S1="@firebase/remote-config",b1="@firebase/remote-config-compat",R1="@firebase/storage",w1="@firebase/storage-compat",I1="@firebase/firestore",C1="@firebase/ai",D1="@firebase/firestore-compat",N1="firebase",O1="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd="[DEFAULT]",V1={[Qd]:"fire-core",[s1]:"fire-core-compat",[o1]:"fire-analytics",[a1]:"fire-analytics-compat",[u1]:"fire-app-check",[l1]:"fire-app-check-compat",[c1]:"fire-auth",[h1]:"fire-auth-compat",[f1]:"fire-rtdb",[d1]:"fire-data-connect",[m1]:"fire-rtdb-compat",[g1]:"fire-fn",[p1]:"fire-fn-compat",[y1]:"fire-iid",[_1]:"fire-iid-compat",[v1]:"fire-fcm",[E1]:"fire-fcm-compat",[T1]:"fire-perf",[A1]:"fire-perf-compat",[S1]:"fire-rc",[b1]:"fire-rc-compat",[R1]:"fire-gcs",[w1]:"fire-gcs-compat",[I1]:"fire-fst",[D1]:"fire-fst-compat",[C1]:"fire-vertex","fire-js":"fire-js",[N1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=new Map,M1=new Map,Yd=new Map;function B_(r,t){try{r.container.addComponent(t)}catch(i){Yi.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,i)}}function Fa(r){const t=r.name;if(Yd.has(t))return Yi.debug(`There were multiple attempts to register component ${t}.`),!1;Yd.set(t,r);for(const i of xc.values())B_(i,r);for(const i of M1.values())B_(i,r);return!0}function _m(r,t){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(t)}function qn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ur=new Ul("app","Firebase",P1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(t,i,s){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ur.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=O1;function yE(r,t={}){let i=r;typeof t!="object"&&(t={name:t});const s={name:Kd,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw Ur.create("bad-app-name",{appName:String(l)});if(i||(i=hE()),!i)throw Ur.create("no-options");const c=xc.get(l);if(c){if(Ls(i,c.options)&&Ls(s,c.config))return c;throw Ur.create("duplicate-app",{appName:l})}const d=new jS(l);for(const p of Yd.values())d.addComponent(p);const g=new x1(i,s,d);return xc.set(l,g),g}function _E(r=Kd){const t=xc.get(r);if(!t&&r===Kd&&hE())return yE();if(!t)throw Ur.create("no-app",{appName:r});return t}function kr(r,t,i){let s=V1[r]??r;i&&(s+=`-${i}`);const l=s.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${t}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Yi.warn(d.join(" "));return}Fa(new zs(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1="firebase-heartbeat-database",k1=1,Il="firebase-heartbeat-store";let xd=null;function vE(){return xd||(xd=t1(U1,k1,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Il)}catch(i){console.warn(i)}}}}).catch(r=>{throw Ur.create("idb-open",{originalErrorMessage:r.message})})),xd}async function L1(r){try{const i=(await vE()).transaction(Il),s=await i.objectStore(Il).get(EE(r));return await i.done,s}catch(t){if(t instanceof Wi)Yi.warn(t.message);else{const i=Ur.create("idb-get",{originalErrorMessage:t?.message});Yi.warn(i.message)}}}async function j_(r,t){try{const s=(await vE()).transaction(Il,"readwrite");await s.objectStore(Il).put(t,EE(r)),await s.done}catch(i){if(i instanceof Wi)Yi.warn(i.message);else{const s=Ur.create("idb-set",{originalErrorMessage:i?.message});Yi.warn(s.message)}}}function EE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=1024,B1=30;class j1{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new H1(i),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=q_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>B1){const l=G1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Yi.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=q_(),{heartbeatsToSend:i,unsentEntries:s}=q1(this._heartbeatsCache.heartbeats),l=Pc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Yi.warn(t),""}}}function q_(){return new Date().toISOString().substring(0,10)}function q1(r,t=z1){const i=[];let s=r.slice();for(const l of r){const c=i.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),H_(i)>t){c.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),H_(i)>t){i.pop();break}s=s.slice(1)}return{heartbeatsToSend:i,unsentEntries:s}}class H1{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DS()?NS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await L1(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return j_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return j_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function H_(r){return Pc(JSON.stringify({version:2,heartbeats:r})).length}function G1(r){if(r.length===0)return-1;let t=0,i=r[0].date;for(let s=1;s<r.length;s++)r[s].date<i&&(i=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(r){Fa(new zs("platform-logger",t=>new i1(t),"PRIVATE")),Fa(new zs("heartbeat",t=>new j1(t),"PRIVATE")),kr(Qd,z_,r),kr(Qd,z_,"esm2020"),kr("fire-js","")}F1("");var G_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lr,TE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(P,S){function I(){}I.prototype=S.prototype,P.D=S.prototype,P.prototype=new I,P.prototype.constructor=P,P.C=function(M,w,V){for(var R=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)R[ie-2]=arguments[ie];return S.prototype[w].apply(M,R)}}function i(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,i),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(P,S,I){I||(I=0);var M=Array(16);if(typeof S=="string")for(var w=0;16>w;++w)M[w]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(w=0;16>w;++w)M[w]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=P.g[0],I=P.g[1],w=P.g[2];var V=P.g[3],R=S+(V^I&(w^V))+M[0]+3614090360&4294967295;S=I+(R<<7&4294967295|R>>>25),R=V+(w^S&(I^w))+M[1]+3905402710&4294967295,V=S+(R<<12&4294967295|R>>>20),R=w+(I^V&(S^I))+M[2]+606105819&4294967295,w=V+(R<<17&4294967295|R>>>15),R=I+(S^w&(V^S))+M[3]+3250441966&4294967295,I=w+(R<<22&4294967295|R>>>10),R=S+(V^I&(w^V))+M[4]+4118548399&4294967295,S=I+(R<<7&4294967295|R>>>25),R=V+(w^S&(I^w))+M[5]+1200080426&4294967295,V=S+(R<<12&4294967295|R>>>20),R=w+(I^V&(S^I))+M[6]+2821735955&4294967295,w=V+(R<<17&4294967295|R>>>15),R=I+(S^w&(V^S))+M[7]+4249261313&4294967295,I=w+(R<<22&4294967295|R>>>10),R=S+(V^I&(w^V))+M[8]+1770035416&4294967295,S=I+(R<<7&4294967295|R>>>25),R=V+(w^S&(I^w))+M[9]+2336552879&4294967295,V=S+(R<<12&4294967295|R>>>20),R=w+(I^V&(S^I))+M[10]+4294925233&4294967295,w=V+(R<<17&4294967295|R>>>15),R=I+(S^w&(V^S))+M[11]+2304563134&4294967295,I=w+(R<<22&4294967295|R>>>10),R=S+(V^I&(w^V))+M[12]+1804603682&4294967295,S=I+(R<<7&4294967295|R>>>25),R=V+(w^S&(I^w))+M[13]+4254626195&4294967295,V=S+(R<<12&4294967295|R>>>20),R=w+(I^V&(S^I))+M[14]+2792965006&4294967295,w=V+(R<<17&4294967295|R>>>15),R=I+(S^w&(V^S))+M[15]+1236535329&4294967295,I=w+(R<<22&4294967295|R>>>10),R=S+(w^V&(I^w))+M[1]+4129170786&4294967295,S=I+(R<<5&4294967295|R>>>27),R=V+(I^w&(S^I))+M[6]+3225465664&4294967295,V=S+(R<<9&4294967295|R>>>23),R=w+(S^I&(V^S))+M[11]+643717713&4294967295,w=V+(R<<14&4294967295|R>>>18),R=I+(V^S&(w^V))+M[0]+3921069994&4294967295,I=w+(R<<20&4294967295|R>>>12),R=S+(w^V&(I^w))+M[5]+3593408605&4294967295,S=I+(R<<5&4294967295|R>>>27),R=V+(I^w&(S^I))+M[10]+38016083&4294967295,V=S+(R<<9&4294967295|R>>>23),R=w+(S^I&(V^S))+M[15]+3634488961&4294967295,w=V+(R<<14&4294967295|R>>>18),R=I+(V^S&(w^V))+M[4]+3889429448&4294967295,I=w+(R<<20&4294967295|R>>>12),R=S+(w^V&(I^w))+M[9]+568446438&4294967295,S=I+(R<<5&4294967295|R>>>27),R=V+(I^w&(S^I))+M[14]+3275163606&4294967295,V=S+(R<<9&4294967295|R>>>23),R=w+(S^I&(V^S))+M[3]+4107603335&4294967295,w=V+(R<<14&4294967295|R>>>18),R=I+(V^S&(w^V))+M[8]+1163531501&4294967295,I=w+(R<<20&4294967295|R>>>12),R=S+(w^V&(I^w))+M[13]+2850285829&4294967295,S=I+(R<<5&4294967295|R>>>27),R=V+(I^w&(S^I))+M[2]+4243563512&4294967295,V=S+(R<<9&4294967295|R>>>23),R=w+(S^I&(V^S))+M[7]+1735328473&4294967295,w=V+(R<<14&4294967295|R>>>18),R=I+(V^S&(w^V))+M[12]+2368359562&4294967295,I=w+(R<<20&4294967295|R>>>12),R=S+(I^w^V)+M[5]+4294588738&4294967295,S=I+(R<<4&4294967295|R>>>28),R=V+(S^I^w)+M[8]+2272392833&4294967295,V=S+(R<<11&4294967295|R>>>21),R=w+(V^S^I)+M[11]+1839030562&4294967295,w=V+(R<<16&4294967295|R>>>16),R=I+(w^V^S)+M[14]+4259657740&4294967295,I=w+(R<<23&4294967295|R>>>9),R=S+(I^w^V)+M[1]+2763975236&4294967295,S=I+(R<<4&4294967295|R>>>28),R=V+(S^I^w)+M[4]+1272893353&4294967295,V=S+(R<<11&4294967295|R>>>21),R=w+(V^S^I)+M[7]+4139469664&4294967295,w=V+(R<<16&4294967295|R>>>16),R=I+(w^V^S)+M[10]+3200236656&4294967295,I=w+(R<<23&4294967295|R>>>9),R=S+(I^w^V)+M[13]+681279174&4294967295,S=I+(R<<4&4294967295|R>>>28),R=V+(S^I^w)+M[0]+3936430074&4294967295,V=S+(R<<11&4294967295|R>>>21),R=w+(V^S^I)+M[3]+3572445317&4294967295,w=V+(R<<16&4294967295|R>>>16),R=I+(w^V^S)+M[6]+76029189&4294967295,I=w+(R<<23&4294967295|R>>>9),R=S+(I^w^V)+M[9]+3654602809&4294967295,S=I+(R<<4&4294967295|R>>>28),R=V+(S^I^w)+M[12]+3873151461&4294967295,V=S+(R<<11&4294967295|R>>>21),R=w+(V^S^I)+M[15]+530742520&4294967295,w=V+(R<<16&4294967295|R>>>16),R=I+(w^V^S)+M[2]+3299628645&4294967295,I=w+(R<<23&4294967295|R>>>9),R=S+(w^(I|~V))+M[0]+4096336452&4294967295,S=I+(R<<6&4294967295|R>>>26),R=V+(I^(S|~w))+M[7]+1126891415&4294967295,V=S+(R<<10&4294967295|R>>>22),R=w+(S^(V|~I))+M[14]+2878612391&4294967295,w=V+(R<<15&4294967295|R>>>17),R=I+(V^(w|~S))+M[5]+4237533241&4294967295,I=w+(R<<21&4294967295|R>>>11),R=S+(w^(I|~V))+M[12]+1700485571&4294967295,S=I+(R<<6&4294967295|R>>>26),R=V+(I^(S|~w))+M[3]+2399980690&4294967295,V=S+(R<<10&4294967295|R>>>22),R=w+(S^(V|~I))+M[10]+4293915773&4294967295,w=V+(R<<15&4294967295|R>>>17),R=I+(V^(w|~S))+M[1]+2240044497&4294967295,I=w+(R<<21&4294967295|R>>>11),R=S+(w^(I|~V))+M[8]+1873313359&4294967295,S=I+(R<<6&4294967295|R>>>26),R=V+(I^(S|~w))+M[15]+4264355552&4294967295,V=S+(R<<10&4294967295|R>>>22),R=w+(S^(V|~I))+M[6]+2734768916&4294967295,w=V+(R<<15&4294967295|R>>>17),R=I+(V^(w|~S))+M[13]+1309151649&4294967295,I=w+(R<<21&4294967295|R>>>11),R=S+(w^(I|~V))+M[4]+4149444226&4294967295,S=I+(R<<6&4294967295|R>>>26),R=V+(I^(S|~w))+M[11]+3174756917&4294967295,V=S+(R<<10&4294967295|R>>>22),R=w+(S^(V|~I))+M[2]+718787259&4294967295,w=V+(R<<15&4294967295|R>>>17),R=I+(V^(w|~S))+M[9]+3951481745&4294967295,P.g[0]=P.g[0]+S&4294967295,P.g[1]=P.g[1]+(w+(R<<21&4294967295|R>>>11))&4294967295,P.g[2]=P.g[2]+w&4294967295,P.g[3]=P.g[3]+V&4294967295}s.prototype.u=function(P,S){S===void 0&&(S=P.length);for(var I=S-this.blockSize,M=this.B,w=this.h,V=0;V<S;){if(w==0)for(;V<=I;)l(this,P,V),V+=this.blockSize;if(typeof P=="string"){for(;V<S;)if(M[w++]=P.charCodeAt(V++),w==this.blockSize){l(this,M),w=0;break}}else for(;V<S;)if(M[w++]=P[V++],w==this.blockSize){l(this,M),w=0;break}}this.h=w,this.o+=S},s.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var S=1;S<P.length-8;++S)P[S]=0;var I=8*this.o;for(S=P.length-8;S<P.length;++S)P[S]=I&255,I/=256;for(this.u(P),P=Array(16),S=I=0;4>S;++S)for(var M=0;32>M;M+=8)P[I++]=this.g[S]>>>M&255;return P};function c(P,S){var I=g;return Object.prototype.hasOwnProperty.call(I,P)?I[P]:I[P]=S(P)}function d(P,S){this.h=S;for(var I=[],M=!0,w=P.length-1;0<=w;w--){var V=P[w]|0;M&&V==S||(I[w]=V,M=!1)}this.g=I}var g={};function p(P){return-128<=P&&128>P?c(P,function(S){return new d([S|0],0>S?-1:0)}):new d([P|0],0>P?-1:0)}function _(P){if(isNaN(P)||!isFinite(P))return C;if(0>P)return Z(_(-P));for(var S=[],I=1,M=0;P>=I;M++)S[M]=P/I|0,I*=4294967296;return new d(S,0)}function A(P,S){if(P.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(P.charAt(0)=="-")return Z(A(P.substring(1),S));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=_(Math.pow(S,8)),M=C,w=0;w<P.length;w+=8){var V=Math.min(8,P.length-w),R=parseInt(P.substring(w,w+V),S);8>V?(V=_(Math.pow(S,V)),M=M.j(V).add(_(R))):(M=M.j(I),M=M.add(_(R)))}return M}var C=p(0),D=p(1),q=p(16777216);r=d.prototype,r.m=function(){if(it(this))return-Z(this).m();for(var P=0,S=1,I=0;I<this.g.length;I++){var M=this.i(I);P+=(0<=M?M:4294967296+M)*S,S*=4294967296}return P},r.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if($(this))return"0";if(it(this))return"-"+Z(this).toString(P);for(var S=_(Math.pow(P,6)),I=this,M="";;){var w=Ut(I,S).g;I=yt(I,w.j(S));var V=((0<I.g.length?I.g[0]:I.h)>>>0).toString(P);if(I=w,$(I))return V+M;for(;6>V.length;)V="0"+V;M=V+M}},r.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function $(P){if(P.h!=0)return!1;for(var S=0;S<P.g.length;S++)if(P.g[S]!=0)return!1;return!0}function it(P){return P.h==-1}r.l=function(P){return P=yt(this,P),it(P)?-1:$(P)?0:1};function Z(P){for(var S=P.g.length,I=[],M=0;M<S;M++)I[M]=~P.g[M];return new d(I,~P.h).add(D)}r.abs=function(){return it(this)?Z(this):this},r.add=function(P){for(var S=Math.max(this.g.length,P.g.length),I=[],M=0,w=0;w<=S;w++){var V=M+(this.i(w)&65535)+(P.i(w)&65535),R=(V>>>16)+(this.i(w)>>>16)+(P.i(w)>>>16);M=R>>>16,V&=65535,R&=65535,I[w]=R<<16|V}return new d(I,I[I.length-1]&-2147483648?-1:0)};function yt(P,S){return P.add(Z(S))}r.j=function(P){if($(this)||$(P))return C;if(it(this))return it(P)?Z(this).j(Z(P)):Z(Z(this).j(P));if(it(P))return Z(this.j(Z(P)));if(0>this.l(q)&&0>P.l(q))return _(this.m()*P.m());for(var S=this.g.length+P.g.length,I=[],M=0;M<2*S;M++)I[M]=0;for(M=0;M<this.g.length;M++)for(var w=0;w<P.g.length;w++){var V=this.i(M)>>>16,R=this.i(M)&65535,ie=P.i(w)>>>16,Qt=P.i(w)&65535;I[2*M+2*w]+=R*Qt,mt(I,2*M+2*w),I[2*M+2*w+1]+=V*Qt,mt(I,2*M+2*w+1),I[2*M+2*w+1]+=R*ie,mt(I,2*M+2*w+1),I[2*M+2*w+2]+=V*ie,mt(I,2*M+2*w+2)}for(M=0;M<S;M++)I[M]=I[2*M+1]<<16|I[2*M];for(M=S;M<2*S;M++)I[M]=0;return new d(I,0)};function mt(P,S){for(;(P[S]&65535)!=P[S];)P[S+1]+=P[S]>>>16,P[S]&=65535,S++}function ut(P,S){this.g=P,this.h=S}function Ut(P,S){if($(S))throw Error("division by zero");if($(P))return new ut(C,C);if(it(P))return S=Ut(Z(P),S),new ut(Z(S.g),Z(S.h));if(it(S))return S=Ut(P,Z(S)),new ut(Z(S.g),S.h);if(30<P.g.length){if(it(P)||it(S))throw Error("slowDivide_ only works with positive integers.");for(var I=D,M=S;0>=M.l(P);)I=Et(I),M=Et(M);var w=kt(I,1),V=kt(M,1);for(M=kt(M,2),I=kt(I,2);!$(M);){var R=V.add(M);0>=R.l(P)&&(w=w.add(I),V=R),M=kt(M,1),I=kt(I,1)}return S=yt(P,w.j(S)),new ut(w,S)}for(w=C;0<=P.l(S);){for(I=Math.max(1,Math.floor(P.m()/S.m())),M=Math.ceil(Math.log(I)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),V=_(I),R=V.j(S);it(R)||0<R.l(P);)I-=M,V=_(I),R=V.j(S);$(V)&&(V=D),w=w.add(V),P=yt(P,R)}return new ut(w,P)}r.A=function(P){return Ut(this,P).h},r.and=function(P){for(var S=Math.max(this.g.length,P.g.length),I=[],M=0;M<S;M++)I[M]=this.i(M)&P.i(M);return new d(I,this.h&P.h)},r.or=function(P){for(var S=Math.max(this.g.length,P.g.length),I=[],M=0;M<S;M++)I[M]=this.i(M)|P.i(M);return new d(I,this.h|P.h)},r.xor=function(P){for(var S=Math.max(this.g.length,P.g.length),I=[],M=0;M<S;M++)I[M]=this.i(M)^P.i(M);return new d(I,this.h^P.h)};function Et(P){for(var S=P.g.length+1,I=[],M=0;M<S;M++)I[M]=P.i(M)<<1|P.i(M-1)>>>31;return new d(I,P.h)}function kt(P,S){var I=S>>5;S%=32;for(var M=P.g.length-I,w=[],V=0;V<M;V++)w[V]=0<S?P.i(V+I)>>>S|P.i(V+I+1)<<32-S:P.i(V+I);return new d(w,P.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,TE=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=A,Lr=d}).apply(typeof G_<"u"?G_:typeof self<"u"?self:typeof window<"u"?window:{});var yc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AE,yl,SE,bc,Xd,bE,RE,wE;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,y){return u==Array.prototype||u==Object.prototype||(u[m]=y.value),u};function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof yc=="object"&&yc];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=i(this);function l(u,m){if(m)t:{var y=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var U=u[T];if(!(U in y))break t;y=y[U]}u=u[u.length-1],T=y[u],m=m(T),m!=T&&m!=null&&t(y,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var y=0,T=!1,U={next:function(){if(!T&&y<u.length){var j=y++;return{value:m(j,u[j]),done:!1}}return T=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function _(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function A(u,m,y){return u.call.apply(u.bind,arguments)}function C(u,m,y){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,T),u.apply(m,U)}}return function(){return u.apply(m,arguments)}}function D(u,m,y){return D=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?A:C,D.apply(null,arguments)}function q(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function $(u,m){function y(){}y.prototype=m.prototype,u.aa=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(T,U,j){for(var W=Array(arguments.length-2),Vt=2;Vt<arguments.length;Vt++)W[Vt-2]=arguments[Vt];return m.prototype[U].apply(T,W)}}function it(u){const m=u.length;if(0<m){const y=Array(m);for(let T=0;T<m;T++)y[T]=u[T];return y}return[]}function Z(u,m){for(let y=1;y<arguments.length;y++){const T=arguments[y];if(p(T)){const U=u.length||0,j=T.length||0;u.length=U+j;for(let W=0;W<j;W++)u[U+W]=T[W]}else u.push(T)}}class yt{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function mt(u){return/^[\s\xa0]*$/.test(u)}function ut(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function Ut(u){return Ut[" "](u),u}Ut[" "]=function(){};var Et=ut().indexOf("Gecko")!=-1&&!(ut().toLowerCase().indexOf("webkit")!=-1&&ut().indexOf("Edge")==-1)&&!(ut().indexOf("Trident")!=-1||ut().indexOf("MSIE")!=-1)&&ut().indexOf("Edge")==-1;function kt(u,m,y){for(const T in u)m.call(y,u[T],T,u)}function P(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function S(u){const m={};for(const y in u)m[y]=u[y];return m}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(u,m){let y,T;for(let U=1;U<arguments.length;U++){T=arguments[U];for(y in T)u[y]=T[y];for(let j=0;j<I.length;j++)y=I[j],Object.prototype.hasOwnProperty.call(T,y)&&(u[y]=T[y])}}function w(u){var m=1;u=u.split(":");const y=[];for(;0<m&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function V(u){g.setTimeout(()=>{throw u},0)}function R(){var u=zt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ie{constructor(){this.h=this.g=null}add(m,y){const T=Qt.get();T.set(m,y),this.h?this.h.next=T:this.g=T,this.h=T}}var Qt=new yt(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let et,lt=!1,zt=new ie,N=()=>{const u=g.Promise.resolve(void 0);et=()=>{u.then(X)}};var X=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(y){V(y)}var m=Qt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}lt=!1};function nt(){this.s=this.s,this.C=this.C}nt.prototype.s=!1,nt.prototype.ma=function(){this.s||(this.s=!0,this.N())},nt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var ct=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};g.addEventListener("test",y,m),g.removeEventListener("test",y,m)}catch{}return u}();function Rt(u,m){if(J.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Et){t:{try{Ut(m.nodeName);var U=!0;break t}catch{}U=!1}U||(m=null)}}else y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:vt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Rt.aa.h.call(this)}}$(Rt,J);var vt={2:"touch",3:"pen",4:"mouse"};Rt.prototype.h=function(){Rt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ne="closure_listenable_"+(1e6*Math.random()|0),Wt=0;function Fn(u,m,y,T,U){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!T,this.ha=U,this.key=++Wt,this.da=this.fa=!1}function tr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function yi(u){this.src=u,this.g={},this.h=0}yi.prototype.add=function(u,m,y,T,U){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var W=$r(u,m,T,U);return-1<W?(m=u[W],y||(m.fa=!1)):(m=new Fn(m,this.src,j,!!T,U),m.fa=y,u.push(m)),m};function Xr(u,m){var y=m.type;if(y in u.g){var T=u.g[y],U=Array.prototype.indexOf.call(T,m,void 0),j;(j=0<=U)&&Array.prototype.splice.call(T,U,1),j&&(tr(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function $r(u,m,y,T){for(var U=0;U<u.length;++U){var j=u[U];if(!j.da&&j.listener==m&&j.capture==!!y&&j.ha==T)return U}return-1}var Zr="closure_lm_"+(1e6*Math.random()|0),ao={};function Kl(u,m,y,T,U){if(Array.isArray(m)){for(var j=0;j<m.length;j++)Kl(u,m[j],y,T,U);return null}return y=Yl(y),u&&u[Ne]?u.K(m,y,_(T)?!!T.capture:!1,U):Tn(u,m,y,!1,T,U)}function Tn(u,m,y,T,U,j){if(!m)throw Error("Invalid event type");var W=_(U)?!!U.capture:!!U,Vt=Qs(u);if(Vt||(u[Zr]=Vt=new yi(u)),y=Vt.add(m,y,T,W,j),y.proxy)return y;if(T=bh(),y.proxy=T,T.src=u,T.listener=y,u.addEventListener)ct||(U=W),U===void 0&&(U=!1),u.addEventListener(m.toString(),T,U);else if(u.attachEvent)u.attachEvent(Jr(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function bh(){function u(y){return m.call(u.src,u.listener,y)}const m=Rh;return u}function oo(u,m,y,T,U){if(Array.isArray(m))for(var j=0;j<m.length;j++)oo(u,m[j],y,T,U);else T=_(T)?!!T.capture:!!T,y=Yl(y),u&&u[Ne]?(u=u.i,m=String(m).toString(),m in u.g&&(j=u.g[m],y=$r(j,y,T,U),-1<y&&(tr(j[y]),Array.prototype.splice.call(j,y,1),j.length==0&&(delete u.g[m],u.h--)))):u&&(u=Qs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=$r(m,y,T,U)),(y=-1<u?m[u]:null)&&Fs(y))}function Fs(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ne])Xr(m.i,u);else{var y=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(y,T,u.capture):m.detachEvent?m.detachEvent(Jr(y),T):m.addListener&&m.removeListener&&m.removeListener(T),(y=Qs(m))?(Xr(y,u),y.h==0&&(y.src=null,m[Zr]=null)):tr(u)}}}function Jr(u){return u in ao?ao[u]:ao[u]="on"+u}function Rh(u,m){if(u.da)u=!0;else{m=new Rt(m,this);var y=u.listener,T=u.ha||u.src;u.fa&&Fs(u),u=y.call(T,m)}return u}function Qs(u){return u=u[Zr],u instanceof yi?u:null}var lo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yl(u){return typeof u=="function"?u:(u[lo]||(u[lo]=function(m){return u.handleEvent(m)}),u[lo])}function le(){nt.call(this),this.i=new yi(this),this.M=this,this.F=null}$(le,nt),le.prototype[Ne]=!0,le.prototype.removeEventListener=function(u,m,y,T){oo(this,u,m,y,T)};function Ht(u,m){var y,T=u.F;if(T)for(y=[];T;T=T.F)y.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new J(m,u);else if(m instanceof J)m.target=m.target||u;else{var U=m;m=new J(T,u),M(m,U)}if(U=!0,y)for(var j=y.length-1;0<=j;j--){var W=m.g=y[j];U=hn(W,T,!0,m)&&U}if(W=m.g=u,U=hn(W,T,!0,m)&&U,U=hn(W,T,!1,m)&&U,y)for(j=0;j<y.length;j++)W=m.g=y[j],U=hn(W,T,!1,m)&&U}le.prototype.N=function(){if(le.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var y=u.g[m],T=0;T<y.length;T++)tr(y[T]);delete u.g[m],u.h--}}this.F=null},le.prototype.K=function(u,m,y,T){return this.i.add(String(u),m,!1,y,T)},le.prototype.L=function(u,m,y,T){return this.i.add(String(u),m,!0,y,T)};function hn(u,m,y,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,j=0;j<m.length;++j){var W=m[j];if(W&&!W.da&&W.capture==y){var Vt=W.listener,be=W.ha||W.src;W.fa&&Xr(u.i,W),U=Vt.call(be,T)!==!1&&U}}return U&&!T.defaultPrevented}function Qe(u,m,y){if(typeof u=="function")y&&(u=D(u,y));else if(u&&typeof u.handleEvent=="function")u=D(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(u,m||0)}function Xl(u){u.g=Qe(()=>{u.g=null,u.i&&(u.i=!1,Xl(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class wh extends nt{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Xl(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wr(u){nt.call(this),this.h=u,this.g={}}$(Wr,nt);var ts=[];function es(u){kt(u.g,function(m,y){this.g.hasOwnProperty(y)&&Fs(m)},u),u.g={}}Wr.prototype.N=function(){Wr.aa.N.call(this),es(this)},Wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Un=g.JSON.stringify,Ks=g.JSON.parse,ns=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function uo(){}uo.prototype.h=null;function co(u){return u.h||(u.h=u.i())}function ho(){}var _i={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vi(){J.call(this,"d")}$(vi,J);function fo(){J.call(this,"c")}$(fo,J);var Qn={},mo=null;function er(){return mo=mo||new le}Qn.La="serverreachability";function Ys(u){J.call(this,Qn.La,u)}$(Ys,J);function nr(u){const m=er();Ht(m,new Ys(m))}Qn.STAT_EVENT="statevent";function $l(u,m){J.call(this,Qn.STAT_EVENT,u),this.stat=m}$($l,J);function re(u){const m=er();Ht(m,new $l(m,u))}Qn.Ma="timingevent";function Se(u,m){J.call(this,Qn.Ma,u),this.size=m}$(Se,J);function pe(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},m)}function An(){this.g=!0}An.prototype.xa=function(){this.g=!1};function go(u,m,y,T,U,j){u.info(function(){if(u.g)if(j)for(var W="",Vt=j.split("&"),be=0;be<Vt.length;be++){var Mt=Vt[be].split("=");if(1<Mt.length){var Ve=Mt[0];Mt=Mt[1];var Re=Ve.split("_");W=2<=Re.length&&Re[1]=="type"?W+(Ve+"="+Mt+"&"):W+(Ve+"=redacted&")}}else W=null;else W=j;return"XMLHTTP REQ ("+T+") [attempt "+U+"]: "+m+`
`+y+`
`+W})}function Ih(u,m,y,T,U,j,W){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+U+"]: "+m+`
`+y+`
`+j+" "+W})}function ir(u,m,y,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+is(u,y)+(T?" "+T:"")})}function Zl(u,m){u.info(function(){return"TIMEOUT: "+m})}An.prototype.info=function(){};function is(u,m){if(!u.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var T=y[u];if(!(2>T.length)){var U=T[1];if(Array.isArray(U)&&!(1>U.length)){var j=U[0];if(j!="noop"&&j!="stop"&&j!="close")for(var W=1;W<U.length;W++)U[W]=""}}}}return Un(y)}catch{return m}}var rr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ei={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kn;function Yn(){}$(Yn,uo),Yn.prototype.g=function(){return new XMLHttpRequest},Yn.prototype.i=function(){return{}},Kn=new Yn;function We(u,m,y,T){this.j=u,this.i=m,this.l=y,this.R=T||1,this.U=new Wr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new he}function he(){this.i=null,this.g="",this.h=!1}var po={},Xs={};function kn(u,m,y){u.L=1,u.v=ls(fn(m)),u.m=y,u.P=!0,Ti(u,null)}function Ti(u,m){u.F=Date.now(),rs(u),u.A=fn(u.v);var y=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Ao(y.i,"t",T),u.C=0,y=u.j.J,u.h=new he,u.g=du(u.j,y?m:null,!u.m),0<u.O&&(u.M=new wh(D(u.Y,u,u.g),u.O)),m=u.U,y=u.g,T=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(ts[0]=U.toString()),U=ts);for(var j=0;j<U.length;j++){var W=Kl(y,U[j],T||m.handleEvent,!1,m.h||m);if(!W)break;m.g[W.key]=W}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),nr(),go(u.i,u.u,u.A,u.l,u.R,u.m)}We.prototype.ca=function(u){u=u.target;const m=this.M;m&&wn(u)==3?m.j():this.Y(u)},We.prototype.Y=function(u){try{if(u==this.g)t:{const Re=wn(this.g);var m=this.g.Ba();const Di=this.g.Z();if(!(3>Re)&&(Re!=3||this.g&&(this.h.h||this.g.oa()||su(this.g)))){this.J||Re!=4||m==7||(m==8||0>=Di?nr(3):nr(2)),sr(this);var y=this.g.Z();this.X=y;e:if(Jl(this)){var T=su(this.g);u="";var U=T.length,j=wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ke(this),Xn(this);var W="";break e}this.h.i=new g.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(j&&m==U-1)});T.length=0,this.h.g+=u,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=y==200,Ih(this.i,this.u,this.A,this.l,this.R,Re,y),this.o){if(this.T&&!this.K){e:{if(this.g){var Vt,be=this.g;if((Vt=be.g?be.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mt(Vt)){var Mt=Vt;break e}}Mt=null}if(y=Mt)ir(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ss(this,y);else{this.o=!1,this.s=3,re(12),ke(this),Xn(this);break t}}if(this.P){y=!0;let Le;for(;!this.J&&this.C<W.length;)if(Le=Wl(this,W),Le==Xs){Re==4&&(this.s=4,re(14),y=!1),ir(this.i,this.l,null,"[Incomplete Response]");break}else if(Le==po){this.s=4,re(15),ir(this.i,this.l,W,"[Invalid Chunk]"),y=!1;break}else ir(this.i,this.l,Le,null),ss(this,Le);if(Jl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||W.length!=0||this.h.h||(this.s=1,re(16),y=!1),this.o=this.o&&y,!y)ir(this.i,this.l,W,"[Invalid Chunked Response]"),ke(this),Xn(this);else if(0<W.length&&!this.W){this.W=!0;var Ve=this.j;Ve.g==this&&Ve.ba&&!Ve.M&&(Ve.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),ps(Ve),Ve.M=!0,re(11))}}else ir(this.i,this.l,W,null),ss(this,W);Re==4&&ke(this),this.o&&!this.J&&(Re==4?cu(this.j,this):(this.o=!1,rs(this)))}else Vh(this.g),y==400&&0<W.indexOf("Unknown SID")?(this.s=3,re(12)):(this.s=0,re(13)),ke(this),Xn(this)}}}catch{}finally{}};function Jl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Wl(u,m){var y=u.C,T=m.indexOf(`
`,y);return T==-1?Xs:(y=Number(m.substring(y,T)),isNaN(y)?po:(T+=1,T+y>m.length?Xs:(m=m.slice(T,T+y),u.C=T+y,m)))}We.prototype.cancel=function(){this.J=!0,ke(this)};function rs(u){u.S=Date.now()+u.I,tu(u,u.I)}function tu(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=pe(D(u.ba,u),m)}function sr(u){u.B&&(g.clearTimeout(u.B),u.B=null)}We.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Zl(this.i,this.A),this.L!=2&&(nr(),re(17)),ke(this),this.s=2,Xn(this)):tu(this,this.S-u)};function Xn(u){u.j.G==0||u.J||cu(u.j,u)}function ke(u){sr(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,es(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function ss(u,m){try{var y=u.j;if(y.G!=0&&(y.g==u||yo(y.h,u))){if(!u.K&&yo(y.h,u)&&y.G==3){try{var T=y.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var U=T;if(U[0]==0){t:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)oa(y),sa(y);else break t;Io(y),re(18)}}else y.za=U[1],0<y.za-y.T&&37500>U[2]&&y.F&&y.v==0&&!y.C&&(y.C=pe(D(y.Za,y),6e3));if(1>=Zs(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Ci(y,11)}else if((u.K||y.g==u)&&oa(y),!mt(m))for(U=y.Da.g.parse(m),m=0;m<U.length;m++){let Mt=U[m];if(y.T=Mt[0],Mt=Mt[1],y.G==2)if(Mt[0]=="c"){y.K=Mt[1],y.ia=Mt[2];const Ve=Mt[3];Ve!=null&&(y.la=Ve,y.j.info("VER="+y.la));const Re=Mt[4];Re!=null&&(y.Aa=Re,y.j.info("SVER="+y.Aa));const Di=Mt[5];Di!=null&&typeof Di=="number"&&0<Di&&(T=1.5*Di,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const Le=u.g;if(Le){const ni=Le.g?Le.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ni){var j=T.h;j.g||ni.indexOf("spdy")==-1&&ni.indexOf("quic")==-1&&ni.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Js(j,j.h),j.h=null))}if(T.D){const Do=Le.g?Le.g.getResponseHeader("X-HTTP-Session-Id"):null;Do&&(T.ya=Do,Kt(T.I,T.D,Do))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var W=u;if(T.qa=fu(T,T.J?T.ia:null,T.W),W.K){tn(T.h,W);var Vt=W,be=T.L;be&&(Vt.I=be),Vt.B&&(sr(Vt),rs(Vt)),T.g=W}else lu(T);0<y.i.length&&aa(y)}else Mt[0]!="stop"&&Mt[0]!="close"||Ci(y,7);else y.G==3&&(Mt[0]=="stop"||Mt[0]=="close"?Mt[0]=="stop"?Ci(y,7):Ro(y):Mt[0]!="noop"&&y.l&&y.l.ta(Mt),y.v=0)}}nr(4)}catch{}}var eu=class{constructor(u,m){this.g=u,this.map=m}};function Ai(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $s(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Zs(u){return u.h?1:u.g?u.g.size:0}function yo(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Js(u,m){u.g?u.g.add(m):u.h=m}function tn(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ai.prototype.cancel=function(){if(this.i=_o(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function _o(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.D);return m}return it(u.i)}function Ch(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],y=u.length,T=0;T<y;T++)m.push(u[T]);return m}m=[],y=0;for(T in u)m[y++]=u[T];return m}function Ws(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var y=0;y<u;y++)m.push(y);return m}m=[],y=0;for(const T in u)m[y++]=T;return m}}}function vo(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var y=Ws(u),T=Ch(u),U=T.length,j=0;j<U;j++)m.call(void 0,T[j],y&&y[j],u)}var as=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dh(u,m){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var T=u[y].indexOf("="),U=null;if(0<=T){var j=u[y].substring(0,T);U=u[y].substring(T+1)}else j=u[y];m(j,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function ye(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ye){this.h=u.h,os(this,u.j),this.o=u.o,this.g=u.g,ar(this,u.s),this.l=u.l;var m=u.i,y=new bi;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),Si(this,y),this.m=u.m}else u&&(m=String(u).match(as))?(this.h=!1,os(this,m[1]||"",!0),this.o=Sn(m[2]||""),this.g=Sn(m[3]||"",!0),ar(this,m[4]),this.l=Sn(m[5]||"",!0),Si(this,m[6]||"",!0),this.m=Sn(m[7]||"")):(this.h=!1,this.i=new bi(null,this.h))}ye.prototype.toString=function(){var u=[],m=this.j;m&&u.push(us(m,Eo,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(us(m,Eo,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(us(y,y.charAt(0)=="/"?Nh:To,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",us(y,ta)),u.join("")};function fn(u){return new ye(u)}function os(u,m,y){u.j=y?Sn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function ar(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Si(u,m,y){m instanceof bi?(u.i=m,iu(u.i,u.h)):(y||(m=us(m,Oh)),u.i=new bi(m,u.h))}function Kt(u,m,y){u.i.set(m,y)}function ls(u){return Kt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Sn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function us(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,nu),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function nu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Eo=/[#\/\?@]/g,To=/[#\?:]/g,Nh=/[#\?]/g,Oh=/[#\?@]/g,ta=/#/g;function bi(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function bn(u){u.g||(u.g=new Map,u.h=0,u.i&&Dh(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}r=bi.prototype,r.add=function(u,m){bn(this),this.i=null,u=$n(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function Ri(u,m){bn(u),m=$n(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function wi(u,m){return bn(u),m=$n(u,m),u.g.has(m)}r.forEach=function(u,m){bn(this),this.g.forEach(function(y,T){y.forEach(function(U){u.call(m,U,T,this)},this)},this)},r.na=function(){bn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let T=0;T<m.length;T++){const U=u[T];for(let j=0;j<U.length;j++)y.push(m[T])}return y},r.V=function(u){bn(this);let m=[];if(typeof u=="string")wi(this,u)&&(m=m.concat(this.g.get($n(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)m=m.concat(u[y])}return m},r.set=function(u,m){return bn(this),this.i=null,u=$n(this,u),wi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Ao(u,m,y){Ri(u,m),0<y.length&&(u.i=null,u.g.set($n(u,m),it(y)),u.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var T=m[y];const j=encodeURIComponent(String(T)),W=this.V(T);for(T=0;T<W.length;T++){var U=j;W[T]!==""&&(U+="="+encodeURIComponent(String(W[T]))),u.push(U)}}return this.i=u.join("&")};function $n(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function iu(u,m){m&&!u.j&&(bn(u),u.i=null,u.g.forEach(function(y,T){var U=T.toLowerCase();T!=U&&(Ri(this,T),Ao(this,U,y))},u)),u.j=m}function cs(u,m){const y=new An;if(g.Image){const T=new Image;T.onload=q(Rn,y,"TestLoadImage: loaded",!0,m,T),T.onerror=q(Rn,y,"TestLoadImage: error",!1,m,T),T.onabort=q(Rn,y,"TestLoadImage: abort",!1,m,T),T.ontimeout=q(Rn,y,"TestLoadImage: timeout",!1,m,T),g.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Ln(u,m){const y=new An,T=new AbortController,U=setTimeout(()=>{T.abort(),Rn(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(j=>{clearTimeout(U),j.ok?Rn(y,"TestPingServer: ok",!0,m):Rn(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),Rn(y,"TestPingServer: error",!1,m)})}function Rn(u,m,y,T,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),T(y)}catch{}}function hs(){this.g=new ns}function Zn(u,m,y){const T=y||"";try{vo(u,function(U,j){let W=U;_(U)&&(W=Un(U)),m.push(T+j+"="+encodeURIComponent(W))})}catch(U){throw m.push(T+"type="+encodeURIComponent("_badmap")),U}}function or(u){this.l=u.Ub||null,this.j=u.eb||!1}$(or,uo),or.prototype.g=function(){return new Ii(this.l,this.j)},or.prototype.i=function(u){return function(){return u}}({});function Ii(u,m){le.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}$(Ii,le),r=Ii.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Wn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Wn(this)),this.g&&(this.readyState=3,Wn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;So(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function So(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Jn(this):Wn(this),this.readyState==3&&So(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Jn(this))},r.Qa=function(u){this.g&&(this.response=u,Jn(this))},r.ga=function(){this.g&&Jn(this)};function Jn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Wn(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function Wn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ii.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function bo(u){let m="";return kt(u,function(y,T){m+=T,m+=":",m+=y,m+=`\r
`}),m}function Oe(u,m,y){t:{for(T in y){var T=!1;break t}T=!0}T||(y=bo(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):Kt(u,m,y))}function jt(u){le.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}$(jt,le);var ea=/^https?$/i,fs=["POST","PUT"];r=jt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kn.g(),this.v=this.o?co(this.o):co(Kn),this.g.onreadystatechange=D(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(j){ru(this,j);return}if(u=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var U in T)y.set(U,T[U]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const j of T.keys())y.set(j,T.get(j));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(j=>j.toLowerCase()=="content-type"),U=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(fs,m,void 0))||T||U||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,W]of y)this.g.setRequestHeader(j,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ds(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){ru(this,j)}};function ru(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,na(u),ti(u)}function na(u){u.A||(u.A=!0,Ht(u,"complete"),Ht(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ht(this,"complete"),Ht(this,"abort"),ti(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ti(this,!0)),jt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ia(this):this.bb())},r.bb=function(){ia(this)};function ia(u){if(u.h&&typeof d<"u"&&(!u.v[1]||wn(u)!=4||u.Z()!=2)){if(u.u&&wn(u)==4)Qe(u.Ea,0,u);else if(Ht(u,"readystatechange"),wn(u)==4){u.h=!1;try{const W=u.Z();t:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var y;if(!(y=m)){var T;if(T=W===0){var U=String(u.D).match(as)[1]||null;!U&&g.self&&g.self.location&&(U=g.self.location.protocol.slice(0,-1)),T=!ea.test(U?U.toLowerCase():"")}y=T}if(y)Ht(u,"complete"),Ht(u,"success");else{u.m=6;try{var j=2<wn(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",na(u)}}finally{ti(u)}}}}function ti(u,m){if(u.g){ds(u);const y=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Ht(u,"ready");try{y.onreadystatechange=T}catch{}}}function ds(u){u.I&&(g.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function wn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<wn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Ks(m)}};function su(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Vh(u){const m={};u=(u.g&&2<=wn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(mt(u[T]))continue;var y=w(u[T]);const U=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const j=m[U]||[];m[U]=j,j.push(y)}P(m,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ms(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function ra(u){this.Aa=0,this.i=[],this.j=new An,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ms("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ms("baseRetryDelayMs",5e3,u),this.cb=ms("retryDelaySeedMs",1e4,u),this.Wa=ms("forwardChannelMaxRetries",2,u),this.wa=ms("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ai(u&&u.concurrentRequestLimit),this.Da=new hs,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ra.prototype,r.la=8,r.G=1,r.connect=function(u,m,y,T){re(0),this.W=u,this.H=m||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=fu(this,null,this.W),aa(this)};function Ro(u){if(au(u),u.G==3){var m=u.U++,y=fn(u.I);if(Kt(y,"SID",u.K),Kt(y,"RID",m),Kt(y,"TYPE","terminate"),gs(u,y),m=new We(u,u.j,m),m.L=2,m.v=ls(fn(y)),y=!1,g.navigator&&g.navigator.sendBeacon)try{y=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&g.Image&&(new Image().src=m.v,y=!0),y||(m.g=du(m.j,null),m.g.ea(m.v)),m.F=Date.now(),rs(m)}hu(u)}function sa(u){u.g&&(ps(u),u.g.cancel(),u.g=null)}function au(u){sa(u),u.u&&(g.clearTimeout(u.u),u.u=null),oa(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function aa(u){if(!$s(u.h)&&!u.s){u.s=!0;var m=u.Ga;et||N(),lt||(et(),lt=!0),zt.add(m,u),u.B=0}}function Mh(u,m){return Zs(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=pe(D(u.Ga,u,m),Co(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new We(this,this.j,u);let j=this.o;if(this.S&&(j?(j=S(j),M(j,this.S)):j=this.S),this.m!==null||this.O||(U.H=j,j=null),this.P)t:{for(var m=0,y=0;y<this.i.length;y++){e:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break e}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=y;break t}if(m===4096||y===this.i.length-1){m=y+1;break t}}m=1e3}else m=1e3;m=ou(this,U,m),y=fn(this.I),Kt(y,"RID",u),Kt(y,"CVER",22),this.D&&Kt(y,"X-HTTP-Session-Id",this.D),gs(this,y),j&&(this.O?m="headers="+encodeURIComponent(String(bo(j)))+"&"+m:this.m&&Oe(y,this.m,j)),Js(this.h,U),this.Ua&&Kt(y,"TYPE","init"),this.P?(Kt(y,"$req",m),Kt(y,"SID","null"),U.T=!0,kn(U,y,null)):kn(U,y,m),this.G=2}}else this.G==3&&(u?wo(this,u):this.i.length==0||$s(this.h)||wo(this))};function wo(u,m){var y;m?y=m.l:y=u.U++;const T=fn(u.I);Kt(T,"SID",u.K),Kt(T,"RID",y),Kt(T,"AID",u.T),gs(u,T),u.m&&u.o&&Oe(T,u.m,u.o),y=new We(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),m&&(u.i=m.D.concat(u.i)),m=ou(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Js(u.h,y),kn(y,T,m)}function gs(u,m){u.H&&kt(u.H,function(y,T){Kt(m,T,y)}),u.l&&vo({},function(y,T){Kt(m,T,y)})}function ou(u,m,y){y=Math.min(u.i.length,y);var T=u.l?D(u.l.Na,u.l,u):null;t:{var U=u.i;let j=-1;for(;;){const W=["count="+y];j==-1?0<y?(j=U[0].g,W.push("ofs="+j)):j=0:W.push("ofs="+j);let Vt=!0;for(let be=0;be<y;be++){let Mt=U[be].g;const Ve=U[be].map;if(Mt-=j,0>Mt)j=Math.max(0,U[be].g-100),Vt=!1;else try{Zn(Ve,W,"req"+Mt+"_")}catch{T&&T(Ve)}}if(Vt){T=W.join("&");break t}}}return u=u.i.splice(0,y),m.D=u,T}function lu(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;et||N(),lt||(et(),lt=!0),zt.add(m,u),u.v=0}}function Io(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=pe(D(u.Fa,u),Co(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,uu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=pe(D(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,re(10),sa(this),uu(this))};function ps(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function uu(u){u.g=new We(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=fn(u.qa);Kt(m,"RID","rpc"),Kt(m,"SID",u.K),Kt(m,"AID",u.T),Kt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Kt(m,"TO",u.ja),Kt(m,"TYPE","xmlhttp"),gs(u,m),u.m&&u.o&&Oe(m,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=ls(fn(m)),y.m=null,y.P=!0,Ti(y,u)}r.Za=function(){this.C!=null&&(this.C=null,sa(this),Io(this),re(19))};function oa(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function cu(u,m){var y=null;if(u.g==m){oa(u),ps(u),u.g=null;var T=2}else if(yo(u.h,m))y=m.D,tn(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var U=u.B;T=er(),Ht(T,new Se(T,y)),aa(u)}else lu(u);else if(U=m.s,U==3||U==0&&0<m.X||!(T==1&&Mh(u,m)||T==2&&Io(u)))switch(y&&0<y.length&&(m=u.h,m.i=m.i.concat(y)),U){case 1:Ci(u,5);break;case 4:Ci(u,10);break;case 3:Ci(u,6);break;default:Ci(u,2)}}}function Co(u,m){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*m}function Ci(u,m){if(u.j.info("Error code "+m),m==2){var y=D(u.fb,u),T=u.Xa;const U=!T;T=new ye(T||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||os(T,"https"),ls(T),U?cs(T.toString(),y):Ln(T.toString(),y)}else re(2);u.G=0,u.l&&u.l.sa(m),hu(u),au(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),re(2)):(this.j.info("Failed to ping google.com"),re(1))};function hu(u){if(u.G=0,u.ka=[],u.l){const m=_o(u.h);(m.length!=0||u.i.length!=0)&&(Z(u.ka,m),Z(u.ka,u.i),u.h.i.length=0,it(u.i),u.i.length=0),u.l.ra()}}function fu(u,m,y){var T=y instanceof ye?fn(y):new ye(y);if(T.g!="")m&&(T.g=m+"."+T.g),ar(T,T.s);else{var U=g.location;T=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var j=new ye(null);T&&os(j,T),m&&(j.g=m),U&&ar(j,U),y&&(j.l=y),T=j}return y=u.D,m=u.ya,y&&m&&Kt(T,y,m),Kt(T,"VER",u.la),gs(u,T),T}function du(u,m,y){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new jt(new or({eb:y})):new jt(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function mu(){}r=mu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function la(){}la.prototype.g=function(u,m){return new en(u,m)};function en(u,m){le.call(this),this.g=new ra(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!mt(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!mt(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ei(this)}$(en,le),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){Ro(this.g)},en.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=Un(u),u=y);m.i.push(new eu(m.Ya++,u)),m.G==3&&aa(m)},en.prototype.N=function(){this.g.l=null,delete this.j,Ro(this.g),delete this.g,en.aa.N.call(this)};function gu(u){vi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const y in m){u=y;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}$(gu,vi);function pu(){fo.call(this),this.status=1}$(pu,fo);function ei(u){this.g=u}$(ei,mu),ei.prototype.ua=function(){Ht(this.g,"a")},ei.prototype.ta=function(u){Ht(this.g,new gu(u))},ei.prototype.sa=function(u){Ht(this.g,new pu)},ei.prototype.ra=function(){Ht(this.g,"b")},la.prototype.createWebChannel=la.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,wE=function(){return new la},RE=function(){return er()},bE=Qn,Xd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rr.NO_ERROR=0,rr.TIMEOUT=8,rr.HTTP_ERROR=6,bc=rr,Ei.COMPLETE="complete",SE=Ei,ho.EventType=_i,_i.OPEN="a",_i.CLOSE="b",_i.ERROR="c",_i.MESSAGE="d",le.prototype.listen=le.prototype.K,yl=ho,jt.prototype.listenOnce=jt.prototype.L,jt.prototype.getLastError=jt.prototype.Ka,jt.prototype.getLastErrorCode=jt.prototype.Ba,jt.prototype.getStatus=jt.prototype.Z,jt.prototype.getResponseJson=jt.prototype.Oa,jt.prototype.getResponseText=jt.prototype.oa,jt.prototype.send=jt.prototype.ea,jt.prototype.setWithCredentials=jt.prototype.Ha,AE=jt}).apply(typeof yc<"u"?yc:typeof self<"u"?self:typeof window<"u"?window:{});const F_="@firebase/firestore",Q_="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}$e.UNAUTHENTICATED=new $e(null),$e.GOOGLE_CREDENTIALS=new $e("google-credentials-uid"),$e.FIRST_PARTY=new $e("first-party-uid"),$e.MOCK_USER=new $e("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eo="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new pm("@firebase/firestore");function ka(){return Bs.logLevel}function rt(r,...t){if(Bs.logLevel<=Dt.DEBUG){const i=t.map(vm);Bs.debug(`Firestore (${eo}): ${r}`,...i)}}function Xi(r,...t){if(Bs.logLevel<=Dt.ERROR){const i=t.map(vm);Bs.error(`Firestore (${eo}): ${r}`,...i)}}function Qa(r,...t){if(Bs.logLevel<=Dt.WARN){const i=t.map(vm);Bs.warn(`Firestore (${eo}): ${r}`,...i)}}function vm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(r,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,IE(r,s,i)}function IE(r,t,i){let s=`FIRESTORE (${eo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(i!==void 0)try{s+=" CONTEXT: "+JSON.stringify(i)}catch{s+=" CONTEXT: "+i}throw Xi(s),new Error(s)}function qt(r,t,i,s){let l="Unexpected state";typeof i=="string"?l=i:s=i,r||IE(t,l,s)}function At(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class at extends Wi{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Q1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable(()=>i($e.UNAUTHENTICATED))}shutdown(){}}class K1{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class Y1{constructor(t){this.t=t,this.currentUser=$e.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){qt(this.o===void 0,42304);let s=this.i;const l=p=>this.i!==s?(s=this.i,i(p)):Promise.resolve();let c=new Ki;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ki,t.enqueueRetryable(()=>l(this.currentUser))};const d=()=>{const p=c;t.enqueueRetryable(async()=>{await p.promise,await l(this.currentUser)})},g=p=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(p=>g(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ki)}},0),d()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(s=>this.i!==t?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(qt(typeof s.accessToken=="string",31837,{l:s}),new CE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return qt(t===null||typeof t=="string",2055,{h:t}),new $e(t)}}class X1{constructor(t,i,s){this.P=t,this.T=i,this.I=s,this.type="FirstParty",this.user=$e.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $1{constructor(t,i,s){this.P=t,this.T=i,this.I=s}getToken(){return Promise.resolve(new X1(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable(()=>i($e.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class K_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Z1{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){qt(this.o===void 0,3512);const s=c=>{c.error!=null&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,rt("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable(()=>s(c))};const l=c=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>l(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new K_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(i=>i?(qt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new K_(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let s=0;s<r;s++)i[s]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=J1(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<i&&(s+=t.charAt(l[c]%62))}return s}}function Nt(r,t){return r<t?-1:r>t?1:0}function $d(r,t){const i=Math.min(r.length,t.length);for(let s=0;s<i;s++){const l=r.charAt(s),c=t.charAt(s);if(l!==c)return Ud(l)===Ud(c)?Nt(l,c):Ud(l)?1:-1}return Nt(r.length,t.length)}const W1=55296,tb=57343;function Ud(r){const t=r.charCodeAt(0);return t>=W1&&t<=tb}function Ka(r,t,i){return r.length===t.length&&r.every((s,l)=>i(s,t[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="__name__";class li{constructor(t,i,s){i===void 0?i=0:i>t.length&&gt(637,{offset:i,range:t.length}),s===void 0?s=t.length-i:s>t.length-i&&gt(1746,{length:s,range:t.length-i}),this.segments=t,this.offset=i,this.len=s}get length(){return this.len}isEqual(t){return li.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof li?t.forEach(s=>{i.push(s)}):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,s=this.limit();i<s;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const s=Math.min(t.length,i.length);for(let l=0;l<s;l++){const c=li.compareSegments(t.get(l),i.get(l));if(c!==0)return c}return Nt(t.length,i.length)}static compareSegments(t,i){const s=li.isNumericId(t),l=li.isNumericId(i);return s&&!l?-1:!s&&l?1:s&&l?li.extractNumericId(t).compare(li.extractNumericId(i)):$d(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Lr.fromString(t.substring(4,t.length-2))}}class ee extends li{construct(t,i,s){return new ee(t,i,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const s of t){if(s.indexOf("//")>=0)throw new at(Y.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);i.push(...s.split("/").filter(l=>l.length>0))}return new ee(i)}static emptyPath(){return new ee([])}}const eb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends li{construct(t,i,s){return new He(t,i,s)}static isValidIdentifier(t){return eb.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Y_}static keyField(){return new He([Y_])}static fromServerFormat(t){const i=[];let s="",l=0;const c=()=>{if(s.length===0)throw new at(Y.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(s),s=""};let d=!1;for(;l<t.length;){const g=t[l];if(g==="\\"){if(l+1===t.length)throw new at(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[l+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new at(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=p,l+=2}else g==="`"?(d=!d,l++):g!=="."||d?(s+=g,l++):(c(),l++)}if(c(),d)throw new at(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new He(i)}static emptyPath(){return new He([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(t){this.path=t}static fromPath(t){return new ht(ee.fromString(t))}static fromName(t){return new ht(ee.fromString(t).popFirst(5))}static empty(){return new ht(ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ee.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return ee.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ht(new ee(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(r,t,i){if(!i)throw new at(Y.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function nb(r,t,i,s){if(t===!0&&s===!0)throw new at(Y.INVALID_ARGUMENT,`${r} and ${i} cannot be used together.`)}function X_(r){if(!ht.isDocumentKey(r))throw new at(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function $_(r){if(ht.isDocumentKey(r))throw new at(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function NE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Tm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":gt(12329,{type:typeof r})}function cn(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new at(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Tm(r);throw new at(Y.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(r,t){const i={typeString:r};return t&&(i.value=t),i}function Ll(r,t){if(!NE(r))throw new at(Y.INVALID_ARGUMENT,"JSON must be an object");let i;for(const s in t)if(t[s]){const l=t[s].typeString,c="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){i=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){i=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){i=`Expected '${s}' field to equal '${c.value}'`;break}}if(i)throw new at(Y.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_=-62135596800,J_=1e6;class ne{static now(){return ne.fromMillis(Date.now())}static fromDate(t){return ne.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),s=Math.floor((t-1e3*i)*J_);return new ne(i,s)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new at(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new at(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<Z_)throw new at(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new at(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/J_}_compareTo(t){return this.seconds===t.seconds?Nt(this.nanoseconds,t.nanoseconds):Nt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ne._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Ll(t,ne._jsonSchema))return new ne(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Z_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ne._jsonSchemaVersion="firestore/timestamp/1.0",ne._jsonSchema={type:Ae("string",ne._jsonSchemaVersion),seconds:Ae("number"),nanoseconds:Ae("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{static fromTimestamp(t){return new Tt(t)}static min(){return new Tt(new ne(0,0))}static max(){return new Tt(new ne(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=-1;function ib(r,t){const i=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=Tt.fromTimestamp(s===1e9?new ne(i+1,0):new ne(i,s));return new jr(l,ht.empty(),t)}function rb(r){return new jr(r.readTime,r.key,Cl)}class jr{constructor(t,i,s){this.readTime=t,this.documentKey=i,this.largestBatchId=s}static min(){return new jr(Tt.min(),ht.empty(),Cl)}static max(){return new jr(Tt.max(),ht.empty(),Cl)}}function sb(r,t){let i=r.readTime.compareTo(t.readTime);return i!==0?i:(i=ht.comparator(r.documentKey,t.documentKey),i!==0?i:Nt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ob{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(r){if(r.code!==Y.FAILED_PRECONDITION||r.message!==ab)throw r;rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&gt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new K((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(i,c).next(s,l)}})}toPromise(){return new Promise((t,i)=>{this.next(t,i)})}wrapUserFunction(t){try{const i=t();return i instanceof K?i:K.resolve(i)}catch(i){return K.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction(()=>t(i)):K.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction(()=>t(i)):K.reject(i)}static resolve(t){return new K((i,s)=>{i(t)})}static reject(t){return new K((i,s)=>{s(t)})}static waitFor(t){return new K((i,s)=>{let l=0,c=0,d=!1;t.forEach(g=>{++l,g.next(()=>{++c,d&&c===l&&i()},p=>s(p))}),d=!0,c===l&&i()})}static or(t){let i=K.resolve(!1);for(const s of t)i=i.next(l=>l?K.resolve(l):s());return i}static forEach(t,i){const s=[];return t.forEach((l,c)=>{s.push(i.call(this,l,c))}),this.waitFor(s)}static mapArray(t,i){return new K((s,l)=>{const c=t.length,d=new Array(c);let g=0;for(let p=0;p<c;p++){const _=p;i(t[_]).next(A=>{d[_]=A,++g,g===c&&s(d)},A=>l(A))}})}static doWhile(t,i){return new K((s,l)=>{const c=()=>{t()===!0?i().next(()=>{c()},l):s()};c()})}}function lb(r){const t=r.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function io(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>i.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}eh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am=-1;function nh(r){return r==null}function Uc(r){return r===0&&1/r==-1/0}function ub(r){return typeof r=="number"&&Number.isInteger(r)&&!Uc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="";function cb(r){let t="";for(let i=0;i<r.length;i++)t.length>0&&(t=W_(t)),t=hb(r.get(i),t);return W_(t)}function hb(r,t){let i=t;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":i+="";break;case OE:i+="";break;default:i+=c}}return i}function W_(r){return r+OE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(r){let t=0;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&t++;return t}function Kr(r,t){for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&t(i,r[i])}function VE(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(t,i){this.comparator=t,this.root=i||qe.EMPTY}insert(t,i){return new oe(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,qe.BLACK,null,null))}remove(t){return new oe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,qe.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return i.value;s<0?i=i.left:s>0&&(i=i.right)}return null}indexOf(t){let i=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return i+s.left.size;l<0?s=s.left:(i+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((i,s)=>(t(i,s),!1))}toString(){const t=[];return this.inorderTraversal((i,s)=>(t.push(`${i}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new _c(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new _c(this.root,t,this.comparator,!1)}getReverseIterator(){return new _c(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new _c(this.root,t,this.comparator,!0)}}class _c{constructor(t,i,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=i?s(t.key,i):1,i&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class qe{constructor(t,i,s,l,c){this.key=t,this.value=i,this.color=s??qe.RED,this.left=l??qe.EMPTY,this.right=c??qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,s,l,c){return new qe(t??this.key,i??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,s){let l=this;const c=s(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,i,s),null):c===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(t,i,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return qe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let s,l=this;if(i(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(t,l.key)===0){if(l.right.isEmpty())return qe.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw gt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw gt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw gt(27949);return t+(this.isRed()?0:1)}}qe.EMPTY=null,qe.RED=!0,qe.BLACK=!1;qe.EMPTY=new class{constructor(){this.size=0}get key(){throw gt(57766)}get value(){throw gt(16141)}get color(){throw gt(16727)}get left(){throw gt(29726)}get right(){throw gt(36894)}copy(t,i,s,l,c){return this}insert(t,i,s){return new qe(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(t){this.comparator=t,this.data=new oe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((i,s)=>(t(i),!1))}forEachInRange(t,i){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;i(l.key)}}forEachWhile(t,i){let s;for(s=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new ev(this.data.getIterator())}getIteratorFrom(t){return new ev(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach(s=>{i=i.add(s)}),i}isEqual(t){if(!(t instanceof De)||this.size!==t.size)return!1;const i=this.data.getIterator(),s=t.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(i=>{t.push(i)}),t}toString(){const t=[];return this.forEach(i=>t.push(i)),"SortedSet("+t.toString()+")"}copy(t){const i=new De(this.comparator);return i.data=t,i}}class ev{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t){this.fields=t,t.sort(He.comparator)}static empty(){return new En([])}unionWith(t){let i=new De(He.comparator);for(const s of this.fields)i=i.add(s);for(const s of t)i=i.add(s);return new En(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return Ka(this.fields,t.fields,(i,s)=>i.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(t){this.binaryString=t}static fromBase64String(t){const i=function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new ME("Invalid base64 string: "+c):c}}(t);return new Fe(i)}static fromUint8Array(t){const i=function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c}(t);return new Fe(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const s=new Uint8Array(i.length);for(let l=0;l<i.length;l++)s[l]=i.charCodeAt(l);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Nt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Fe.EMPTY_BYTE_STRING=new Fe("");const fb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qr(r){if(qt(!!r,39018),typeof r=="string"){let t=0;const i=fb.exec(r);if(qt(!!i,46558,{timestamp:r}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:me(r.seconds),nanos:me(r.nanos)}}function me(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Hr(r){return typeof r=="string"?Fe.fromBase64String(r):Fe.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="server_timestamp",xE="__type__",UE="__previous_value__",kE="__local_write_time__";function Sm(r){return(r?.mapValue?.fields||{})[xE]?.stringValue===PE}function ih(r){const t=r.mapValue.fields[UE];return Sm(t)?ih(t):t}function Dl(r){const t=qr(r.mapValue.fields[kE].timestampValue);return new ne(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(t,i,s,l,c,d,g,p,_,A){this.databaseId=t,this.appId=i,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=_,this.isUsingEmulator=A}}const kc="(default)";class Nl{constructor(t,i){this.projectId=t,this.database=i||kc}static empty(){return new Nl("","")}get isDefaultDatabase(){return this.database===kc}isEqual(t){return t instanceof Nl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="__type__",mb="__max__",vc={mapValue:{}},zE="__vector__",Lc="value";function Gr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Sm(r)?4:pb(r)?9007199254740991:gb(r)?10:11:gt(28295,{value:r})}function mi(r,t){if(r===t)return!0;const i=Gr(r);if(i!==Gr(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Dl(r).isEqual(Dl(t));case 3:return function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=qr(l.timestampValue),g=qr(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(r,t);case 5:return r.stringValue===t.stringValue;case 6:return function(l,c){return Hr(l.bytesValue).isEqual(Hr(c.bytesValue))}(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return function(l,c){return me(l.geoPointValue.latitude)===me(c.geoPointValue.latitude)&&me(l.geoPointValue.longitude)===me(c.geoPointValue.longitude)}(r,t);case 2:return function(l,c){if("integerValue"in l&&"integerValue"in c)return me(l.integerValue)===me(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=me(l.doubleValue),g=me(c.doubleValue);return d===g?Uc(d)===Uc(g):isNaN(d)&&isNaN(g)}return!1}(r,t);case 9:return Ka(r.arrayValue.values||[],t.arrayValue.values||[],mi);case 10:case 11:return function(l,c){const d=l.mapValue.fields||{},g=c.mapValue.fields||{};if(tv(d)!==tv(g))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(g[p]===void 0||!mi(d[p],g[p])))return!1;return!0}(r,t);default:return gt(52216,{left:r})}}function Ol(r,t){return(r.values||[]).find(i=>mi(i,t))!==void 0}function Ya(r,t){if(r===t)return 0;const i=Gr(r),s=Gr(t);if(i!==s)return Nt(i,s);switch(i){case 0:case 9007199254740991:return 0;case 1:return Nt(r.booleanValue,t.booleanValue);case 2:return function(c,d){const g=me(c.integerValue||c.doubleValue),p=me(d.integerValue||d.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1}(r,t);case 3:return nv(r.timestampValue,t.timestampValue);case 4:return nv(Dl(r),Dl(t));case 5:return $d(r.stringValue,t.stringValue);case 6:return function(c,d){const g=Hr(c),p=Hr(d);return g.compareTo(p)}(r.bytesValue,t.bytesValue);case 7:return function(c,d){const g=c.split("/"),p=d.split("/");for(let _=0;_<g.length&&_<p.length;_++){const A=Nt(g[_],p[_]);if(A!==0)return A}return Nt(g.length,p.length)}(r.referenceValue,t.referenceValue);case 8:return function(c,d){const g=Nt(me(c.latitude),me(d.latitude));return g!==0?g:Nt(me(c.longitude),me(d.longitude))}(r.geoPointValue,t.geoPointValue);case 9:return iv(r.arrayValue,t.arrayValue);case 10:return function(c,d){const g=c.fields||{},p=d.fields||{},_=g[Lc]?.arrayValue,A=p[Lc]?.arrayValue,C=Nt(_?.values?.length||0,A?.values?.length||0);return C!==0?C:iv(_,A)}(r.mapValue,t.mapValue);case 11:return function(c,d){if(c===vc.mapValue&&d===vc.mapValue)return 0;if(c===vc.mapValue)return 1;if(d===vc.mapValue)return-1;const g=c.fields||{},p=Object.keys(g),_=d.fields||{},A=Object.keys(_);p.sort(),A.sort();for(let C=0;C<p.length&&C<A.length;++C){const D=$d(p[C],A[C]);if(D!==0)return D;const q=Ya(g[p[C]],_[A[C]]);if(q!==0)return q}return Nt(p.length,A.length)}(r.mapValue,t.mapValue);default:throw gt(23264,{he:i})}}function nv(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Nt(r,t);const i=qr(r),s=qr(t),l=Nt(i.seconds,s.seconds);return l!==0?l:Nt(i.nanos,s.nanos)}function iv(r,t){const i=r.values||[],s=t.values||[];for(let l=0;l<i.length&&l<s.length;++l){const c=Ya(i[l],s[l]);if(c)return c}return Nt(i.length,s.length)}function Xa(r){return Zd(r)}function Zd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(i){const s=qr(i);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(i){return Hr(i).toBase64()}(r.bytesValue):"referenceValue"in r?function(i){return ht.fromName(i).toString()}(r.referenceValue):"geoPointValue"in r?function(i){return`geo(${i.latitude},${i.longitude})`}(r.geoPointValue):"arrayValue"in r?function(i){let s="[",l=!0;for(const c of i.values||[])l?l=!1:s+=",",s+=Zd(c);return s+"]"}(r.arrayValue):"mapValue"in r?function(i){const s=Object.keys(i.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${Zd(i.fields[d])}`;return l+"}"}(r.mapValue):gt(61005,{value:r})}function Rc(r){switch(Gr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ih(r);return t?16+Rc(t):16;case 5:return 2*r.stringValue.length;case 6:return Hr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((l,c)=>l+Rc(c),0)}(r.arrayValue);case 10:case 11:return function(s){let l=0;return Kr(s.fields,(c,d)=>{l+=c.length+Rc(d)}),l}(r.mapValue);default:throw gt(13486,{value:r})}}function Jd(r){return!!r&&"integerValue"in r}function bm(r){return!!r&&"arrayValue"in r}function rv(r){return!!r&&"nullValue"in r}function sv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function wc(r){return!!r&&"mapValue"in r}function gb(r){return(r?.mapValue?.fields||{})[LE]?.stringValue===zE}function Al(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return Kr(r.mapValue.fields,(i,s)=>t.mapValue.fields[i]=Al(s)),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(r.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=Al(r.arrayValue.values[i]);return t}return{...r}}function pb(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===mb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(t){this.value=t}static empty(){return new un({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let s=0;s<t.length-1;++s)if(i=(i.mapValue.fields||{})[t.get(s)],!wc(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=Al(i)}setAll(t){let i=He.emptyPath(),s={},l=[];t.forEach((d,g)=>{if(!i.isImmediateParentOf(g)){const p=this.getFieldsMap(i);this.applyChanges(p,s,l),s={},l=[],i=g.popLast()}d?s[g.lastSegment()]=Al(d):l.push(g.lastSegment())});const c=this.getFieldsMap(i);this.applyChanges(c,s,l)}delete(t){const i=this.field(t.popLast());wc(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return mi(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=i.mapValue.fields[t.get(s)];wc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[t.get(s)]=l),i=l}return i.mapValue.fields}applyChanges(t,i,s){Kr(i,(l,c)=>t[l]=c);for(const l of s)delete t[l]}clone(){return new un(Al(this.value))}}function BE(r){const t=[];return Kr(r.fields,(i,s)=>{const l=new He([i]);if(wc(s)){const c=BE(s.mapValue).fields;if(c.length===0)t.push(l);else for(const d of c)t.push(l.child(d))}else t.push(l)}),new En(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t,i,s,l,c,d,g){this.key=t,this.documentType=i,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(t){return new Ze(t,0,Tt.min(),Tt.min(),Tt.min(),un.empty(),0)}static newFoundDocument(t,i,s,l){return new Ze(t,1,i,Tt.min(),s,l,0)}static newNoDocument(t,i){return new Ze(t,2,i,Tt.min(),Tt.min(),un.empty(),0)}static newUnknownDocument(t,i){return new Ze(t,3,i,Tt.min(),Tt.min(),un.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(Tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ze&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ze(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(t,i){this.position=t,this.inclusive=i}}function av(r,t,i){let s=0;for(let l=0;l<r.position.length;l++){const c=t[l],d=r.position[l];if(c.field.isKeyField()?s=ht.comparator(ht.fromName(d.referenceValue),i.key):s=Ya(d,i.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function ov(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let i=0;i<r.position.length;i++)if(!mi(r.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(t,i="asc"){this.field=t,this.dir=i}}function yb(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{}class Ce extends jE{constructor(t,i,s){super(),this.field=t,this.op=i,this.value=s}static create(t,i,s){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,s):new vb(t,i,s):i==="array-contains"?new Ab(t,s):i==="in"?new Sb(t,s):i==="not-in"?new bb(t,s):i==="array-contains-any"?new Rb(t,s):new Ce(t,i,s)}static createKeyFieldInFilter(t,i,s){return i==="in"?new Eb(t,s):new Tb(t,s)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(Ya(i,this.value)):i!==null&&Gr(this.value)===Gr(i)&&this.matchesComparison(Ya(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return gt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gi extends jE{constructor(t,i){super(),this.filters=t,this.op=i,this.Pe=null}static create(t,i){return new gi(t,i)}matches(t){return qE(this)?this.filters.find(i=>!i.matches(t))===void 0:this.filters.find(i=>i.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,i)=>t.concat(i.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function qE(r){return r.op==="and"}function HE(r){return _b(r)&&qE(r)}function _b(r){for(const t of r.filters)if(t instanceof gi)return!1;return!0}function Wd(r){if(r instanceof Ce)return r.field.canonicalString()+r.op.toString()+Xa(r.value);if(HE(r))return r.filters.map(t=>Wd(t)).join(",");{const t=r.filters.map(i=>Wd(i)).join(",");return`${r.op}(${t})`}}function GE(r,t){return r instanceof Ce?function(s,l){return l instanceof Ce&&s.op===l.op&&s.field.isEqual(l.field)&&mi(s.value,l.value)}(r,t):r instanceof gi?function(s,l){return l instanceof gi&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce((c,d,g)=>c&&GE(d,l.filters[g]),!0):!1}(r,t):void gt(19439)}function FE(r){return r instanceof Ce?function(i){return`${i.field.canonicalString()} ${i.op} ${Xa(i.value)}`}(r):r instanceof gi?function(i){return i.op.toString()+" {"+i.getFilters().map(FE).join(" ,")+"}"}(r):"Filter"}class vb extends Ce{constructor(t,i,s){super(t,i,s),this.key=ht.fromName(s.referenceValue)}matches(t){const i=ht.comparator(t.key,this.key);return this.matchesComparison(i)}}class Eb extends Ce{constructor(t,i){super(t,"in",i),this.keys=QE("in",i)}matches(t){return this.keys.some(i=>i.isEqual(t.key))}}class Tb extends Ce{constructor(t,i){super(t,"not-in",i),this.keys=QE("not-in",i)}matches(t){return!this.keys.some(i=>i.isEqual(t.key))}}function QE(r,t){return(t.arrayValue?.values||[]).map(i=>ht.fromName(i.referenceValue))}class Ab extends Ce{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return bm(i)&&Ol(i.arrayValue,this.value)}}class Sb extends Ce{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&Ol(this.value.arrayValue,i)}}class bb extends Ce{constructor(t,i){super(t,"not-in",i)}matches(t){if(Ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!Ol(this.value.arrayValue,i)}}class Rb extends Ce{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!bm(i)||!i.arrayValue.values)&&i.arrayValue.values.some(s=>Ol(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(t,i=null,s=[],l=[],c=null,d=null,g=null){this.path=t,this.collectionGroup=i,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=g,this.Te=null}}function lv(r,t=null,i=[],s=[],l=null,c=null,d=null){return new wb(r,t,i,s,l,c,d)}function Rm(r){const t=At(r);if(t.Te===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map(s=>Wd(s)).join(","),i+="|ob:",i+=t.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),nh(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(s=>Xa(s)).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(s=>Xa(s)).join(",")),t.Te=i}return t.Te}function wm(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!yb(r.orderBy[i],t.orderBy[i]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if(!GE(r.filters[i],t.filters[i]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!ov(r.startAt,t.startAt)&&ov(r.endAt,t.endAt)}function tm(r){return ht.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(t,i=null,s=[],l=[],c=null,d="F",g=null,p=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Ib(r,t,i,s,l,c,d,g){return new rh(r,t,i,s,l,c,d,g)}function sh(r){return new rh(r)}function uv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Cb(r){return r.collectionGroup!==null}function Sl(r){const t=At(r);if(t.Ie===null){t.Ie=[];const i=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),i.add(c.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new De(He.comparator);return d.filters.forEach(p=>{p.getFlattenedFilters().forEach(_=>{_.isInequality()&&(g=g.add(_.field))})}),g})(t).forEach(c=>{i.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new Bc(c,s))}),i.has(He.keyField().canonicalString())||t.Ie.push(new Bc(He.keyField(),s))}return t.Ie}function ui(r){const t=At(r);return t.Ee||(t.Ee=Db(t,Sl(r))),t.Ee}function Db(r,t){if(r.limitType==="F")return lv(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map(l=>{const c=l.dir==="desc"?"asc":"desc";return new Bc(l.field,c)});const i=r.endAt?new zc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new zc(r.startAt.position,r.startAt.inclusive):null;return lv(r.path,r.collectionGroup,t,r.filters,r.limit,i,s)}}function em(r,t,i){return new rh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,i,r.startAt,r.endAt)}function ah(r,t){return wm(ui(r),ui(t))&&r.limitType===t.limitType}function KE(r){return`${Rm(ui(r))}|lt:${r.limitType}`}function La(r){return`Query(target=${function(i){let s=i.path.canonicalString();return i.collectionGroup!==null&&(s+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(s+=`, filters: [${i.filters.map(l=>FE(l)).join(", ")}]`),nh(i.limit)||(s+=", limit: "+i.limit),i.orderBy.length>0&&(s+=`, orderBy: [${i.orderBy.map(l=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(l)).join(", ")}]`),i.startAt&&(s+=", startAt: ",s+=i.startAt.inclusive?"b:":"a:",s+=i.startAt.position.map(l=>Xa(l)).join(",")),i.endAt&&(s+=", endAt: ",s+=i.endAt.inclusive?"a:":"b:",s+=i.endAt.position.map(l=>Xa(l)).join(",")),`Target(${s})`}(ui(r))}; limitType=${r.limitType})`}function oh(r,t){return t.isFoundDocument()&&function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ht.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(r,t)&&function(s,l){for(const c of Sl(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0}(r,t)&&function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0}(r,t)&&function(s,l){return!(s.startAt&&!function(d,g,p){const _=av(d,g,p);return d.inclusive?_<=0:_<0}(s.startAt,Sl(s),l)||s.endAt&&!function(d,g,p){const _=av(d,g,p);return d.inclusive?_>=0:_>0}(s.endAt,Sl(s),l))}(r,t)}function Nb(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function YE(r){return(t,i)=>{let s=!1;for(const l of Sl(r)){const c=Ob(l,t,i);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function Ob(r,t,i){const s=r.field.isKeyField()?ht.comparator(t.key,i.key):function(c,d,g){const p=d.data.field(c),_=g.data.field(c);return p!==null&&_!==null?Ya(p,_):gt(42886)}(r.field,t,i);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return gt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),s=this.inner[i];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,i){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,i]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,i]);l.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[i]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Kr(this.inner,(i,s)=>{for(const[l,c]of s)t(l,c)})}isEmpty(){return VE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb=new oe(ht.comparator);function $i(){return Vb}const XE=new oe(ht.comparator);function _l(...r){let t=XE;for(const i of r)t=t.insert(i.key,i);return t}function $E(r){let t=XE;return r.forEach((i,s)=>t=t.insert(i,s.overlayedDocument)),t}function Ms(){return bl()}function ZE(){return bl()}function bl(){return new Hs(r=>r.toString(),(r,t)=>r.isEqual(t))}const Mb=new oe(ht.comparator),Pb=new De(ht.comparator);function Ot(...r){let t=Pb;for(const i of r)t=t.add(i);return t}const xb=new De(Nt);function Ub(){return xb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uc(t)?"-0":t}}function JE(r){return{integerValue:""+r}}function WE(r,t){return ub(t)?JE(t):Im(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(){this._=void 0}}function kb(r,t,i){return r instanceof jc?function(l,c){const d={fields:{[xE]:{stringValue:PE},[kE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Sm(c)&&(c=ih(c)),c&&(d.fields[UE]=c),{mapValue:d}}(i,t):r instanceof Vl?eT(r,t):r instanceof Ml?nT(r,t):function(l,c){const d=tT(l,c),g=cv(d)+cv(l.Ae);return Jd(d)&&Jd(l.Ae)?JE(g):Im(l.serializer,g)}(r,t)}function Lb(r,t,i){return r instanceof Vl?eT(r,t):r instanceof Ml?nT(r,t):i}function tT(r,t){return r instanceof Pl?function(s){return Jd(s)||function(c){return!!c&&"doubleValue"in c}(s)}(t)?t:{integerValue:0}:null}class jc extends lh{}class Vl extends lh{constructor(t){super(),this.elements=t}}function eT(r,t){const i=iT(t);for(const s of r.elements)i.some(l=>mi(l,s))||i.push(s);return{arrayValue:{values:i}}}class Ml extends lh{constructor(t){super(),this.elements=t}}function nT(r,t){let i=iT(t);for(const s of r.elements)i=i.filter(l=>!mi(l,s));return{arrayValue:{values:i}}}class Pl extends lh{constructor(t,i){super(),this.serializer=t,this.Ae=i}}function cv(r){return me(r.integerValue||r.doubleValue)}function iT(r){return bm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(t,i){this.field=t,this.transform=i}}function Bb(r,t){return r.field.isEqual(t.field)&&function(s,l){return s instanceof Vl&&l instanceof Vl||s instanceof Ml&&l instanceof Ml?Ka(s.elements,l.elements,mi):s instanceof Pl&&l instanceof Pl?mi(s.Ae,l.Ae):s instanceof jc&&l instanceof jc}(r.transform,t.transform)}class jb{constructor(t,i){this.version=t,this.transformResults=i}}class xn{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new xn}static exists(t){return new xn(void 0,t)}static updateTime(t){return new xn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ic(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class uh{}function rT(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new Cm(r.key,xn.none()):new zl(r.key,r.data,xn.none());{const i=r.data,s=un.empty();let l=new De(He.comparator);for(let c of t.fields)if(!l.has(c)){let d=i.field(c);d===null&&c.length>1&&(c=c.popLast(),d=i.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new Yr(r.key,s,new En(l.toArray()),xn.none())}}function qb(r,t,i){r instanceof zl?function(l,c,d){const g=l.value.clone(),p=fv(l.fieldTransforms,c,d.transformResults);g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(r,t,i):r instanceof Yr?function(l,c,d){if(!Ic(l.precondition,c))return void c.convertToUnknownDocument(d.version);const g=fv(l.fieldTransforms,c,d.transformResults),p=c.data;p.setAll(sT(l)),p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()}(r,t,i):function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,t,i)}function Rl(r,t,i,s){return r instanceof zl?function(c,d,g,p){if(!Ic(c.precondition,d))return g;const _=c.value.clone(),A=dv(c.fieldTransforms,p,d);return _.setAll(A),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null}(r,t,i,s):r instanceof Yr?function(c,d,g,p){if(!Ic(c.precondition,d))return g;const _=dv(c.fieldTransforms,p,d),A=d.data;return A.setAll(sT(c)),A.setAll(_),d.convertToFoundDocument(d.version,A).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(C=>C.field))}(r,t,i,s):function(c,d,g){return Ic(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g}(r,t,i)}function Hb(r,t){let i=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),c=tT(s.transform,l||null);c!=null&&(i===null&&(i=un.empty()),i.set(s.field,c))}return i||null}function hv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Ka(s,l,(c,d)=>Bb(c,d))}(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class zl extends uh{constructor(t,i,s,l=[]){super(),this.key=t,this.value=i,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Yr extends uh{constructor(t,i,s,l,c=[]){super(),this.key=t,this.data=i,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function sT(r){const t=new Map;return r.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const s=r.data.field(i);t.set(i,s)}}),t}function fv(r,t,i){const s=new Map;qt(r.length===i.length,32656,{Re:i.length,Ve:r.length});for(let l=0;l<i.length;l++){const c=r[l],d=c.transform,g=t.data.field(c.field);s.set(c.field,Lb(d,g,i[l]))}return s}function dv(r,t,i){const s=new Map;for(const l of r){const c=l.transform,d=i.data.field(l.field);s.set(l.field,kb(c,d,t))}return s}class Cm extends uh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gb extends uh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(t,i,s,l){this.batchId=t,this.localWriteTime=i,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,i){const s=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&qb(c,t,s[l])}}applyToLocalView(t,i){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(i=Rl(s,t,i,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(i=Rl(s,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const s=ZE();return this.mutations.forEach(l=>{const c=t.get(l.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=i.has(l.key)?null:g;const p=rT(d,g);p!==null&&s.set(l.key,p),d.isValidDocument()||d.convertToNoDocument(Tt.min())}),s}keys(){return this.mutations.reduce((t,i)=>t.add(i.key),Ot())}isEqual(t){return this.batchId===t.batchId&&Ka(this.mutations,t.mutations,(i,s)=>hv(i,s))&&Ka(this.baseMutations,t.baseMutations,(i,s)=>hv(i,s))}}class Dm{constructor(t,i,s,l){this.batch=t,this.commitVersion=i,this.mutationResults=s,this.docVersions=l}static from(t,i,s){qt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=function(){return Mb}();const c=t.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new Dm(t,i,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee,xt;function Yb(r){switch(r){case Y.OK:return gt(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return gt(15467,{code:r})}}function aT(r){if(r===void 0)return Xi("GRPC error has no .code"),Y.UNKNOWN;switch(r){case Ee.OK:return Y.OK;case Ee.CANCELLED:return Y.CANCELLED;case Ee.UNKNOWN:return Y.UNKNOWN;case Ee.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case Ee.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case Ee.INTERNAL:return Y.INTERNAL;case Ee.UNAVAILABLE:return Y.UNAVAILABLE;case Ee.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case Ee.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case Ee.NOT_FOUND:return Y.NOT_FOUND;case Ee.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case Ee.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case Ee.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case Ee.ABORTED:return Y.ABORTED;case Ee.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case Ee.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case Ee.DATA_LOSS:return Y.DATA_LOSS;default:return gt(39323,{code:r})}}(xt=Ee||(Ee={}))[xt.OK=0]="OK",xt[xt.CANCELLED=1]="CANCELLED",xt[xt.UNKNOWN=2]="UNKNOWN",xt[xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xt[xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xt[xt.NOT_FOUND=5]="NOT_FOUND",xt[xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",xt[xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",xt[xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",xt[xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xt[xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xt[xt.ABORTED=10]="ABORTED",xt[xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",xt[xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",xt[xt.INTERNAL=13]="INTERNAL",xt[xt.UNAVAILABLE=14]="UNAVAILABLE",xt[xt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=new Lr([4294967295,4294967295],0);function mv(r){const t=Xb().encode(r),i=new TE;return i.update(t),new Uint8Array(i.digest())}function gv(r){const t=new DataView(r.buffer),i=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Lr([i,s],0),new Lr([l,c],0)]}class Nm{constructor(t,i,s){if(this.bitmap=t,this.padding=i,this.hashCount=s,i<0||i>=8)throw new vl(`Invalid padding: ${i}`);if(s<0)throw new vl(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new vl(`Invalid hash count: ${s}`);if(t.length===0&&i!==0)throw new vl(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*t.length-i,this.pe=Lr.fromNumber(this.ge)}ye(t,i,s){let l=t.add(i.multiply(Lr.fromNumber(s)));return l.compare($b)===1&&(l=new Lr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const i=mv(t),[s,l]=gv(i);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(t,i,s){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),d=new Nm(c,l,i);return s.forEach(g=>d.insert(g)),d}insert(t){if(this.ge===0)return;const i=mv(t),[s,l]=gv(i);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(t){const i=Math.floor(t/8),s=t%8;this.bitmap[i]|=1<<s}}class vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(t,i,s,l,c){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,i,s){const l=new Map;return l.set(t,Bl.createSynthesizedTargetChangeForCurrentChange(t,i,s)),new ch(Tt.min(),l,new oe(Nt),$i(),Ot())}}class Bl{constructor(t,i,s,l,c){this.resumeToken=t,this.current=i,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,i,s){return new Bl(s,i,Ot(),Ot(),Ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(t,i,s,l){this.be=t,this.removedTargetIds=i,this.key=s,this.De=l}}class oT{constructor(t,i){this.targetId=t,this.Ce=i}}class lT{constructor(t,i,s=Fe.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=i,this.resumeToken=s,this.cause=l}}class pv{constructor(){this.ve=0,this.Fe=yv(),this.Me=Fe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ot(),i=Ot(),s=Ot();return this.Fe.forEach((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:i=i.add(l);break;case 1:s=s.add(l);break;default:gt(38017,{changeType:c})}}),new Bl(this.Me,this.xe,t,i,s)}qe(){this.Oe=!1,this.Fe=yv()}Qe(t,i){this.Oe=!0,this.Fe=this.Fe.insert(t,i)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,qt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Zb{constructor(t){this.Ge=t,this.ze=new Map,this.je=$i(),this.Je=Ec(),this.He=Ec(),this.Ye=new oe(Nt)}Ze(t){for(const i of t.be)t.De&&t.De.isFoundDocument()?this.Xe(i,t.De):this.et(i,t.key,t.De);for(const i of t.removedTargetIds)this.et(i,t.key,t.De)}tt(t){this.forEachTarget(t,i=>{const s=this.nt(i);switch(t.state){case 0:this.rt(i)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(i)&&(this.it(i),s.Le(t.resumeToken));break;default:gt(56790,{state:t.state})}})}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.ze.forEach((s,l)=>{this.rt(l)&&i(l)})}st(t){const i=t.targetId,s=t.Ce.count,l=this.ot(i);if(l){const c=l.target;if(tm(c))if(s===0){const d=new ht(c.path);this.et(i,d,Ze.newNoDocument(d,Tt.min()))}else qt(s===1,20013,{expectedCount:s});else{const d=this._t(i);if(d!==s){const g=this.ut(t),p=g?this.ct(g,t,d):1;if(p!==0){this.it(i);const _=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,_)}}}}}ut(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=i;let d,g;try{d=Hr(s).toUint8Array()}catch(p){if(p instanceof ME)return Qa("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new Nm(d,l,c)}catch(p){return Qa(p instanceof vl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(t,i,s){return i.Ce.count===s-this.Pt(t,i.targetId)?0:2}Pt(t,i){const s=this.Ge.getRemoteKeysForTarget(i);let l=0;return s.forEach(c=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;t.mightContain(g)||(this.et(i,c,null),l++)}),l}Tt(t){const i=new Map;this.ze.forEach((c,d)=>{const g=this.ot(d);if(g){if(c.current&&tm(g.target)){const p=new ht(g.target.path);this.It(p).has(d)||this.Et(d,p)||this.et(d,p,Ze.newNoDocument(p,t))}c.Be&&(i.set(d,c.ke()),c.qe())}});let s=Ot();this.He.forEach((c,d)=>{let g=!0;d.forEachWhile(p=>{const _=this.ot(p);return!_||_.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(s=s.add(c))}),this.je.forEach((c,d)=>d.setReadTime(t));const l=new ch(t,i,this.Ye,this.je,s);return this.je=$i(),this.Je=Ec(),this.He=Ec(),this.Ye=new oe(Nt),l}Xe(t,i){if(!this.rt(t))return;const s=this.Et(t,i.key)?2:0;this.nt(t).Qe(i.key,s),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(t)),this.He=this.He.insert(i.key,this.dt(i.key).add(t))}et(t,i,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(t)),this.He=this.He.insert(i,this.dt(i).add(t)),s&&(this.je=this.je.insert(i,s))}removeTarget(t){this.ze.delete(t)}_t(t){const i=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let i=this.ze.get(t);return i||(i=new pv,this.ze.set(t,i)),i}dt(t){let i=this.He.get(t);return i||(i=new De(Nt),this.He=this.He.insert(t,i)),i}It(t){let i=this.Je.get(t);return i||(i=new De(Nt),this.Je=this.Je.insert(t,i)),i}rt(t){const i=this.ot(t)!==null;return i||rt("WatchChangeAggregator","Detected inactive target",t),i}ot(t){const i=this.ze.get(t);return i&&i.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new pv),this.Ge.getRemoteKeysForTarget(t).forEach(i=>{this.et(t,i,null)})}Et(t,i){return this.Ge.getRemoteKeysForTarget(t).has(i)}}function Ec(){return new oe(ht.comparator)}function yv(){return new oe(ht.comparator)}const Jb={asc:"ASCENDING",desc:"DESCENDING"},Wb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tR={and:"AND",or:"OR"};class eR{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function nm(r,t){return r.useProto3Json||nh(t)?t:{value:t}}function qc(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function uT(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function nR(r,t){return qc(r,t.toTimestamp())}function ci(r){return qt(!!r,49232),Tt.fromTimestamp(function(i){const s=qr(i);return new ne(s.seconds,s.nanos)}(r))}function Om(r,t){return im(r,t).canonicalString()}function im(r,t){const i=function(l){return new ee(["projects",l.projectId,"databases",l.database])}(r).child("documents");return t===void 0?i:i.child(t)}function cT(r){const t=ee.fromString(r);return qt(gT(t),10190,{key:t.toString()}),t}function rm(r,t){return Om(r.databaseId,t.path)}function kd(r,t){const i=cT(t);if(i.get(1)!==r.databaseId.projectId)throw new at(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+r.databaseId.projectId);if(i.get(3)!==r.databaseId.database)throw new at(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+r.databaseId.database);return new ht(fT(i))}function hT(r,t){return Om(r.databaseId,t)}function iR(r){const t=cT(r);return t.length===4?ee.emptyPath():fT(t)}function sm(r){return new ee(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function fT(r){return qt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function _v(r,t,i){return{name:rm(r,t),fields:i.value.mapValue.fields}}function rR(r,t){let i;if("targetChange"in t){t.targetChange;const s=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:gt(39313,{state:_})}(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=function(_,A){return _.useProto3Json?(qt(A===void 0||typeof A=="string",58123),Fe.fromBase64String(A||"")):(qt(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),Fe.fromUint8Array(A||new Uint8Array))}(r,t.targetChange.resumeToken),d=t.targetChange.cause,g=d&&function(_){const A=_.code===void 0?Y.UNKNOWN:aT(_.code);return new at(A,_.message||"")}(d);i=new lT(s,l,c,g||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=kd(r,s.document.name),c=ci(s.document.updateTime),d=s.document.createTime?ci(s.document.createTime):Tt.min(),g=new un({mapValue:{fields:s.document.fields}}),p=Ze.newFoundDocument(l,c,d,g),_=s.targetIds||[],A=s.removedTargetIds||[];i=new Cc(_,A,p.key,p)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=kd(r,s.document),c=s.readTime?ci(s.readTime):Tt.min(),d=Ze.newNoDocument(l,c),g=s.removedTargetIds||[];i=new Cc([],g,d.key,d)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=kd(r,s.document),c=s.removedTargetIds||[];i=new Cc([],c,l,null)}else{if(!("filter"in t))return gt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new Kb(l,c),g=s.targetId;i=new oT(g,d)}}return i}function sR(r,t){let i;if(t instanceof zl)i={update:_v(r,t.key,t.value)};else if(t instanceof Cm)i={delete:rm(r,t.key)};else if(t instanceof Yr)i={update:_v(r,t.key,t.data),updateMask:mR(t.fieldMask)};else{if(!(t instanceof Gb))return gt(16599,{Vt:t.type});i={verify:rm(r,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(s=>function(c,d){const g=d.transform;if(g instanceof jc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Vl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Ml)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Pl)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw gt(20930,{transform:d.transform})}(0,s))),t.precondition.isNone||(i.currentDocument=function(l,c){return c.updateTime!==void 0?{updateTime:nR(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:gt(27497)}(r,t.precondition)),i}function aR(r,t){return r&&r.length>0?(qt(t!==void 0,14353),r.map(i=>function(l,c){let d=l.updateTime?ci(l.updateTime):ci(c);return d.isEqual(Tt.min())&&(d=ci(c)),new jb(d,l.transformResults||[])}(i,t))):[]}function oR(r,t){return{documents:[hT(r,t.path)]}}function lR(r,t){const i={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),i.structuredQuery.from=[{collectionId:s.lastSegment()}]),i.parent=hT(r,l);const c=function(_){if(_.length!==0)return mT(gi.create(_,"and"))}(t.filters);c&&(i.structuredQuery.where=c);const d=function(_){if(_.length!==0)return _.map(A=>function(D){return{field:za(D.field),direction:hR(D.dir)}}(A))}(t.orderBy);d&&(i.structuredQuery.orderBy=d);const g=nm(r,t.limit);return g!==null&&(i.structuredQuery.limit=g),t.startAt&&(i.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(t.startAt)),t.endAt&&(i.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(t.endAt)),{ft:i,parent:l}}function uR(r){let t=iR(r.parent);const i=r.structuredQuery,s=i.from?i.from.length:0;let l=null;if(s>0){qt(s===1,65062);const A=i.from[0];A.allDescendants?l=A.collectionId:t=t.child(A.collectionId)}let c=[];i.where&&(c=function(C){const D=dT(C);return D instanceof gi&&HE(D)?D.getFilters():[D]}(i.where));let d=[];i.orderBy&&(d=function(C){return C.map(D=>function($){return new Bc(Ba($.field),function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}($.direction))}(D))}(i.orderBy));let g=null;i.limit&&(g=function(C){let D;return D=typeof C=="object"?C.value:C,nh(D)?null:D}(i.limit));let p=null;i.startAt&&(p=function(C){const D=!!C.before,q=C.values||[];return new zc(q,D)}(i.startAt));let _=null;return i.endAt&&(_=function(C){const D=!C.before,q=C.values||[];return new zc(q,D)}(i.endAt)),Ib(t,l,d,c,g,"F",p,_)}function cR(r,t){const i=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt(28987,{purpose:l})}}(t.purpose);return i==null?null:{"goog-listen-tags":i}}function dT(r){return r.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const s=Ba(i.unaryFilter.field);return Ce.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Ba(i.unaryFilter.field);return Ce.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ba(i.unaryFilter.field);return Ce.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ba(i.unaryFilter.field);return Ce.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return gt(61313);default:return gt(60726)}}(r):r.fieldFilter!==void 0?function(i){return Ce.create(Ba(i.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return gt(58110);default:return gt(50506)}}(i.fieldFilter.op),i.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(i){return gi.create(i.compositeFilter.filters.map(s=>dT(s)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return gt(1026)}}(i.compositeFilter.op))}(r):gt(30097,{filter:r})}function hR(r){return Jb[r]}function fR(r){return Wb[r]}function dR(r){return tR[r]}function za(r){return{fieldPath:r.canonicalString()}}function Ba(r){return He.fromServerFormat(r.fieldPath)}function mT(r){return r instanceof Ce?function(i){if(i.op==="=="){if(sv(i.value))return{unaryFilter:{field:za(i.field),op:"IS_NAN"}};if(rv(i.value))return{unaryFilter:{field:za(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(sv(i.value))return{unaryFilter:{field:za(i.field),op:"IS_NOT_NAN"}};if(rv(i.value))return{unaryFilter:{field:za(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:za(i.field),op:fR(i.op),value:i.value}}}(r):r instanceof gi?function(i){const s=i.getFilters().map(l=>mT(l));return s.length===1?s[0]:{compositeFilter:{op:dR(i.op),filters:s}}}(r):gt(54877,{filter:r})}function mR(r){const t=[];return r.fields.forEach(i=>t.push(i.canonicalString())),{fieldPaths:t}}function gT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(t,i,s,l,c=Tt.min(),d=Tt.min(),g=Fe.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=i,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(t){return new Pr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(t){this.yt=t}}function pR(r){const t=uR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?em(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(){this.Cn=new _R}addToCollectionParentIndex(t,i){return this.Cn.add(i),K.resolve()}getCollectionParents(t,i){return K.resolve(this.Cn.getEntries(i))}addFieldIndex(t,i){return K.resolve()}deleteFieldIndex(t,i){return K.resolve()}deleteAllFieldIndexes(t){return K.resolve()}createTargetIndexes(t,i){return K.resolve()}getDocumentsMatchingTarget(t,i){return K.resolve(null)}getIndexType(t,i){return K.resolve(0)}getFieldIndexes(t,i){return K.resolve([])}getNextCollectionGroupToUpdate(t){return K.resolve(null)}getMinOffset(t,i){return K.resolve(jr.min())}getMinOffsetFromCollectionGroup(t,i){return K.resolve(jr.min())}updateCollectionGroup(t,i,s){return K.resolve()}updateIndexEntries(t,i){return K.resolve()}}class _R{constructor(){this.index={}}add(t){const i=t.lastSegment(),s=t.popLast(),l=this.index[i]||new De(ee.comparator),c=!l.has(s);return this.index[i]=l.add(s),c}has(t){const i=t.lastSegment(),s=t.popLast(),l=this.index[i];return l&&l.has(s)}getEntries(t){return(this.index[t]||new De(ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pT=41943040;class ln{static withCacheSize(t){return new ln(t,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(pT,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new $a(0)}static cr(){return new $a(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="LruGarbageCollector",vR=1048576;function Tv([r,t],[i,s]){const l=Nt(r,i);return l===0?Nt(t,s):l}class ER{constructor(t){this.Ir=t,this.buffer=new De(Tv),this.Er=0}dr(){return++this.Er}Ar(t){const i=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const s=this.buffer.last();Tv(i,s)<0&&(this.buffer=this.buffer.delete(s).add(i))}}get maxValue(){return this.buffer.last()[0]}}class TR{constructor(t,i,s){this.garbageCollector=t,this.asyncQueue=i,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){rt(Ev,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){io(i)?rt(Ev,"Ignoring IndexedDB error during garbage collection: ",i):await no(i)}await this.Vr(3e5)})}}class AR{constructor(t,i){this.mr=t,this.params=i}calculateTargetCount(t,i){return this.mr.gr(t).next(s=>Math.floor(i/100*s))}nthSequenceNumber(t,i){if(i===0)return K.resolve(eh.ce);const s=new ER(i);return this.mr.forEachTarget(t,l=>s.Ar(l.sequenceNumber)).next(()=>this.mr.pr(t,l=>s.Ar(l))).next(()=>s.maxValue)}removeTargets(t,i,s){return this.mr.removeTargets(t,i,s)}removeOrphanedDocuments(t,i){return this.mr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(rt("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(vv)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vv):this.yr(t,i))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,i){let s,l,c,d,g,p,_;const A=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(C=>(C>this.params.maximumSequenceNumbersToCollect?(rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),l=this.params.maximumSequenceNumbersToCollect):l=C,d=Date.now(),this.nthSequenceNumber(t,l))).next(C=>(s=C,g=Date.now(),this.removeTargets(t,s,i))).next(C=>(c=C,p=Date.now(),this.removeOrphanedDocuments(t,s))).next(C=>(_=Date.now(),ka()<=Dt.DEBUG&&rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-A}ms
	Determined least recently used ${l} in `+(g-d)+`ms
	Removed ${c} targets in `+(p-g)+`ms
	Removed ${C} documents in `+(_-p)+`ms
Total Duration: ${_-A}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:C})))}}function SR(r,t){return new AR(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this.changes=new Hs(t=>t.toString(),(t,i)=>t.isEqual(i)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,Ze.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const s=this.changes.get(i);return s!==void 0?K.resolve(s):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(t,i,s,l){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,i){let s=null;return this.documentOverlayCache.getOverlay(t,i).next(l=>(s=l,this.remoteDocumentCache.getEntry(t,i))).next(l=>(s!==null&&Rl(s.mutation,l,En.empty(),ne.now()),l))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next(s=>this.getLocalViewOfDocuments(t,s,Ot()).next(()=>s))}getLocalViewOfDocuments(t,i,s=Ot()){const l=Ms();return this.populateOverlays(t,l,i).next(()=>this.computeViews(t,i,l,s).next(c=>{let d=_l();return c.forEach((g,p)=>{d=d.insert(g,p.overlayedDocument)}),d}))}getOverlayedDocuments(t,i){const s=Ms();return this.populateOverlays(t,s,i).next(()=>this.computeViews(t,i,s,Ot()))}populateOverlays(t,i,s){const l=[];return s.forEach(c=>{i.has(c)||l.push(c)}),this.documentOverlayCache.getOverlays(t,l).next(c=>{c.forEach((d,g)=>{i.set(d,g)})})}computeViews(t,i,s,l){let c=$i();const d=bl(),g=function(){return bl()}();return i.forEach((p,_)=>{const A=s.get(_.key);l.has(_.key)&&(A===void 0||A.mutation instanceof Yr)?c=c.insert(_.key,_):A!==void 0?(d.set(_.key,A.mutation.getFieldMask()),Rl(A.mutation,_,A.mutation.getFieldMask(),ne.now())):d.set(_.key,En.empty())}),this.recalculateAndSaveOverlays(t,c).next(p=>(p.forEach((_,A)=>d.set(_,A)),i.forEach((_,A)=>g.set(_,new RR(A,d.get(_)??null))),g))}recalculateAndSaveOverlays(t,i){const s=bl();let l=new oe((d,g)=>d-g),c=Ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next(d=>{for(const g of d)g.keys().forEach(p=>{const _=i.get(p);if(_===null)return;let A=s.get(p)||En.empty();A=g.applyToLocalView(_,A),s.set(p,A);const C=(l.get(g.batchId)||Ot()).add(p);l=l.insert(g.batchId,C)})}).next(()=>{const d=[],g=l.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),_=p.key,A=p.value,C=ZE();A.forEach(D=>{if(!c.has(D)){const q=rT(i.get(D),s.get(D));q!==null&&C.set(D,q),c=c.add(D)}}),d.push(this.documentOverlayCache.saveOverlays(t,_,C))}return K.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,i,s,l){return function(d){return ht.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):Cb(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,s,l):this.getDocumentsMatchingCollectionQuery(t,i,s,l)}getNextDocuments(t,i,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,s,l).next(c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,s.largestBatchId,l-c.size):K.resolve(Ms());let g=Cl,p=c;return d.next(_=>K.forEach(_,(A,C)=>(g<C.largestBatchId&&(g=C.largestBatchId),c.get(A)?K.resolve():this.remoteDocumentCache.getEntry(t,A).next(D=>{p=p.insert(A,D)}))).next(()=>this.populateOverlays(t,_,c)).next(()=>this.computeViews(t,p,_,Ot())).next(A=>({batchId:g,changes:$E(A)})))})}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new ht(i)).next(s=>{let l=_l();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l})}getDocumentsMatchingCollectionGroupQuery(t,i,s,l){const c=i.collectionGroup;let d=_l();return this.indexManager.getCollectionParents(t,c).next(g=>K.forEach(g,p=>{const _=function(C,D){return new rh(D,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)}(i,p.child(c));return this.getDocumentsMatchingCollectionQuery(t,_,s,l).next(A=>{A.forEach((C,D)=>{d=d.insert(C,D)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(t,i,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,s.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,s,c,l))).next(d=>{c.forEach((p,_)=>{const A=_.getKey();d.get(A)===null&&(d=d.insert(A,Ze.newInvalidDocument(A)))});let g=_l();return d.forEach((p,_)=>{const A=c.get(p);A!==void 0&&Rl(A.mutation,_,En.empty(),ne.now()),oh(i,_)&&(g=g.insert(p,_))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,i){return K.resolve(this.Lr.get(i))}saveBundleMetadata(t,i){return this.Lr.set(i.id,function(l){return{id:l.id,version:l.version,createTime:ci(l.createTime)}}(i)),K.resolve()}getNamedQuery(t,i){return K.resolve(this.kr.get(i))}saveNamedQuery(t,i){return this.kr.set(i.name,function(l){return{name:l.name,query:pR(l.bundledQuery),readTime:ci(l.readTime)}}(i)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(){this.overlays=new oe(ht.comparator),this.qr=new Map}getOverlay(t,i){return K.resolve(this.overlays.get(i))}getOverlays(t,i){const s=Ms();return K.forEach(i,l=>this.getOverlay(t,l).next(c=>{c!==null&&s.set(l,c)})).next(()=>s)}saveOverlays(t,i,s){return s.forEach((l,c)=>{this.St(t,i,c)}),K.resolve()}removeOverlaysForBatchId(t,i,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach(c=>this.overlays=this.overlays.remove(c)),this.qr.delete(s)),K.resolve()}getOverlaysForCollection(t,i,s){const l=Ms(),c=i.length+1,d=new ht(i.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const p=g.getNext().value,_=p.getKey();if(!i.isPrefixOf(_.path))break;_.path.length===c&&p.largestBatchId>s&&l.set(p.getKey(),p)}return K.resolve(l)}getOverlaysForCollectionGroup(t,i,s,l){let c=new oe((_,A)=>_-A);const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===i&&_.largestBatchId>s){let A=c.get(_.largestBatchId);A===null&&(A=Ms(),c=c.insert(_.largestBatchId,A)),A.set(_.getKey(),_)}}const g=Ms(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,A)=>g.set(_,A)),!(g.size()>=l)););return K.resolve(g)}St(t,i,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new Qb(i,s));let c=this.qr.get(i);c===void 0&&(c=Ot(),this.qr.set(i,c)),this.qr.set(i,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this.sessionToken=Fe.EMPTY_BYTE_STRING}getSessionToken(t){return K.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(){this.Qr=new De(Ue.$r),this.Ur=new De(Ue.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,i){const s=new Ue(t,i);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,i){t.forEach(s=>this.addReference(s,i))}removeReference(t,i){this.Gr(new Ue(t,i))}zr(t,i){t.forEach(s=>this.removeReference(s,i))}jr(t){const i=new ht(new ee([])),s=new Ue(i,t),l=new Ue(i,t+1),c=[];return this.Ur.forEachInRange([s,l],d=>{this.Gr(d),c.push(d.key)}),c}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const i=new ht(new ee([])),s=new Ue(i,t),l=new Ue(i,t+1);let c=Ot();return this.Ur.forEachInRange([s,l],d=>{c=c.add(d.key)}),c}containsKey(t){const i=new Ue(t,0),s=this.Qr.firstAfterOrEqual(i);return s!==null&&t.isEqual(s.key)}}class Ue{constructor(t,i){this.key=t,this.Yr=i}static $r(t,i){return ht.comparator(t.key,i.key)||Nt(t.Yr,i.Yr)}static Kr(t,i){return Nt(t.Yr,i.Yr)||ht.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new De(Ue.$r)}checkEmpty(t){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Fb(c,i,s,l);this.mutationQueue.push(d);for(const g of l)this.Zr=this.Zr.add(new Ue(g.key,c)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return K.resolve(d)}lookupMutationBatch(t,i){return K.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(t,i){const s=i+1,l=this.ei(s),c=l<0?0:l;return K.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?Am:this.tr-1)}getAllMutationBatches(t){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const s=new Ue(i,0),l=new Ue(i,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],d=>{const g=this.Xr(d.Yr);c.push(g)}),K.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,i){let s=new De(Nt);return i.forEach(l=>{const c=new Ue(l,0),d=new Ue(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],g=>{s=s.add(g.Yr)})}),K.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,i){const s=i.path,l=s.length+1;let c=s;ht.isDocumentKey(c)||(c=c.child(""));const d=new Ue(new ht(c),0);let g=new De(Nt);return this.Zr.forEachWhile(p=>{const _=p.key.path;return!!s.isPrefixOf(_)&&(_.length===l&&(g=g.add(p.Yr)),!0)},d),K.resolve(this.ti(g))}ti(t){const i=[];return t.forEach(s=>{const l=this.Xr(s);l!==null&&i.push(l)}),i}removeMutationBatch(t,i){qt(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return K.forEach(i.mutations,l=>{const c=new Ue(l.key,i.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)}).next(()=>{this.Zr=s})}ir(t){}containsKey(t,i){const s=new Ue(i,0),l=this.Zr.firstAfterOrEqual(s);return K.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,K.resolve()}ni(t,i){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const i=this.ei(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(t){this.ri=t,this.docs=function(){return new oe(ht.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const s=i.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(i);return this.docs=this.docs.insert(s,{document:i.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const s=this.docs.get(i);return K.resolve(s?s.document.mutableCopy():Ze.newInvalidDocument(i))}getEntries(t,i){let s=$i();return i.forEach(l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():Ze.newInvalidDocument(l))}),K.resolve(s)}getDocumentsMatchingQuery(t,i,s,l){let c=$i();const d=i.path,g=new ht(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:_,value:{document:A}}=p.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||sb(rb(A),s)<=0||(l.has(A.key)||oh(i,A))&&(c=c.insert(A.key,A.mutableCopy()))}return K.resolve(c)}getAllFromCollectionGroup(t,i,s,l){gt(9500)}ii(t,i){return K.forEach(this.docs,s=>i(s))}newChangeBuffer(t){return new VR(this)}getSize(t){return K.resolve(this.size)}}class VR extends bR{constructor(t){super(),this.Nr=t}applyChanges(t){const i=[];return this.changes.forEach((s,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)}),K.waitFor(i)}getFromCache(t,i){return this.Nr.getEntry(t,i)}getAllFromCache(t,i){return this.Nr.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(t){this.persistence=t,this.si=new Hs(i=>Rm(i),wm),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.oi=0,this._i=new Vm,this.targetCount=0,this.ai=$a.ur()}forEachTarget(t,i){return this.si.forEach((s,l)=>i(l)),K.resolve()}getLastRemoteSnapshotVersion(t){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return K.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(t,i,s){return s&&(this.lastRemoteSnapshotVersion=s),i>this.oi&&(this.oi=i),K.resolve()}Pr(t){this.si.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.ai=new $a(i),this.highestTargetId=i),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,i){return this.Pr(i),this.targetCount+=1,K.resolve()}updateTargetData(t,i){return this.Pr(i),K.resolve()}removeTargetData(t,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,K.resolve()}removeTargets(t,i,s){let l=0;const c=[];return this.si.forEach((d,g)=>{g.sequenceNumber<=i&&s.get(g.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(t,g.targetId)),l++)}),K.waitFor(c).next(()=>l)}getTargetCount(t){return K.resolve(this.targetCount)}getTargetData(t,i){const s=this.si.get(i)||null;return K.resolve(s)}addMatchingKeys(t,i,s){return this._i.Wr(i,s),K.resolve()}removeMatchingKeys(t,i,s){this._i.zr(i,s);const l=this.persistence.referenceDelegate,c=[];return l&&i.forEach(d=>{c.push(l.markPotentiallyOrphaned(t,d))}),K.waitFor(c)}removeMatchingKeysForTargetId(t,i){return this._i.jr(i),K.resolve()}getMatchingKeysForTargetId(t,i){const s=this._i.Hr(i);return K.resolve(s)}containsKey(t,i){return K.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(t,i){this.ui={},this.overlays={},this.ci=new eh(0),this.li=!1,this.li=!0,this.hi=new DR,this.referenceDelegate=t(this),this.Pi=new MR(this),this.indexManager=new yR,this.remoteDocumentCache=function(l){return new OR(l)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new gR(i),this.Ii=new IR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new CR,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let s=this.ui[t.toKey()];return s||(s=new NR(i,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,i,s){rt("MemoryPersistence","Starting transaction:",t);const l=new PR(this.ci.next());return this.referenceDelegate.Ei(),s(l).next(c=>this.referenceDelegate.di(l).next(()=>c)).toPromise().then(c=>(l.raiseOnCommittedEvent(),c))}Ai(t,i){return K.or(Object.values(this.ui).map(s=>()=>s.containsKey(t,i)))}}class PR extends ob{constructor(t){super(),this.currentSequenceNumber=t}}class Mm{constructor(t){this.persistence=t,this.Ri=new Vm,this.Vi=null}static mi(t){return new Mm(t)}get fi(){if(this.Vi)return this.Vi;throw gt(60996)}addReference(t,i,s){return this.Ri.addReference(s,i),this.fi.delete(s.toString()),K.resolve()}removeReference(t,i,s){return this.Ri.removeReference(s,i),this.fi.add(s.toString()),K.resolve()}markPotentiallyOrphaned(t,i){return this.fi.add(i.toString()),K.resolve()}removeTarget(t,i){this.Ri.jr(i.targetId).forEach(l=>this.fi.add(l.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,i.targetId).next(l=>{l.forEach(c=>this.fi.add(c.toString()))}).next(()=>s.removeTargetData(t,i))}Ei(){this.Vi=new Set}di(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,s=>{const l=ht.fromPath(s);return this.gi(t,l).next(c=>{c||i.removeEntry(l,Tt.min())})}).next(()=>(this.Vi=null,i.apply(t)))}updateLimboDocument(t,i){return this.gi(t,i).next(s=>{s?this.fi.delete(i.toString()):this.fi.add(i.toString())})}Ti(t){return 0}gi(t,i){return K.or([()=>K.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ai(t,i)])}}class Hc{constructor(t,i){this.persistence=t,this.pi=new Hs(s=>cb(s.path),(s,l)=>s.isEqual(l)),this.garbageCollector=SR(this,i)}static mi(t,i){return new Hc(t,i)}Ei(){}di(t){return K.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}gr(t){const i=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>i.next(l=>s+l))}wr(t){let i=0;return this.pr(t,s=>{i++}).next(()=>i)}pr(t,i){return K.forEach(this.pi,(s,l)=>this.br(t,s,l).next(c=>c?K.resolve():i(l)))}removeTargets(t,i,s){return this.persistence.getTargetCache().removeTargets(t,i,s)}removeOrphanedDocuments(t,i){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(t,d=>this.br(t,d,i).next(g=>{g||(s++,c.removeEntry(d,Tt.min()))})).next(()=>c.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,i){return this.pi.set(i,t.currentSequenceNumber),K.resolve()}removeTarget(t,i){const s=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,i,s){return this.pi.set(s,t.currentSequenceNumber),K.resolve()}removeReference(t,i,s){return this.pi.set(s,t.currentSequenceNumber),K.resolve()}updateLimboDocument(t,i){return this.pi.set(i,t.currentSequenceNumber),K.resolve()}Ti(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=Rc(t.data.value)),i}br(t,i,s){return K.or([()=>this.persistence.Ai(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const l=this.pi.get(i);return K.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(t,i,s,l){this.targetId=t,this.fromCache=i,this.Es=s,this.ds=l}static As(t,i){let s=Ot(),l=Ot();for(const c of i.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Pm(t,i.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return CS()?8:lb(Je())>0?6:4}()}initialize(t,i){this.ps=t,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(t,i,s,l){const c={result:null};return this.ys(t,i).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.ws(t,i,l,s).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new xR;return this.Ss(t,i,d).next(g=>{if(c.result=g,this.Vs)return this.bs(t,i,d,g.size)})}).next(()=>c.result)}bs(t,i,s,l){return s.documentReadCount<this.fs?(ka()<=Dt.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",La(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(ka()<=Dt.DEBUG&&rt("QueryEngine","Query:",La(i),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(ka()<=Dt.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",La(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ui(i))):K.resolve())}ys(t,i){if(uv(i))return K.resolve(null);let s=ui(i);return this.indexManager.getIndexType(t,s).next(l=>l===0?null:(i.limit!==null&&l===1&&(i=em(i,null,"F"),s=ui(i)),this.indexManager.getDocumentsMatchingTarget(t,s).next(c=>{const d=Ot(...c);return this.ps.getDocuments(t,d).next(g=>this.indexManager.getMinOffset(t,s).next(p=>{const _=this.Ds(i,g);return this.Cs(i,_,d,p.readTime)?this.ys(t,em(i,null,"F")):this.vs(t,_,i,p)}))})))}ws(t,i,s,l){return uv(i)||l.isEqual(Tt.min())?K.resolve(null):this.ps.getDocuments(t,s).next(c=>{const d=this.Ds(i,c);return this.Cs(i,d,s,l)?K.resolve(null):(ka()<=Dt.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),La(i)),this.vs(t,d,i,ib(l,Cl)).next(g=>g))})}Ds(t,i){let s=new De(YE(t));return i.forEach((l,c)=>{oh(t,c)&&(s=s.add(c))}),s}Cs(t,i,s,l){if(t.limit===null)return!1;if(s.size!==i.size)return!0;const c=t.limitType==="F"?i.last():i.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(t,i,s){return ka()<=Dt.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",La(i)),this.ps.getDocumentsMatchingQuery(t,i,jr.min(),s)}vs(t,i,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next(c=>(i.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="LocalStore",kR=3e8;class LR{constructor(t,i,s,l){this.persistence=t,this.Fs=i,this.serializer=l,this.Ms=new oe(Nt),this.xs=new Hs(c=>Rm(c),wm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new wR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>t.collect(i,this.Ms))}}function zR(r,t,i,s){return new LR(r,t,i,s)}async function _T(r,t){const i=At(r);return await i.persistence.runTransaction("Handle user change","readonly",s=>{let l;return i.mutationQueue.getAllMutationBatches(s).next(c=>(l=c,i.Bs(t),i.mutationQueue.getAllMutationBatches(s))).next(c=>{const d=[],g=[];let p=Ot();for(const _ of l){d.push(_.batchId);for(const A of _.mutations)p=p.add(A.key)}for(const _ of c){g.push(_.batchId);for(const A of _.mutations)p=p.add(A.key)}return i.localDocuments.getDocuments(s,p).next(_=>({Ls:_,removedBatchIds:d,addedBatchIds:g}))})})}function BR(r,t){const i=At(r);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const l=t.batch.keys(),c=i.Ns.newChangeBuffer({trackRemovals:!0});return function(g,p,_,A){const C=_.batch,D=C.keys();let q=K.resolve();return D.forEach($=>{q=q.next(()=>A.getEntry(p,$)).next(it=>{const Z=_.docVersions.get($);qt(Z!==null,48541),it.version.compareTo(Z)<0&&(C.applyToRemoteDocument(it,_),it.isValidDocument()&&(it.setReadTime(_.commitVersion),A.addEntry(it)))})}),q.next(()=>g.mutationQueue.removeMutationBatch(p,C))}(i,s,t,c).next(()=>c.apply(s)).next(()=>i.mutationQueue.performConsistencyCheck(s)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(g){let p=Ot();for(let _=0;_<g.mutationResults.length;++_)g.mutationResults[_].transformResults.length>0&&(p=p.add(g.batch.mutations[_].key));return p}(t))).next(()=>i.localDocuments.getDocuments(s,l))})}function vT(r){const t=At(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",i=>t.Pi.getLastRemoteSnapshotVersion(i))}function jR(r,t){const i=At(r),s=t.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const g=[];t.targetChanges.forEach((A,C)=>{const D=l.get(C);if(!D)return;g.push(i.Pi.removeMatchingKeys(c,A.removedDocuments,C).next(()=>i.Pi.addMatchingKeys(c,A.addedDocuments,C)));let q=D.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(C)!==null?q=q.withResumeToken(Fe.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):A.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(A.resumeToken,s)),l=l.insert(C,q),function(it,Z,yt){return it.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-it.snapshotVersion.toMicroseconds()>=kR?!0:yt.addedDocuments.size+yt.modifiedDocuments.size+yt.removedDocuments.size>0}(D,q,A)&&g.push(i.Pi.updateTargetData(c,q))});let p=$i(),_=Ot();if(t.documentUpdates.forEach(A=>{t.resolvedLimboDocuments.has(A)&&g.push(i.persistence.referenceDelegate.updateLimboDocument(c,A))}),g.push(qR(c,d,t.documentUpdates).next(A=>{p=A.ks,_=A.qs})),!s.isEqual(Tt.min())){const A=i.Pi.getLastRemoteSnapshotVersion(c).next(C=>i.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s));g.push(A)}return K.waitFor(g).next(()=>d.apply(c)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,p,_)).next(()=>p)}).then(c=>(i.Ms=l,c))}function qR(r,t,i){let s=Ot(),l=Ot();return i.forEach(c=>s=s.add(c)),t.getEntries(r,s).next(c=>{let d=$i();return i.forEach((g,p)=>{const _=c.get(g);p.isFoundDocument()!==_.isFoundDocument()&&(l=l.add(g)),p.isNoDocument()&&p.version.isEqual(Tt.min())?(t.removeEntry(g,p.readTime),d=d.insert(g,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||p.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(p),d=d.insert(g,p)):rt(xm,"Ignoring outdated watch update for ",g,". Current version:",_.version," Watch version:",p.version)}),{ks:d,qs:l}})}function HR(r,t){const i=At(r);return i.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=Am),i.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function GR(r,t){const i=At(r);return i.persistence.runTransaction("Allocate target","readwrite",s=>{let l;return i.Pi.getTargetData(s,t).next(c=>c?(l=c,K.resolve(l)):i.Pi.allocateTargetId(s).next(d=>(l=new Pr(t,d,"TargetPurposeListen",s.currentSequenceNumber),i.Pi.addTargetData(s,l).next(()=>l))))}).then(s=>{const l=i.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(s.targetId,s),i.xs.set(t,s.targetId)),s})}async function am(r,t,i){const s=At(r),l=s.Ms.get(t),c=i?"readwrite":"readwrite-primary";try{i||await s.persistence.runTransaction("Release target",c,d=>s.persistence.referenceDelegate.removeTarget(d,l))}catch(d){if(!io(d))throw d;rt(xm,`Failed to update sequence numbers for target ${t}: ${d}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function Av(r,t,i){const s=At(r);let l=Tt.min(),c=Ot();return s.persistence.runTransaction("Execute query","readwrite",d=>function(p,_,A){const C=At(p),D=C.xs.get(A);return D!==void 0?K.resolve(C.Ms.get(D)):C.Pi.getTargetData(_,A)}(s,d,ui(t)).next(g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,g.targetId).next(p=>{c=p})}).next(()=>s.Fs.getDocumentsMatchingQuery(d,t,i?l:Tt.min(),i?c:Ot())).next(g=>(FR(s,Nb(t),g),{documents:g,Qs:c})))}function FR(r,t,i){let s=r.Os.get(t)||Tt.min();i.forEach((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),r.Os.set(t,s)}class Sv{constructor(){this.activeTargetIds=Ub()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class QR{constructor(){this.Mo=new Sv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,s){}addLocalQueryTarget(t,i=!0){return i&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,i,s){this.xo[t]=i}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Sv,Promise.resolve()}handleUserChange(t,i,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="ConnectivityMonitor";class Rv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){rt(bv,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){rt(bv,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tc=null;function om(){return Tc===null?Tc=function(){return 268435456+Math.round(2147483648*Math.random())}():Tc++,"0x"+Tc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="RestConnection",YR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class XR{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===kc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,i,s,l,c){const d=om(),g=this.zo(t,i.toUriEncodedString());rt(Ld,`Sending RPC '${t}' ${d}:`,g,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,l,c);const{host:_}=new URL(g),A=Wa(_);return this.Jo(t,g,p,s,A).then(C=>(rt(Ld,`Received RPC '${t}' ${d}: `,C),C),C=>{throw Qa(Ld,`RPC '${t}' ${d} failed with error: `,C,"url: ",g,"request:",s),C})}Ho(t,i,s,l,c,d){return this.Go(t,i,s,l,c)}jo(t,i,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+eo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,c)=>t[c]=l),s&&s.headers.forEach((l,c)=>t[c]=l)}zo(t,i){const s=YR[t];return`${this.Uo}/v1/${i}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xe="WebChannelConnection";class ZR extends XR{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,i,s,l,c){const d=om();return new Promise((g,p)=>{const _=new AE;_.setWithCredentials(!0),_.listenOnce(SE.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case bc.NO_ERROR:const C=_.getResponseJson();rt(Xe,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(C)),g(C);break;case bc.TIMEOUT:rt(Xe,`RPC '${t}' ${d} timed out`),p(new at(Y.DEADLINE_EXCEEDED,"Request time out"));break;case bc.HTTP_ERROR:const D=_.getStatus();if(rt(Xe,`RPC '${t}' ${d} failed with status:`,D,"response text:",_.getResponseText()),D>0){let q=_.getResponseJson();Array.isArray(q)&&(q=q[0]);const $=q?.error;if($&&$.status&&$.message){const it=function(yt){const mt=yt.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(mt)>=0?mt:Y.UNKNOWN}($.status);p(new at(it,$.message))}else p(new at(Y.UNKNOWN,"Server responded with status "+_.getStatus()))}else p(new at(Y.UNAVAILABLE,"Connection failed."));break;default:gt(9055,{l_:t,streamId:d,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{rt(Xe,`RPC '${t}' ${d} completed.`)}});const A=JSON.stringify(l);rt(Xe,`RPC '${t}' ${d} sending request:`,l),_.send(i,"POST",A,s,15)})}T_(t,i,s){const l=om(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=wE(),g=RE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(p.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,i,s),p.encodeInitMessageHeaders=!0;const A=c.join("");rt(Xe,`Creating RPC '${t}' stream ${l}: ${A}`,p);const C=d.createWebChannel(A,p);this.I_(C);let D=!1,q=!1;const $=new $R({Yo:Z=>{q?rt(Xe,`Not sending because RPC '${t}' stream ${l} is closed:`,Z):(D||(rt(Xe,`Opening RPC '${t}' stream ${l} transport.`),C.open(),D=!0),rt(Xe,`RPC '${t}' stream ${l} sending:`,Z),C.send(Z))},Zo:()=>C.close()}),it=(Z,yt,mt)=>{Z.listen(yt,ut=>{try{mt(ut)}catch(Ut){setTimeout(()=>{throw Ut},0)}})};return it(C,yl.EventType.OPEN,()=>{q||(rt(Xe,`RPC '${t}' stream ${l} transport opened.`),$.o_())}),it(C,yl.EventType.CLOSE,()=>{q||(q=!0,rt(Xe,`RPC '${t}' stream ${l} transport closed`),$.a_(),this.E_(C))}),it(C,yl.EventType.ERROR,Z=>{q||(q=!0,Qa(Xe,`RPC '${t}' stream ${l} transport errored. Name:`,Z.name,"Message:",Z.message),$.a_(new at(Y.UNAVAILABLE,"The operation could not be completed")))}),it(C,yl.EventType.MESSAGE,Z=>{if(!q){const yt=Z.data[0];qt(!!yt,16349);const mt=yt,ut=mt?.error||mt[0]?.error;if(ut){rt(Xe,`RPC '${t}' stream ${l} received error:`,ut);const Ut=ut.status;let Et=function(S){const I=Ee[S];if(I!==void 0)return aT(I)}(Ut),kt=ut.message;Et===void 0&&(Et=Y.INTERNAL,kt="Unknown error status: "+Ut+" with message "+ut.message),q=!0,$.a_(new at(Et,kt)),C.close()}else rt(Xe,`RPC '${t}' stream ${l} received:`,yt),$.u_(yt)}}),it(g,bE.STAT_EVENT,Z=>{Z.stat===Xd.PROXY?rt(Xe,`RPC '${t}' stream ${l} detected buffering proxy`):Z.stat===Xd.NOPROXY&&rt(Xe,`RPC '${t}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{$.__()},0),$}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(i=>i===t)}}function zd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(r){return new eR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(t,i,s=1e3,l=1.5,c=6e4){this.Mi=t,this.timerId=i,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const i=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-s);l>0&&rt("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="PersistentStream";class TT{constructor(t,i,s,l,c,d,g,p){this.Mi=t,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ET(t,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():i&&i.code===Y.RESOURCE_EXHAUSTED?(Xi(i.toString()),Xi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(i)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,l])=>{this.D_===i&&this.G_(s,l)},s=>{t(()=>{const l=new at(Y.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)})})}G_(t,i){const s=this.W_(this.D_);this.stream=this.j_(t,i),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(l=>{s(()=>this.z_(l))}),this.stream.onMessage(l=>{s(()=>++this.F_==1?this.J_(l):this.onNext(l))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return rt(wv,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return i=>{this.Mi.enqueueAndForget(()=>this.D_===t?i():(rt(wv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JR extends TT{constructor(t,i,s,l,c,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,s,l,d),this.serializer=c}j_(t,i){return this.connection.T_("Listen",t,i)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const i=rR(this.serializer,t),s=function(c){if(!("targetChange"in c))return Tt.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Tt.min():d.readTime?ci(d.readTime):Tt.min()}(t);return this.listener.H_(i,s)}Y_(t){const i={};i.database=sm(this.serializer),i.addTarget=function(c,d){let g;const p=d.target;if(g=tm(p)?{documents:oR(c,p)}:{query:lR(c,p).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=uT(c,d.resumeToken);const _=nm(c,d.expectedCount);_!==null&&(g.expectedCount=_)}else if(d.snapshotVersion.compareTo(Tt.min())>0){g.readTime=qc(c,d.snapshotVersion.toTimestamp());const _=nm(c,d.expectedCount);_!==null&&(g.expectedCount=_)}return g}(this.serializer,t);const s=cR(this.serializer,t);s&&(i.labels=s),this.q_(i)}Z_(t){const i={};i.database=sm(this.serializer),i.removeTarget=t,this.q_(i)}}class WR extends TT{constructor(t,i,s,l,c,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,i){return this.connection.T_("Write",t,i)}J_(t){return qt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,qt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){qt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const i=aR(t.writeResults,t.commitTime),s=ci(t.commitTime);return this.listener.na(s,i)}ra(){const t={};t.database=sm(this.serializer),this.q_(t)}ea(t){const i={streamToken:this.lastStreamToken,writes:t.map(s=>sR(this.serializer,s))};this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{}class ew extends tw{constructor(t,i,s,l){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new at(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,i,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Go(t,im(i,s),l,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new at(Y.UNKNOWN,c.toString())})}Ho(t,i,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.Ho(t,im(i,s),l,d,g,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new at(Y.UNKNOWN,d.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class nw{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xi(i),this.aa=!1):rt("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="RemoteStore";class iw{constructor(t,i,s,l,c){this.localStore=t,this.datastore=i,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo(d=>{s.enqueueAndForget(async()=>{Gs(this)&&(rt(js,"Restarting streams for network reachability change."),await async function(p){const _=At(p);_.Ea.add(4),await jl(_),_.Ra.set("Unknown"),_.Ea.delete(4),await fh(_)}(this))})}),this.Ra=new nw(s,l)}}async function fh(r){if(Gs(r))for(const t of r.da)await t(!0)}async function jl(r){for(const t of r.da)await t(!1)}function AT(r,t){const i=At(r);i.Ia.has(t.targetId)||(i.Ia.set(t.targetId,t),zm(i)?Lm(i):ro(i).O_()&&km(i,t))}function Um(r,t){const i=At(r),s=ro(i);i.Ia.delete(t),s.O_()&&ST(i,t),i.Ia.size===0&&(s.O_()?s.L_():Gs(i)&&i.Ra.set("Unknown"))}function km(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Tt.min())>0){const i=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}ro(r).Y_(t)}function ST(r,t){r.Va.Ue(t),ro(r).Z_(t)}function Lm(r){r.Va=new Zb({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),ro(r).start(),r.Ra.ua()}function zm(r){return Gs(r)&&!ro(r).x_()&&r.Ia.size>0}function Gs(r){return At(r).Ea.size===0}function bT(r){r.Va=void 0}async function rw(r){r.Ra.set("Online")}async function sw(r){r.Ia.forEach((t,i)=>{km(r,t)})}async function aw(r,t){bT(r),zm(r)?(r.Ra.ha(t),Lm(r)):r.Ra.set("Unknown")}async function ow(r,t,i){if(r.Ra.set("Online"),t instanceof lT&&t.state===2&&t.cause)try{await async function(l,c){const d=c.cause;for(const g of c.targetIds)l.Ia.has(g)&&(await l.remoteSyncer.rejectListen(g,d),l.Ia.delete(g),l.Va.removeTarget(g))}(r,t)}catch(s){rt(js,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Gc(r,s)}else if(t instanceof Cc?r.Va.Ze(t):t instanceof oT?r.Va.st(t):r.Va.tt(t),!i.isEqual(Tt.min()))try{const s=await vT(r.localStore);i.compareTo(s)>=0&&await function(c,d){const g=c.Va.Tt(d);return g.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const A=c.Ia.get(_);A&&c.Ia.set(_,A.withResumeToken(p.resumeToken,d))}}),g.targetMismatches.forEach((p,_)=>{const A=c.Ia.get(p);if(!A)return;c.Ia.set(p,A.withResumeToken(Fe.EMPTY_BYTE_STRING,A.snapshotVersion)),ST(c,p);const C=new Pr(A.target,p,_,A.sequenceNumber);km(c,C)}),c.remoteSyncer.applyRemoteEvent(g)}(r,i)}catch(s){rt(js,"Failed to raise snapshot:",s),await Gc(r,s)}}async function Gc(r,t,i){if(!io(t))throw t;r.Ea.add(1),await jl(r),r.Ra.set("Offline"),i||(i=()=>vT(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{rt(js,"Retrying IndexedDB access"),await i(),r.Ea.delete(1),await fh(r)})}function RT(r,t){return t().catch(i=>Gc(r,i,t))}async function dh(r){const t=At(r),i=Fr(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Am;for(;lw(t);)try{const l=await HR(t.localStore,s);if(l===null){t.Ta.length===0&&i.L_();break}s=l.batchId,uw(t,l)}catch(l){await Gc(t,l)}wT(t)&&IT(t)}function lw(r){return Gs(r)&&r.Ta.length<10}function uw(r,t){r.Ta.push(t);const i=Fr(r);i.O_()&&i.X_&&i.ea(t.mutations)}function wT(r){return Gs(r)&&!Fr(r).x_()&&r.Ta.length>0}function IT(r){Fr(r).start()}async function cw(r){Fr(r).ra()}async function hw(r){const t=Fr(r);for(const i of r.Ta)t.ea(i.mutations)}async function fw(r,t,i){const s=r.Ta.shift(),l=Dm.from(s,t,i);await RT(r,()=>r.remoteSyncer.applySuccessfulWrite(l)),await dh(r)}async function dw(r,t){t&&Fr(r).X_&&await async function(s,l){if(function(d){return Yb(d)&&d!==Y.ABORTED}(l.code)){const c=s.Ta.shift();Fr(s).B_(),await RT(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l)),await dh(s)}}(r,t),wT(r)&&IT(r)}async function Iv(r,t){const i=At(r);i.asyncQueue.verifyOperationInProgress(),rt(js,"RemoteStore received new credentials");const s=Gs(i);i.Ea.add(3),await jl(i),s&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.Ea.delete(3),await fh(i)}async function mw(r,t){const i=At(r);t?(i.Ea.delete(2),await fh(i)):t||(i.Ea.add(2),await jl(i),i.Ra.set("Unknown"))}function ro(r){return r.ma||(r.ma=function(i,s,l){const c=At(i);return c.sa(),new JR(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(r.datastore,r.asyncQueue,{Xo:rw.bind(null,r),t_:sw.bind(null,r),r_:aw.bind(null,r),H_:ow.bind(null,r)}),r.da.push(async t=>{t?(r.ma.B_(),zm(r)?Lm(r):r.Ra.set("Unknown")):(await r.ma.stop(),bT(r))})),r.ma}function Fr(r){return r.fa||(r.fa=function(i,s,l){const c=At(i);return c.sa(),new WR(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:cw.bind(null,r),r_:dw.bind(null,r),ta:hw.bind(null,r),na:fw.bind(null,r)}),r.da.push(async t=>{t?(r.fa.B_(),await dh(r)):(await r.fa.stop(),r.Ta.length>0&&(rt(js,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))})),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(t,i,s,l,c){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,i,s,l,c){const d=Date.now()+s,g=new Bm(t,i,d,l,c);return g.start(s),g}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new at(Y.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jm(r,t){if(Xi("AsyncQueue",`${t}: ${r}`),io(r))return new at(Y.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{static emptySet(t){return new ja(t.comparator)}constructor(t){this.comparator=t?(i,s)=>t(i,s)||ht.comparator(i.key,s.key):(i,s)=>ht.comparator(i.key,s.key),this.keyedMap=_l(),this.sortedSet=new oe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((i,s)=>(t(i),!1))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof ja)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach(i=>{t.push(i.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const s=new ja;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=i,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(){this.ga=new oe(ht.comparator)}track(t){const i=t.doc.key,s=this.ga.get(i);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(i,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(i,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(i,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(i):t.type===1&&s.type===2?this.ga=this.ga.insert(i,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):gt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(i,t)}ya(){const t=[];return this.ga.inorderTraversal((i,s)=>{t.push(s)}),t}}class Za{constructor(t,i,s,l,c,d,g,p,_){this.query=t,this.docs=i,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=_}static fromInitialDocuments(t,i,s,l,c){const d=[];return i.forEach(g=>{d.push({type:0,doc:g})}),new Za(t,i,ja.emptySet(i),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ah(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,s=t.docChanges;if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==s[l].type||!i[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class pw{constructor(){this.queries=Dv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,s){const l=At(i),c=l.queries;l.queries=Dv(),c.forEach((d,g)=>{for(const p of g.Sa)p.onError(s)})})(this,new at(Y.ABORTED,"Firestore shutting down"))}}function Dv(){return new Hs(r=>KE(r),ah)}async function qm(r,t){const i=At(r);let s=3;const l=t.query;let c=i.queries.get(l);c?!c.ba()&&t.Da()&&(s=2):(c=new gw,s=t.Da()?0:1);try{switch(s){case 0:c.wa=await i.onListen(l,!0);break;case 1:c.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(d){const g=jm(d,`Initialization of query '${La(t.query)}' failed`);return void t.onError(g)}i.queries.set(l,c),c.Sa.push(t),t.va(i.onlineState),c.wa&&t.Fa(c.wa)&&Gm(i)}async function Hm(r,t){const i=At(r),s=t.query;let l=3;const c=i.queries.get(s);if(c){const d=c.Sa.indexOf(t);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=t.Da()?0:1:!c.ba()&&t.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(s),i.onUnlisten(s,!0);case 1:return i.queries.delete(s),i.onUnlisten(s,!1);case 2:return i.onLastRemoteStoreUnlisten(s);default:return}}function yw(r,t){const i=At(r);let s=!1;for(const l of t){const c=l.query,d=i.queries.get(c);if(d){for(const g of d.Sa)g.Fa(l)&&(s=!0);d.wa=l}}s&&Gm(i)}function _w(r,t,i){const s=At(r),l=s.queries.get(t);if(l)for(const c of l.Sa)c.onError(i);s.queries.delete(t)}function Gm(r){r.Ca.forEach(t=>{t.next()})}var lm,Nv;(Nv=lm||(lm={})).Ma="default",Nv.Cache="cache";class Fm{constructor(t,i,s){this.query=t,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new Za(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),i=!0):this.La(t,this.onlineState)&&(this.ka(t),i=!0),this.Na=t,i}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),i=!0),i}La(t,i){if(!t.fromCache||!this.Da())return!0;const s=i!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(t){t=Za.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==lm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(t){this.key=t}}class DT{constructor(t){this.key=t}}class vw{constructor(t,i){this.query=t,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ot(),this.mutatedKeys=Ot(),this.eu=YE(t),this.tu=new ja(this.eu)}get nu(){return this.Ya}ru(t,i){const s=i?i.iu:new Cv,l=i?i.tu:this.tu;let c=i?i.mutatedKeys:this.mutatedKeys,d=l,g=!1;const p=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,_=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal((A,C)=>{const D=l.get(A),q=oh(this.query,C)?C:null,$=!!D&&this.mutatedKeys.has(D.key),it=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Z=!1;D&&q?D.data.isEqual(q.data)?$!==it&&(s.track({type:3,doc:q}),Z=!0):this.su(D,q)||(s.track({type:2,doc:q}),Z=!0,(p&&this.eu(q,p)>0||_&&this.eu(q,_)<0)&&(g=!0)):!D&&q?(s.track({type:0,doc:q}),Z=!0):D&&!q&&(s.track({type:1,doc:D}),Z=!0,(p||_)&&(g=!0)),Z&&(q?(d=d.add(q),c=it?c.add(A):c.delete(A)):(d=d.delete(A),c=c.delete(A)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const A=this.query.limitType==="F"?d.last():d.first();d=d.delete(A.key),c=c.delete(A.key),s.track({type:1,doc:A})}return{tu:d,iu:s,Cs:g,mutatedKeys:c}}su(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,s,l){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const d=t.iu.ya();d.sort((A,C)=>function(q,$){const it=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt(20277,{Rt:Z})}};return it(q)-it($)}(A.type,C.type)||this.eu(A.doc,C.doc)),this.ou(s),l=l??!1;const g=i&&!l?this._u():[],p=this.Xa.size===0&&this.current&&!l?1:0,_=p!==this.Za;return this.Za=p,d.length!==0||_?{snapshot:new Za(this.query,t.tu,c,d,t.mutatedKeys,p===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Cv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(i=>this.Ya=this.Ya.add(i)),t.modifiedDocuments.forEach(i=>{}),t.removedDocuments.forEach(i=>this.Ya=this.Ya.delete(i)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ot(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const i=[];return t.forEach(s=>{this.Xa.has(s)||i.push(new DT(s))}),this.Xa.forEach(s=>{t.has(s)||i.push(new CT(s))}),i}cu(t){this.Ya=t.Qs,this.Xa=Ot();const i=this.ru(t.documents);return this.applyChanges(i,!0)}lu(){return Za.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Qm="SyncEngine";class Ew{constructor(t,i,s){this.query=t,this.targetId=i,this.view=s}}class Tw{constructor(t){this.key=t,this.hu=!1}}class Aw{constructor(t,i,s,l,c,d){this.localStore=t,this.remoteStore=i,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Hs(g=>KE(g),ah),this.Iu=new Map,this.Eu=new Set,this.du=new oe(ht.comparator),this.Au=new Map,this.Ru=new Vm,this.Vu={},this.mu=new Map,this.fu=$a.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Sw(r,t,i=!0){const s=xT(r);let l;const c=s.Tu.get(t);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await NT(s,t,i,!0),l}async function bw(r,t){const i=xT(r);await NT(i,t,!0,!1)}async function NT(r,t,i,s){const l=await GR(r.localStore,ui(t)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,i);let g;return s&&(g=await Rw(r,t,c,d==="current",l.resumeToken)),r.isPrimaryClient&&i&&AT(r.remoteStore,l),g}async function Rw(r,t,i,s,l){r.pu=(C,D,q)=>async function(it,Z,yt,mt){let ut=Z.view.ru(yt);ut.Cs&&(ut=await Av(it.localStore,Z.query,!1).then(({documents:P})=>Z.view.ru(P,ut)));const Ut=mt&&mt.targetChanges.get(Z.targetId),Et=mt&&mt.targetMismatches.get(Z.targetId)!=null,kt=Z.view.applyChanges(ut,it.isPrimaryClient,Ut,Et);return Vv(it,Z.targetId,kt.au),kt.snapshot}(r,C,D,q);const c=await Av(r.localStore,t,!0),d=new vw(t,c.Qs),g=d.ru(c.documents),p=Bl.createSynthesizedTargetChangeForCurrentChange(i,s&&r.onlineState!=="Offline",l),_=d.applyChanges(g,r.isPrimaryClient,p);Vv(r,i,_.au);const A=new Ew(t,i,d);return r.Tu.set(t,A),r.Iu.has(i)?r.Iu.get(i).push(t):r.Iu.set(i,[t]),_.snapshot}async function ww(r,t,i){const s=At(r),l=s.Tu.get(t),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter(d=>!ah(d,t))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await am(s.localStore,l.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(l.targetId),i&&Um(s.remoteStore,l.targetId),um(s,l.targetId)}).catch(no)):(um(s,l.targetId),await am(s.localStore,l.targetId,!0))}async function Iw(r,t){const i=At(r),s=i.Tu.get(t),l=i.Iu.get(s.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(s.targetId),Um(i.remoteStore,s.targetId))}async function Cw(r,t,i){const s=xw(r);try{const l=await function(d,g){const p=At(d),_=ne.now(),A=g.reduce((q,$)=>q.add($.key),Ot());let C,D;return p.persistence.runTransaction("Locally write mutations","readwrite",q=>{let $=$i(),it=Ot();return p.Ns.getEntries(q,A).next(Z=>{$=Z,$.forEach((yt,mt)=>{mt.isValidDocument()||(it=it.add(yt))})}).next(()=>p.localDocuments.getOverlayedDocuments(q,$)).next(Z=>{C=Z;const yt=[];for(const mt of g){const ut=Hb(mt,C.get(mt.key).overlayedDocument);ut!=null&&yt.push(new Yr(mt.key,ut,BE(ut.value.mapValue),xn.exists(!0)))}return p.mutationQueue.addMutationBatch(q,_,yt,g)}).next(Z=>{D=Z;const yt=Z.applyToLocalDocumentSet(C,it);return p.documentOverlayCache.saveOverlays(q,Z.batchId,yt)})}).then(()=>({batchId:D.batchId,changes:$E(C)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),function(d,g,p){let _=d.Vu[d.currentUser.toKey()];_||(_=new oe(Nt)),_=_.insert(g,p),d.Vu[d.currentUser.toKey()]=_}(s,l.batchId,i),await ql(s,l.changes),await dh(s.remoteStore)}catch(l){const c=jm(l,"Failed to persist write");i.reject(c)}}async function OT(r,t){const i=At(r);try{const s=await jR(i.localStore,t);t.targetChanges.forEach((l,c)=>{const d=i.Au.get(c);d&&(qt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?qt(d.hu,14607):l.removedDocuments.size>0&&(qt(d.hu,42227),d.hu=!1))}),await ql(i,s,t)}catch(s){await no(s)}}function Ov(r,t,i){const s=At(r);if(s.isPrimaryClient&&i===0||!s.isPrimaryClient&&i===1){const l=[];s.Tu.forEach((c,d)=>{const g=d.view.va(t);g.snapshot&&l.push(g.snapshot)}),function(d,g){const p=At(d);p.onlineState=g;let _=!1;p.queries.forEach((A,C)=>{for(const D of C.Sa)D.va(g)&&(_=!0)}),_&&Gm(p)}(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function Dw(r,t,i){const s=At(r);s.sharedClientState.updateQueryState(t,"rejected",i);const l=s.Au.get(t),c=l&&l.key;if(c){let d=new oe(ht.comparator);d=d.insert(c,Ze.newNoDocument(c,Tt.min()));const g=Ot().add(c),p=new ch(Tt.min(),new Map,new oe(Nt),d,g);await OT(s,p),s.du=s.du.remove(c),s.Au.delete(t),Km(s)}else await am(s.localStore,t,!1).then(()=>um(s,t,i)).catch(no)}async function Nw(r,t){const i=At(r),s=t.batch.batchId;try{const l=await BR(i.localStore,t);MT(i,s,null),VT(i,s),i.sharedClientState.updateMutationState(s,"acknowledged"),await ql(i,l)}catch(l){await no(l)}}async function Ow(r,t,i){const s=At(r);try{const l=await function(d,g){const p=At(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let A;return p.mutationQueue.lookupMutationBatch(_,g).next(C=>(qt(C!==null,37113),A=C.keys(),p.mutationQueue.removeMutationBatch(_,C))).next(()=>p.mutationQueue.performConsistencyCheck(_)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(_,A,g)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,A)).next(()=>p.localDocuments.getDocuments(_,A))})}(s.localStore,t);MT(s,t,i),VT(s,t),s.sharedClientState.updateMutationState(t,"rejected",i),await ql(s,l)}catch(l){await no(l)}}function VT(r,t){(r.mu.get(t)||[]).forEach(i=>{i.resolve()}),r.mu.delete(t)}function MT(r,t,i){const s=At(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(t);c&&(i?c.reject(i):c.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function um(r,t,i=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),i&&r.Pu.yu(s,i);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach(s=>{r.Ru.containsKey(s)||PT(r,s)})}function PT(r,t){r.Eu.delete(t.path.canonicalString());const i=r.du.get(t);i!==null&&(Um(r.remoteStore,i),r.du=r.du.remove(t),r.Au.delete(i),Km(r))}function Vv(r,t,i){for(const s of i)s instanceof CT?(r.Ru.addReference(s.key,t),Vw(r,s)):s instanceof DT?(rt(Qm,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||PT(r,s.key)):gt(19791,{wu:s})}function Vw(r,t){const i=t.key,s=i.path.canonicalString();r.du.get(i)||r.Eu.has(s)||(rt(Qm,"New document in limbo: "+i),r.Eu.add(s),Km(r))}function Km(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const i=new ht(ee.fromString(t)),s=r.fu.next();r.Au.set(s,new Tw(i)),r.du=r.du.insert(i,s),AT(r.remoteStore,new Pr(ui(sh(i.path)),s,"TargetPurposeLimboResolution",eh.ce))}}async function ql(r,t,i){const s=At(r),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach((g,p)=>{d.push(s.pu(p,t,i).then(_=>{if((_||i)&&s.isPrimaryClient){const A=_?!_.fromCache:i?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,A?"current":"not-current")}if(_){l.push(_);const A=Pm.As(p.targetId,_);c.push(A)}}))}),await Promise.all(d),s.Pu.H_(l),await async function(p,_){const A=At(p);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",C=>K.forEach(_,D=>K.forEach(D.Es,q=>A.persistence.referenceDelegate.addReference(C,D.targetId,q)).next(()=>K.forEach(D.ds,q=>A.persistence.referenceDelegate.removeReference(C,D.targetId,q)))))}catch(C){if(!io(C))throw C;rt(xm,"Failed to update sequence numbers: "+C)}for(const C of _){const D=C.targetId;if(!C.fromCache){const q=A.Ms.get(D),$=q.snapshotVersion,it=q.withLastLimboFreeSnapshotVersion($);A.Ms=A.Ms.insert(D,it)}}}(s.localStore,c))}async function Mw(r,t){const i=At(r);if(!i.currentUser.isEqual(t)){rt(Qm,"User change. New user:",t.toKey());const s=await _T(i.localStore,t);i.currentUser=t,function(c,d){c.mu.forEach(g=>{g.forEach(p=>{p.reject(new at(Y.CANCELLED,d))})}),c.mu.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await ql(i,s.Ls)}}function Pw(r,t){const i=At(r),s=i.Au.get(t);if(s&&s.hu)return Ot().add(s.key);{let l=Ot();const c=i.Iu.get(t);if(!c)return l;for(const d of c){const g=i.Tu.get(d);l=l.unionWith(g.view.nu)}return l}}function xT(r){const t=At(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=OT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Dw.bind(null,t),t.Pu.H_=yw.bind(null,t.eventManager),t.Pu.yu=_w.bind(null,t.eventManager),t}function xw(r){const t=At(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Nw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ow.bind(null,t),t}class Fc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=hh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return zR(this.persistence,new UR,t.initialUser,this.serializer)}Cu(t){return new yT(Mm.mi,this.serializer)}Du(t){return new QR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fc.provider={build:()=>new Fc};class Uw extends Fc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,i){qt(this.persistence.referenceDelegate instanceof Hc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new TR(s,t.asyncQueue,i)}Cu(t){const i=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new yT(s=>Hc.mi(s,i),this.serializer)}}class cm{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Ov(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Mw.bind(null,this.syncEngine),await mw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new pw}()}createDatastore(t){const i=hh(t.databaseInfo.databaseId),s=function(c){return new ZR(c)}(t.databaseInfo);return function(c,d,g,p){return new ew(c,d,g,p)}(t.authCredentials,t.appCheckCredentials,s,i)}createRemoteStore(t){return function(s,l,c,d,g){return new iw(s,l,c,d,g)}(this.localStore,this.datastore,t.asyncQueue,i=>Ov(this.syncEngine,i,0),function(){return Rv.v()?new Rv:new KR}())}createSyncEngine(t,i){return function(l,c,d,g,p,_,A){const C=new Aw(l,c,d,g,p,_);return A&&(C.gu=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){await async function(i){const s=At(i);rt(js,"RemoteStore shutting down."),s.Ea.add(5),await jl(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}cm.provider={build:()=>new cm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Xi("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,i){setTimeout(()=>{this.muted||t(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr="FirestoreClient";class kw{constructor(t,i,s,l,c){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=s,this.databaseInfo=l,this.user=$e.UNAUTHENTICATED,this.clientId=Em.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async d=>{rt(Qr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(rt(Qr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const s=jm(i,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function Bd(r,t){r.asyncQueue.verifyOperationInProgress(),rt(Qr,"Initializing OfflineComponentProvider");const i=r.configuration;await t.initialize(i);let s=i.initialUser;r.setCredentialChangeListener(async l=>{s.isEqual(l)||(await _T(t.localStore,l),s=l)}),t.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=t}async function Mv(r,t){r.asyncQueue.verifyOperationInProgress();const i=await Lw(r);rt(Qr,"Initializing OnlineComponentProvider"),await t.initialize(i,r.configuration),r.setCredentialChangeListener(s=>Iv(t.remoteStore,s)),r.setAppCheckTokenChangeListener((s,l)=>Iv(t.remoteStore,l)),r._onlineComponents=t}async function Lw(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){rt(Qr,"Using user provided OfflineComponentProvider");try{await Bd(r,r._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!function(l){return l.name==="FirebaseError"?l.code===Y.FAILED_PRECONDITION||l.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(i))throw i;Qa("Error using user provided cache. Falling back to memory cache: "+i),await Bd(r,new Fc)}}else rt(Qr,"Using default OfflineComponentProvider"),await Bd(r,new Uw(void 0));return r._offlineComponents}async function UT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(rt(Qr,"Using user provided OnlineComponentProvider"),await Mv(r,r._uninitializedComponentsProvider._online)):(rt(Qr,"Using default OnlineComponentProvider"),await Mv(r,new cm))),r._onlineComponents}function zw(r){return UT(r).then(t=>t.syncEngine)}async function Qc(r){const t=await UT(r),i=t.eventManager;return i.onListen=Sw.bind(null,t.syncEngine),i.onUnlisten=ww.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=bw.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=Iw.bind(null,t.syncEngine),i}function Bw(r,t,i={}){const s=new Ki;return r.asyncQueue.enqueueAndForget(async()=>function(c,d,g,p,_){const A=new Ym({next:D=>{A.Nu(),d.enqueueAndForget(()=>Hm(c,C));const q=D.docs.has(g);!q&&D.fromCache?_.reject(new at(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&D.fromCache&&p&&p.source==="server"?_.reject(new at(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(D)},error:D=>_.reject(D)}),C=new Fm(sh(g.path),A,{includeMetadataChanges:!0,qa:!0});return qm(c,C)}(await Qc(r),r.asyncQueue,t,i,s)),s.promise}function jw(r,t,i={}){const s=new Ki;return r.asyncQueue.enqueueAndForget(async()=>function(c,d,g,p,_){const A=new Ym({next:D=>{A.Nu(),d.enqueueAndForget(()=>Hm(c,C)),D.fromCache&&p.source==="server"?_.reject(new at(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(D)},error:D=>_.reject(D)}),C=new Fm(g,A,{includeMetadataChanges:!0,qa:!0});return qm(c,C)}(await Qc(r),r.asyncQueue,t,i,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="firestore.googleapis.com",xv=!0;class Uv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new at(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=LT,this.ssl=xv}else this.host=t.host,this.ssl=t.ssl??xv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=pT;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<vR)throw new at(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}nb("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kT(t.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new at(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new at(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new at(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,l){return s.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class mh{constructor(t,i,s,l){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new at(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new at(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Q1;switch(s.type){case"firstParty":return new $1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new at(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const s=Pv.get(i);s&&(rt("ComponentProvider","Removing Datastore"),Pv.delete(i),s.terminate())}(this),Promise.resolve()}}function qw(r,t,i,s={}){r=cn(r,mh);const l=Wa(t),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},g=`${t}:${i}`;l&&(dE(`https://${g}`),mE("Firestore",!0)),c.host!==LT&&c.host!==g&&Qa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:g,ssl:l,emulatorOptions:s};if(!Ls(p,d)&&(r._setSettings(p),s.mockUserToken)){let _,A;if(typeof s.mockUserToken=="string")_=s.mockUserToken,A=$e.MOCK_USER;else{_=vS(s.mockUserToken,r._app?.options.projectId);const C=s.mockUserToken.sub||s.mockUserToken.user_id;if(!C)throw new at(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new $e(C)}r._authCredentials=new K1(new CE(_,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(t,i,s){this.converter=i,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Hl(this.firestore,t,this._query)}}class ge{constructor(t,i,s){this.converter=i,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ge(this.firestore,t,this._key)}toJSON(){return{type:ge._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,i,s){if(Ll(i,ge._jsonSchema))return new ge(t,s||null,new ht(ee.fromString(i.referencePath)))}}ge._jsonSchemaVersion="firestore/documentReference/1.0",ge._jsonSchema={type:Ae("string",ge._jsonSchemaVersion),referencePath:Ae("string")};class zr extends Hl{constructor(t,i,s){super(t,i,sh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ge(this.firestore,null,new ht(t))}withConverter(t){return new zr(this.firestore,t,this._path)}}function Br(r,t,...i){if(r=Ge(r),DE("collection","path",t),r instanceof mh){const s=ee.fromString(t,...i);return $_(s),new zr(r,null,s)}{if(!(r instanceof ge||r instanceof zr))throw new at(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ee.fromString(t,...i));return $_(s),new zr(r.firestore,null,s)}}function on(r,t,...i){if(r=Ge(r),arguments.length===1&&(t=Em.newId()),DE("doc","path",t),r instanceof mh){const s=ee.fromString(t,...i);return X_(s),new ge(r,null,new ht(s))}{if(!(r instanceof ge||r instanceof zr))throw new at(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ee.fromString(t,...i));return X_(s),new ge(r.firestore,r instanceof zr?r.converter:null,new ht(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="AsyncQueue";class Lv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ET(this,"async_queue_retry"),this._c=()=>{const s=zd();s&&rt(kv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const i=zd();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const i=zd();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const i=new Ki;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!io(t))throw t;rt(kv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const i=this.ac.then(()=>(this.rc=!0,t().catch(s=>{throw this.nc=s,this.rc=!1,Xi("INTERNAL UNHANDLED ERROR: ",zv(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=i,i}enqueueAfterDelay(t,i,s){this.uc(),this.oc.indexOf(t)>-1&&(i=0);const l=Bm.createAndSchedule(this,t,i,s,c=>this.hc(c));return this.tc.push(l),l}uc(){this.nc&&gt(47125,{Pc:zv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const i of this.tc)if(i.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((i,s)=>i.targetTimeMs-s.targetTimeMs);for(const i of this.tc)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const i=this.tc.indexOf(t);this.tc.splice(i,1)}}function zv(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(r){return function(i,s){if(typeof i!="object"||i===null)return!1;const l=i;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1}(r,["next","error","complete"])}class Zi extends mh{constructor(t,i,s,l){super(t,i,s,l),this.type="firestore",this._queue=new Lv,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Lv(t),this._firestoreClient=void 0,await t}}}function Hw(r,t){const i=typeof r=="object"?r:_E(),s=typeof r=="string"?r:kc,l=_m(i,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=yS("firestore");c&&qw(l,...c)}return l}function gh(r){if(r._terminated)throw new at(Y.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Gw(r),r._firestoreClient}function Gw(r){const t=r._freezeSettings(),i=function(l,c,d,g){return new db(l,c,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,kT(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new kw(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Pn(Fe.fromBase64String(t))}catch(i){throw new at(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new Pn(Fe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Pn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Ll(t,Pn._jsonSchema))return Pn.fromBase64String(t.bytes)}}Pn._jsonSchemaVersion="firestore/bytes/1.0",Pn._jsonSchema={type:Ae("string",Pn._jsonSchemaVersion),bytes:Ae("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new at(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new at(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new at(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Nt(this._lat,t._lat)||Nt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hi._jsonSchemaVersion}}static fromJSON(t){if(Ll(t,hi._jsonSchema))return new hi(t.latitude,t.longitude)}}hi._jsonSchemaVersion="firestore/geoPoint/1.0",hi._jsonSchema={type:Ae("string",hi._jsonSchemaVersion),latitude:Ae("number"),longitude:Ae("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(t){this._values=(t||[]).map(i=>i)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0}(this._values,t._values)}toJSON(){return{type:fi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Ll(t,fi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(i=>typeof i=="number"))return new fi(t.vectorValues);throw new at(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fi._jsonSchemaVersion="firestore/vectorValue/1.0",fi._jsonSchema={type:Ae("string",fi._jsonSchemaVersion),vectorValues:Ae("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=/^__.*__$/;class Qw{constructor(t,i,s){this.data=t,this.fieldMask=i,this.fieldTransforms=s}toMutation(t,i){return this.fieldMask!==null?new Yr(t,this.data,this.fieldMask,i,this.fieldTransforms):new zl(t,this.data,i,this.fieldTransforms)}}class zT{constructor(t,i,s){this.data=t,this.fieldMask=i,this.fieldTransforms=s}toMutation(t,i){return new Yr(t,this.data,this.fieldMask,i,this.fieldTransforms)}}function BT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt(40011,{Ac:r})}}class Xm{constructor(t,i,s,l,c,d){this.settings=t,this.databaseId=i,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Xm({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const i=this.path?.child(t),s=this.Vc({path:i,fc:!1});return s.gc(t),s}yc(t){const i=this.path?.child(t),s=this.Vc({path:i,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Kc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(i=>t.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>t.isPrefixOf(i.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(BT(this.Ac)&&Fw.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Kw{constructor(t,i,s){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=s||hh(t)}Cc(t,i,s,l=!1){return new Xm({Ac:t,methodName:i,Dc:s,path:He.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $m(r){const t=r._freezeSettings(),i=hh(r._databaseId);return new Kw(r._databaseId,!!t.ignoreUndefinedProperties,i)}function jT(r,t,i,s,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,t,i,l);Jm("Data must be an object, but it was:",d,s);const g=qT(s,d);let p,_;if(c.merge)p=new En(d.fieldMask),_=d.fieldTransforms;else if(c.mergeFields){const A=[];for(const C of c.mergeFields){const D=hm(t,C,i);if(!d.contains(D))throw new at(Y.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);GT(A,D)||A.push(D)}p=new En(A),_=d.fieldTransforms.filter(C=>p.covers(C.field))}else p=null,_=d.fieldTransforms;return new Qw(new un(g),p,_)}class _h extends yh{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof _h}}class Zm extends yh{constructor(t,i){super(t),this.Fc=i}_toFieldTransform(t){const i=new Pl(t.serializer,WE(t.serializer,this.Fc));return new zb(t.path,i)}isEqual(t){return t instanceof Zm&&this.Fc===t.Fc}}function Yw(r,t,i,s){const l=r.Cc(1,t,i);Jm("Data must be an object, but it was:",l,s);const c=[],d=un.empty();Kr(s,(p,_)=>{const A=Wm(t,p,i);_=Ge(_);const C=l.yc(A);if(_ instanceof _h)c.push(A);else{const D=vh(_,C);D!=null&&(c.push(A),d.set(A,D))}});const g=new En(c);return new zT(d,g,l.fieldTransforms)}function Xw(r,t,i,s,l,c){const d=r.Cc(1,t,i),g=[hm(t,s,i)],p=[l];if(c.length%2!=0)throw new at(Y.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let D=0;D<c.length;D+=2)g.push(hm(t,c[D])),p.push(c[D+1]);const _=[],A=un.empty();for(let D=g.length-1;D>=0;--D)if(!GT(_,g[D])){const q=g[D];let $=p[D];$=Ge($);const it=d.yc(q);if($ instanceof _h)_.push(q);else{const Z=vh($,it);Z!=null&&(_.push(q),A.set(q,Z))}}const C=new En(_);return new zT(A,C,d.fieldTransforms)}function vh(r,t){if(HT(r=Ge(r)))return Jm("Unsupported field value:",t,r),qT(r,t);if(r instanceof yh)return function(s,l){if(!BT(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)}(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(s,l){const c=[];let d=0;for(const g of s){let p=vh(g,l.wc(d));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),d++}return{arrayValue:{values:c}}}(r,t)}return function(s,l){if((s=Ge(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return WE(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=ne.fromDate(s);return{timestampValue:qc(l.serializer,c)}}if(s instanceof ne){const c=new ne(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:qc(l.serializer,c)}}if(s instanceof hi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Pn)return{bytesValue:uT(l.serializer,s._byteString)};if(s instanceof ge){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Om(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof fi)return function(d,g){return{mapValue:{fields:{[LE]:{stringValue:zE},[Lc]:{arrayValue:{values:d.toArray().map(_=>{if(typeof _!="number")throw g.Sc("VectorValues must only contain numeric values.");return Im(g.serializer,_)})}}}}}}(s,l);throw l.Sc(`Unsupported field value: ${Tm(s)}`)}(r,t)}function qT(r,t){const i={};return VE(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Kr(r,(s,l)=>{const c=vh(l,t.mc(s));c!=null&&(i[s]=c)}),{mapValue:{fields:i}}}function HT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ne||r instanceof hi||r instanceof Pn||r instanceof ge||r instanceof yh||r instanceof fi)}function Jm(r,t,i){if(!HT(i)||!NE(i)){const s=Tm(i);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function hm(r,t,i){if((t=Ge(t))instanceof ph)return t._internalPath;if(typeof t=="string")return Wm(r,t);throw Kc("Field path arguments must be of type string or ",r,!1,void 0,i)}const $w=new RegExp("[~\\*/\\[\\]]");function Wm(r,t,i){if(t.search($w)>=0)throw Kc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,i);try{return new ph(...t.split("."))._internalPath}catch{throw Kc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,i)}}function Kc(r,t,i,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let g=`Function ${t}() called with invalid data`;i&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(c||d)&&(p+=" (found",c&&(p+=` in field ${s}`),d&&(p+=` in document ${l}`),p+=")"),new at(Y.INVALID_ARGUMENT,g+r+p)}function GT(r,t){return r.some(i=>i.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(t,i,s,l,c){this._firestore=t,this._userDataWriter=i,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Zw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(QT("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class Zw extends FT{data(){return super.data()}}function QT(r,t){return typeof t=="string"?Wm(r,t):t instanceof ph?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new at(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jw{convertValue(t,i="none"){switch(Gr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return me(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(Hr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw gt(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const s={};return Kr(t,(l,c)=>{s[l]=this.convertValue(c,i)}),s}convertVectorValue(t){const i=t.fields?.[Lc].arrayValue?.values?.map(s=>me(s.doubleValue));return new fi(i)}convertGeoPoint(t){return new hi(me(t.latitude),me(t.longitude))}convertArray(t,i){return(t.values||[]).map(s=>this.convertValue(s,i))}convertServerTimestamp(t,i){switch(i){case"previous":const s=ih(t);return s==null?null:this.convertValue(s,i);case"estimate":return this.convertTimestamp(Dl(t));default:return null}}convertTimestamp(t){const i=qr(t);return new ne(i.seconds,i.nanos)}convertDocumentKey(t,i){const s=ee.fromString(t);qt(gT(s),9688,{name:t});const l=new Nl(s.get(1),s.get(3)),c=new ht(s.popFirst(5));return l.isEqual(i)||Xi(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(r,t,i){let s;return s=r?r.toFirestore(t):t,s}class El{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class xs extends FT{constructor(t,i,s,l,c,d){super(t,i,s,l,d),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new Dc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const s=this._document.data.field(QT("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new at(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,i={};return i.type=xs._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}xs._jsonSchemaVersion="firestore/documentSnapshot/1.0",xs._jsonSchema={type:Ae("string",xs._jsonSchemaVersion),bundleSource:Ae("string","DocumentSnapshot"),bundleName:Ae("string"),bundle:Ae("string")};class Dc extends xs{data(t={}){return super.data(t)}}class Us{constructor(t,i,s,l){this._firestore=t,this._userDataWriter=i,this._snapshot=l,this.metadata=new El(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach(i=>t.push(i)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach(s=>{t.call(i,new Dc(this._firestore,this._userDataWriter,s.key,s,new El(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new at(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map(g=>{const p=new Dc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new El(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}})}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(g=>c||g.type!==3).map(g=>{const p=new Dc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new El(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let _=-1,A=-1;return g.type!==0&&(_=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),A=d.indexOf(g.doc.key)),{type:Ww(g.type),doc:p,oldIndex:_,newIndex:A}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new at(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Us._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Em.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],s=[],l=[];return this.docs.forEach(c=>{c._document!==null&&(i.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Ww(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(r){r=cn(r,ge);const t=cn(r.firestore,Zi);return Bw(gh(t),r._key).then(i=>XT(t,r,i))}Us._jsonSchemaVersion="firestore/querySnapshot/1.0",Us._jsonSchema={type:Ae("string",Us._jsonSchemaVersion),bundleSource:Ae("string","QuerySnapshot"),bundleName:Ae("string"),bundle:Ae("string")};class tg extends Jw{constructor(t){super(),this.firestore=t}convertBytes(t){return new Pn(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new ge(this.firestore,null,i)}}function eg(r){r=cn(r,Hl);const t=cn(r.firestore,Zi),i=gh(t),s=new tg(t);return KT(r._query),jw(i,r._query).then(l=>new Us(t,s,r,l))}function tI(r,t,i){r=cn(r,ge);const s=cn(r.firestore,Zi),l=YT(r.converter,t);return Eh(s,[jT($m(s),"setDoc",r._key,l,r.converter!==null,i).toMutation(r._key,xn.none())])}function Nr(r,t,i,...s){r=cn(r,ge);const l=cn(r.firestore,Zi),c=$m(l);let d;return d=typeof(t=Ge(t))=="string"||t instanceof ph?Xw(c,"updateDoc",r._key,t,i,s):Yw(c,"updateDoc",r._key,t),Eh(l,[d.toMutation(r._key,xn.exists(!0))])}function qv(r){return Eh(cn(r.firestore,Zi),[new Cm(r._key,xn.none())])}function ng(r,t){const i=cn(r.firestore,Zi),s=on(r),l=YT(r.converter,t);return Eh(i,[jT($m(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,xn.exists(!1))]).then(()=>s)}function jd(r,...t){r=Ge(r);let i={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||Bv(t[s])||(i=t[s++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Bv(t[s])){const p=t[s];t[s]=p.next?.bind(p),t[s+1]=p.error?.bind(p),t[s+2]=p.complete?.bind(p)}let c,d,g;if(r instanceof ge)d=cn(r.firestore,Zi),g=sh(r._key.path),c={next:p=>{t[s]&&t[s](XT(d,r,p))},error:t[s+1],complete:t[s+2]};else{const p=cn(r,Hl);d=cn(p.firestore,Zi),g=p._query;const _=new tg(d);c={next:A=>{t[s]&&t[s](new Us(d,_,p,A))},error:t[s+1],complete:t[s+2]},KT(r._query)}return function(_,A,C,D){const q=new Ym(D),$=new Fm(A,q,C);return _.asyncQueue.enqueueAndForget(async()=>qm(await Qc(_),$)),()=>{q.Nu(),_.asyncQueue.enqueueAndForget(async()=>Hm(await Qc(_),$))}}(gh(d),g,l,c)}function Eh(r,t){return function(s,l){const c=new Ki;return s.asyncQueue.enqueueAndForget(async()=>Cw(await zw(s),l,c)),c.promise}(gh(r),t)}function XT(r,t,i){const s=i.docs.get(t._key),l=new tg(r);return new xs(r,l,t._key,s,new El(i.hasPendingWrites,i.fromCache),t.converter)}function Hi(r){return new Zm("increment",r)}(function(t,i=!0){(function(l){eo=l})(to),Fa(new zs("firestore",(s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),g=new Zi(new Y1(s.getProvider("auth-internal")),new Z1(d,s.getProvider("app-check-internal")),function(_,A){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new at(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nl(_.options.projectId,A)}(d,l),d);return c={useFetchStreams:i,...c},g._setSettings(c),g},"PUBLIC").setMultipleInstances(!0)),kr(F_,Q_,t),kr(F_,Q_,"esm2020")})();var eI="firebase",nI="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kr(eI,nI,"app");function $T(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iI=$T,ZT=new Ul("auth","Firebase",$T());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=new pm("@firebase/auth");function rI(r,...t){Yc.logLevel<=Dt.WARN&&Yc.warn(`Auth (${to}): ${r}`,...t)}function Nc(r,...t){Yc.logLevel<=Dt.ERROR&&Yc.error(`Auth (${to}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(r,...t){throw rg(r,...t)}function Gn(r,...t){return rg(r,...t)}function ig(r,t,i){const s={...iI(),[t]:i};return new Ul("auth","Firebase",s).create(t,{appName:r.name})}function ks(r){return ig(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sI(r,t,i){const s=i;if(!(t instanceof s))throw s.name!==t.constructor.name&&pi(r,"argument-error"),ig(r,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rg(r,...t){if(typeof r!="string"){const i=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(i,...s)}return ZT.create(r,...t)}function _t(r,t,...i){if(!r)throw rg(t,...i)}function Fi(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Nc(t),new Error(t)}function Ji(r,t){r||Fi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(){return typeof self<"u"&&self.location?.href||""}function aI(){return Hv()==="http:"||Hv()==="https:"}function Hv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aI()||RS()||"connection"in navigator)?navigator.onLine:!0}function lI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(t,i){this.shortDelay=t,this.longDelay=i,Ji(i>t,"Short delay should be less than long delay!"),this.isMobile=AS()||wS()}get(){return oI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(r,t){Ji(r.emulator,"Emulator should always be set here");const{url:i}=r.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{static initialize(t,i,s){this.fetchImpl=t,i&&(this.headersImpl=i),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hI=new Gl(3e4,6e4);function ag(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function so(r,t,i,s,l={}){return WT(r,l,async()=>{let c={},d={};s&&(t==="GET"?d=s:c={body:JSON.stringify(s)});const g=kl({key:r.config.apiKey,...d}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const _={method:t,headers:p,...c};return bS()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&Wa(r.emulatorConfig.host)&&(_.credentials="include"),JT.fetch()(await t0(r,r.config.apiHost,i,g),_)})}async function WT(r,t,i){r._canInitEmulator=!1;const s={...uI,...t};try{const l=new dI(r),c=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Ac(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const g=c.ok?d.errorMessage:d.error.message,[p,_]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ac(r,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw Ac(r,"email-already-in-use",d);if(p==="USER_DISABLED")throw Ac(r,"user-disabled",d);const A=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw ig(r,A,_);pi(r,A)}}catch(l){if(l instanceof Wi)throw l;pi(r,"network-request-failed",{message:String(l)})}}async function fI(r,t,i,s,l={}){const c=await so(r,t,i,s,l);return"mfaPendingCredential"in c&&pi(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function t0(r,t,i,s){const l=`${t}${i}?${s}`,c=r,d=c.config.emulator?sg(r.config,l):`${r.config.apiScheme}://${l}`;return cI.includes(i)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class dI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,s)=>{this.timer=setTimeout(()=>s(Gn(this.auth,"network-request-failed")),hI.get())})}}function Ac(r,t,i){const s={appName:r.name};i.email&&(s.email=i.email),i.phoneNumber&&(s.phoneNumber=i.phoneNumber);const l=Gn(r,t,s);return l.customData._tokenResponse=i,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mI(r,t){return so(r,"POST","/v1/accounts:delete",t)}async function Xc(r,t){return so(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function gI(r,t=!1){const i=Ge(r),s=await i.getIdToken(t),l=og(s);_t(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:s,authTime:wl(qd(l.auth_time)),issuedAtTime:wl(qd(l.iat)),expirationTime:wl(qd(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function qd(r){return Number(r)*1e3}function og(r){const[t,i,s]=r.split(".");if(t===void 0||i===void 0||s===void 0)return Nc("JWT malformed, contained fewer than 3 sections"),null;try{const l=uE(i);return l?JSON.parse(l):(Nc("Failed to decode base64 JWT payload"),null)}catch(l){return Nc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function Gv(r){const t=og(r);return _t(t,"internal-error"),_t(typeof t.exp<"u","internal-error"),_t(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(r,t,i=!1){if(i)return t;try{return await t}catch(s){throw s instanceof Wi&&pI(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function pI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=wl(this.lastLoginAt),this.creationTime=wl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $c(r){const t=r.auth,i=await r.getIdToken(),s=await xl(r,Xc(t,{idToken:i}));_t(s?.users.length,t,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=l.providerUserInfo?.length?e0(l.providerUserInfo):[],d=vI(r.providerData,c),g=r.isAnonymous,p=!(r.email&&l.passwordHash)&&!d?.length,_=g?p:!1,A={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new dm(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(r,A)}async function _I(r){const t=Ge(r);await $c(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function vI(r,t){return[...r.filter(s=>!t.some(l=>l.providerId===s.providerId)),...t]}function e0(r){return r.map(({providerId:t,...i})=>({providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(r,t){const i=await WT(r,{},async()=>{const s=kl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await t0(r,l,"/v1/token",`key=${c}`),g=await r._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:s};return r.emulatorConfig&&Wa(r.emulatorConfig.host)&&(p.credentials="include"),JT.fetch()(d,p)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function TI(r,t){return so(r,"POST","/v2/accounts:revokeToken",ag(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){_t(t.idToken,"internal-error"),_t(typeof t.idToken<"u","internal-error"),_t(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Gv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){_t(t.length!==0,"internal-error");const i=Gv(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(_t(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:s,refreshToken:l,expiresIn:c}=await EI(t,i);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(t,i,s){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,i){const{refreshToken:s,accessToken:l,expirationTime:c}=i,d=new qa;return s&&(_t(typeof s=="string","internal-error",{appName:t}),d.refreshToken=s),l&&(_t(typeof l=="string","internal-error",{appName:t}),d.accessToken=l),c&&(_t(typeof c=="number","internal-error",{appName:t}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new qa,this.toJSON())}_performRefresh(){return Fi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(r,t){_t(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Hn{constructor({uid:t,auth:i,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new yI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new dm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const i=await xl(this,this.stsTokenManager.getToken(this.auth,t));return _t(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return gI(this,t)}reload(){return _I(this)}_assign(t){this!==t&&(_t(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>({...i})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new Hn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(t){_t(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),i&&await $c(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qn(this.auth.app))return Promise.reject(ks(this.auth));const t=await this.getIdToken();return await xl(this,mI(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){const s=i.displayName??void 0,l=i.email??void 0,c=i.phoneNumber??void 0,d=i.photoURL??void 0,g=i.tenantId??void 0,p=i._redirectEventId??void 0,_=i.createdAt??void 0,A=i.lastLoginAt??void 0,{uid:C,emailVerified:D,isAnonymous:q,providerData:$,stsTokenManager:it}=i;_t(C&&it,t,"internal-error");const Z=qa.fromJSON(this.name,it);_t(typeof C=="string",t,"internal-error"),Dr(s,t.name),Dr(l,t.name),_t(typeof D=="boolean",t,"internal-error"),_t(typeof q=="boolean",t,"internal-error"),Dr(c,t.name),Dr(d,t.name),Dr(g,t.name),Dr(p,t.name),Dr(_,t.name),Dr(A,t.name);const yt=new Hn({uid:C,auth:t,email:l,emailVerified:D,displayName:s,isAnonymous:q,photoURL:d,phoneNumber:c,tenantId:g,stsTokenManager:Z,createdAt:_,lastLoginAt:A});return $&&Array.isArray($)&&(yt.providerData=$.map(mt=>({...mt}))),p&&(yt._redirectEventId=p),yt}static async _fromIdTokenResponse(t,i,s=!1){const l=new qa;l.updateFromServerResponse(i);const c=new Hn({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:s});return await $c(c),c}static async _fromGetAccountInfoResponse(t,i,s){const l=i.users[0];_t(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?e0(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,g=new qa;g.updateFromIdToken(s);const p=new Hn({uid:l.localId,auth:t,stsTokenManager:g,isAnonymous:d}),_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new dm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(p,_),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=new Map;function Qi(r){Ji(r instanceof Function,"Expected a class definition");let t=Fv.get(r);return t?(Ji(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,Fv.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}n0.type="NONE";const Qv=n0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(r,t,i){return`firebase:${r}:${t}:${i}`}class Ha{constructor(t,i,s){this.persistence=t,this.auth=i,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=Oc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Oc("persistence",l.apiKey,c),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await Xc(this.auth,{idToken:t}).catch(()=>{});return i?Hn._fromGetAccountInfoResponse(this.auth,i,t):null}return Hn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,s="authUser"){if(!i.length)return new Ha(Qi(Qv),t,s);const l=(await Promise.all(i.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=l[0]||Qi(Qv);const d=Oc(s,t.config.apiKey,t.name);let g=null;for(const _ of i)try{const A=await _._get(d);if(A){let C;if(typeof A=="string"){const D=await Xc(t,{idToken:A}).catch(()=>{});if(!D)break;C=await Hn._fromGetAccountInfoResponse(t,D,A)}else C=Hn._fromJSON(t,A);_!==c&&(g=C),c=_;break}}catch{}const p=l.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new Ha(c,t,s):(c=p[0],g&&await c._set(d,g.toJSON()),await Promise.all(i.map(async _=>{if(_!==c)try{await _._remove(d)}catch{}})),new Ha(c,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(a0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(i0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(l0(t))return"Blackberry";if(u0(t))return"Webos";if(r0(t))return"Safari";if((t.includes("chrome/")||s0(t))&&!t.includes("edge/"))return"Chrome";if(o0(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(i);if(s?.length===2)return s[1]}return"Other"}function i0(r=Je()){return/firefox\//i.test(r)}function r0(r=Je()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function s0(r=Je()){return/crios\//i.test(r)}function a0(r=Je()){return/iemobile/i.test(r)}function o0(r=Je()){return/android/i.test(r)}function l0(r=Je()){return/blackberry/i.test(r)}function u0(r=Je()){return/webos/i.test(r)}function lg(r=Je()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function AI(r=Je()){return lg(r)&&!!window.navigator?.standalone}function SI(){return IS()&&document.documentMode===10}function c0(r=Je()){return lg(r)||o0(r)||u0(r)||l0(r)||/windows phone/i.test(r)||a0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(r,t=[]){let i;switch(r){case"Browser":i=Kv(Je());break;case"Worker":i=`${Kv(Je())}-${r}`;break;default:i=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${to}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const s=c=>new Promise((d,g)=>{try{const p=t(c);d(p)}catch(p){g(p)}});s.onAbort=i,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const s of this.queue)await s(t),s.onAbort&&i.push(s.onAbort)}catch(s){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RI(r,t={}){return so(r,"GET","/v2/passwordPolicy",ag(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=6;class II{constructor(t){const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??wI,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,i),this.validatePasswordCharacterOptions(t,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(t,i){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(i.meetsMinPasswordLength=t.length>=s),l&&(i.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let s;for(let l=0;l<t.length;l++)s=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,i,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(t,i,s,l){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yv(this),this.idTokenSubscription=new Yv(this),this.beforeStateQueue=new bI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=Qi(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ha.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await Xc(this,{idToken:t}),s=await Hn._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(s)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(qn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,g=await this.tryRedirectSignIn(t);(!c||c===d)&&g?.user&&(s=g.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return _t(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await $c(t)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=lI()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(qn(this.app))return Promise.reject(ks(this));const i=t?Ge(t):null;return i&&_t(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&_t(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return qn(this.app)?Promise.reject(ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return qn(this.app)?Promise.reject(ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await RI(this),i=new II(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Ul("auth","Firebase",t())}onAuthStateChanged(t,i,s){return this.registerStateListener(this.authStateSubscription,t,i,s)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,s){return this.registerStateListener(this.idTokenSubscription,t,i,s)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(s.tenantId=this.tenantId),await TI(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,i){const s=await this.getOrInitRedirectPersistenceManager(i);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&Qi(t)||this._popupRedirectResolver;_t(i,this,"argument-error"),this.redirectPersistenceManager=await Ha.create(this,[Qi(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,s,l){if(this._deleted)return()=>{};const c=typeof i=="function"?i:i.next.bind(i);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(_t(g,this,"internal-error"),g.then(()=>{d||c(this.currentUser)}),typeof i=="function"){const p=t.addObserver(i,s,l);return()=>{d=!0,p()}}else{const p=t.addObserver(i);return()=>{d=!0,p()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return _t(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=h0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&rI(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Th(r){return Ge(r)}class Yv{constructor(t){this.auth=t,this.observer=null,this.addObserver=xS(i=>this.observer=i)}get next(){return _t(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ug={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DI(r){ug=r}function NI(r){return ug.loadJS(r)}function OI(){return ug.gapiScript}function VI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(r,t){const i=_m(r,"auth");if(i.isInitialized()){const l=i.getImmediate(),c=i.getOptions();if(Ls(c,t??{}))return l;pi(l,"already-initialized")}return i.initialize({options:t})}function PI(r,t){const i=t?.persistence||[],s=(Array.isArray(i)?i:[i]).map(Qi);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function xI(r,t,i){const s=Th(r);_t(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const l=!1,c=f0(t),{host:d,port:g}=UI(t),p=g===null?"":`:${g}`,_={url:`${c}//${d}${p}/`},A=Object.freeze({host:d,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){_t(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),_t(Ls(_,s.config.emulator)&&Ls(A,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=A,s.settings.appVerificationDisabledForTesting=!0,Wa(d)?(dE(`${c}//${d}${p}`),mE("Auth",!0)):kI()}function f0(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function UI(r){const t=f0(r),i=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!i)return{host:"",port:null};const s=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:Xv(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:Xv(d)}}}function Xv(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function kI(){function r(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return Fi("not implemented")}_getIdTokenResponse(t){return Fi("not implemented")}_linkToIdToken(t,i){return Fi("not implemented")}_getReauthenticationResolver(t){return Fi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(r,t){return fI(r,"POST","/v1/accounts:signInWithIdp",ag(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI="http://localhost";class qs extends d0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new qs(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):pi("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:l,...c}=i;if(!s||!l)return null;const d=new qs(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(t){const i=this.buildRequest();return Ga(t,i)}_linkToIdToken(t,i){const s=this.buildRequest();return s.idToken=i,Ga(t,s)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,Ga(t,i)}buildRequest(){const t={requestUri:LI,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=kl(i)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl extends cg{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends Fl{constructor(){super("facebook.com")}static credential(t){return qs._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Or.credentialFromTaggedObject(t)}static credentialFromError(t){return Or.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Or.credential(t.oauthAccessToken)}catch{return null}}}Or.FACEBOOK_SIGN_IN_METHOD="facebook.com";Or.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends Fl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return qs._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return Gi.credentialFromTaggedObject(t)}static credentialFromError(t){return Gi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:s}=t;if(!i&&!s)return null;try{return Gi.credential(i,s)}catch{return null}}}Gi.GOOGLE_SIGN_IN_METHOD="google.com";Gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Fl{constructor(){super("github.com")}static credential(t){return qs._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Vr.credentialFromTaggedObject(t)}static credentialFromError(t){return Vr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Vr.credential(t.oauthAccessToken)}catch{return null}}}Vr.GITHUB_SIGN_IN_METHOD="github.com";Vr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends Fl{constructor(){super("twitter.com")}static credential(t,i){return qs._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return Mr.credentialFromTaggedObject(t)}static credentialFromError(t){return Mr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:s}=t;if(!i||!s)return null;try{return Mr.credential(i,s)}catch{return null}}}Mr.TWITTER_SIGN_IN_METHOD="twitter.com";Mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,s,l=!1){const c=await Hn._fromIdTokenResponse(t,s,l),d=$v(s);return new Ja({user:c,providerId:d,_tokenResponse:s,operationType:i})}static async _forOperation(t,i,s){await t._updateTokensIfNecessary(s,!0);const l=$v(s);return new Ja({user:t,providerId:l,_tokenResponse:s,operationType:i})}}function $v(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends Wi{constructor(t,i,s,l){super(i.code,i.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Zc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,i,s,l){return new Zc(t,i,s,l)}}function m0(r,t,i,s){return(t==="reauthenticate"?i._getReauthenticationResolver(r):i._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Zc._fromErrorAndOperation(r,c,t,s):c})}async function zI(r,t,i=!1){const s=await xl(r,t._linkToIdToken(r.auth,await r.getIdToken()),i);return Ja._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BI(r,t,i=!1){const{auth:s}=r;if(qn(s.app))return Promise.reject(ks(s));const l="reauthenticate";try{const c=await xl(r,m0(s,l,t,r),i);_t(c.idToken,s,"internal-error");const d=og(c.idToken);_t(d,s,"internal-error");const{sub:g}=d;return _t(r.uid===g,s,"user-mismatch"),Ja._forOperation(r,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&pi(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jI(r,t,i=!1){if(qn(r.app))return Promise.reject(ks(r));const s="signIn",l=await m0(r,s,t),c=await Ja._fromIdTokenResponse(r,s,l);return i||await r._updateCurrentUser(c.user),c}function qI(r,t,i,s){return Ge(r).onIdTokenChanged(t,i,s)}function HI(r,t,i){return Ge(r).beforeAuthStateChanged(t,i)}function GI(r,t,i,s){return Ge(r).onAuthStateChanged(t,i,s)}function Zv(r){return Ge(r).signOut()}const Jc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(Jc,"1"),this.storage.removeItem(Jc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=1e3,QI=10;class p0 extends g0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=c0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const s=this.storage.getItem(i),l=this.localCache[i];s!==l&&t(i,l,s)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((d,g,p)=>{this.notifyListeners(d,p)});return}const s=t.key;i?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!i&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);SI()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,QI):l()}notifyListeners(t,i){this.localCache[t]=i;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:s}),!0)})},FI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}p0.type="LOCAL";const KI=p0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0 extends g0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}y0.type="SESSION";const _0=y0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(l=>l.isListeningto(t));if(i)return i;const s=new Ah(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:s,eventType:l,data:c}=i.data,d=this.handlersMap[l];if(!d?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const g=Array.from(d).map(async _=>_(i.origin,c)),p=await YI(g);i.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:p})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ah.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(r="",t=10){let i="";for(let s=0;s<t;s++)i+=Math.floor(Math.random()*10);return r+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((g,p)=>{const _=hg("",20);l.port1.start();const A=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(C){const D=C;if(D.data.eventId===_)switch(D.data.status){case"ack":clearTimeout(A),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(D.data.response);break;default:clearTimeout(A),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:_,data:i},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(){return window}function $I(r){di().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(){return typeof di().WorkerGlobalScope<"u"&&typeof di().importScripts=="function"}async function ZI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JI(){return navigator?.serviceWorker?.controller||null}function WI(){return v0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="firebaseLocalStorageDb",tC=1,Wc="firebaseLocalStorage",T0="fbase_key";class Ql{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function Sh(r,t){return r.transaction([Wc],t?"readwrite":"readonly").objectStore(Wc)}function eC(){const r=indexedDB.deleteDatabase(E0);return new Ql(r).toPromise()}function mm(){const r=indexedDB.open(E0,tC);return new Promise((t,i)=>{r.addEventListener("error",()=>{i(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Wc,{keyPath:T0})}catch(l){i(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Wc)?t(s):(s.close(),await eC(),t(await mm()))})})}async function Jv(r,t,i){const s=Sh(r,!0).put({[T0]:t,value:i});return new Ql(s).toPromise()}async function nC(r,t){const i=Sh(r,!1).get(t),s=await new Ql(i).toPromise();return s===void 0?null:s.value}function Wv(r,t){const i=Sh(r,!0).delete(t);return new Ql(i).toPromise()}const iC=800,rC=3;class A0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mm(),this.db)}async _withRetries(t){let i=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(i++>rC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return v0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ah._getInstance(WI()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await ZI(),!this.activeServiceWorker)return;this.sender=new XI(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||JI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await mm();return await Jv(t,Jc,"1"),await Wv(t,Jc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(s=>Jv(s,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(s=>nC(s,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Wv(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=Sh(l,!1).getAll();return new Ql(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],s=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(t,i){this.localCache[t]=i;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}A0.type="LOCAL";const sC=A0;new Gl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(r,t){return t?Qi(t):(_t(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg extends d0{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ga(t,this._buildIdpRequest())}_linkToIdToken(t,i){return Ga(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return Ga(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function aC(r){return jI(r.auth,new fg(r),r.bypassAuthState)}function oC(r){const{auth:t,user:i}=r;return _t(i,t,"internal-error"),BI(i,new fg(r),r.bypassAuthState)}async function lC(r){const{auth:t,user:i}=r;return _t(i,t,"internal-error"),zI(i,new fg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(t,i,s,l,c=!1){this.auth=t,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:s,postBody:l,tenantId:c,error:d,type:g}=t;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:i,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(_){this.reject(_)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return aC;case"linkViaPopup":case"linkViaRedirect":return lC;case"reauthViaPopup":case"reauthViaRedirect":return oC;default:pi(this.auth,"internal-error")}}resolve(t){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=new Gl(2e3,1e4);async function cC(r,t,i){if(qn(r.app))return Promise.reject(Gn(r,"operation-not-supported-in-this-environment"));const s=Th(r);sI(r,t,cg);const l=S0(s,i);return new Ps(s,"signInViaPopup",t,l).executeNotNull()}class Ps extends b0{constructor(t,i,s,l,c){super(t,i,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Ps.currentPopupAction&&Ps.currentPopupAction.cancel(),Ps.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return _t(t,this.auth,"internal-error"),t}async onExecution(){Ji(this.filter.length===1,"Popup operations only handle one event");const t=hg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ps.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,uC.get())};t()}}Ps.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="pendingRedirect",Vc=new Map;class fC extends b0{constructor(t,i,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,s),this.eventId=null}async execute(){let t=Vc.get(this.auth._key());if(!t){try{const s=await dC(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(i){t=()=>Promise.reject(i)}Vc.set(this.auth._key(),t)}return this.bypassAuthState||Vc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dC(r,t){const i=pC(t),s=gC(r);if(!await s._isAvailable())return!1;const l=await s._get(i)==="true";return await s._remove(i),l}function mC(r,t){Vc.set(r._key(),t)}function gC(r){return Qi(r._redirectPersistence)}function pC(r){return Oc(hC,r.config.apiKey,r.name)}async function yC(r,t,i=!1){if(qn(r.app))return Promise.reject(ks(r));const s=Th(r),l=S0(s,t),d=await new fC(s,l,i).execute();return d&&!i&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=600*1e3;class vC{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(i=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!EC(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){if(t.error&&!R0(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";i.onError(Gn(this.auth,s))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const s=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=_C&&this.cachedEventUids.clear(),this.cachedEventUids.has(tE(t))}saveEventToCache(t){this.cachedEventUids.add(tE(t)),this.lastProcessedEventTime=Date.now()}}function tE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function R0({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function EC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return R0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(r,t={}){return so(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SC=/^https?/;async function bC(r){if(r.config.emulator)return;const{authorizedDomains:t}=await TC(r);for(const i of t)try{if(RC(i))return}catch{}pi(r,"unauthorized-domain")}function RC(r){const t=fm(),{protocol:i,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?i==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&d.hostname===s}if(!SC.test(i))return!1;if(AC.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=new Gl(3e4,6e4);function eE(){const r=di().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let i=0;i<r.CP.length;i++)r.CP[i]=null}}function IC(r){return new Promise((t,i)=>{function s(){eE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{eE(),i(Gn(r,"network-request-failed"))},timeout:wC.get()})}if(di().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(di().gapi?.load)s();else{const l=VI("iframefcb");return di()[l]=()=>{gapi.load?s():i(Gn(r,"network-request-failed"))},NI(`${OI()}?onload=${l}`).catch(c=>i(c))}}).catch(t=>{throw Mc=null,t})}let Mc=null;function CC(r){return Mc=Mc||IC(r),Mc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=new Gl(5e3,15e3),NC="__/auth/iframe",OC="emulator/auth/iframe",VC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PC(r){const t=r.config;_t(t.authDomain,r,"auth-domain-config-required");const i=t.emulator?sg(t,OC):`https://${r.config.authDomain}/${NC}`,s={apiKey:t.apiKey,appName:r.name,v:to},l=MC.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${i}?${kl(s).slice(1)}`}async function xC(r){const t=await CC(r),i=di().gapi;return _t(i,r,"internal-error"),t.open({where:document.body,url:PC(r),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VC,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=Gn(r,"network-request-failed"),g=di().setTimeout(()=>{c(d)},DC.get());function p(){di().clearTimeout(g),l(s)}s.ping(p).then(p,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kC=500,LC=600,zC="_blank",BC="http://localhost";class nE{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jC(r,t,i,s=kC,l=LC){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const p={...UC,width:s.toString(),height:l.toString(),top:c,left:d},_=Je().toLowerCase();i&&(g=s0(_)?zC:i),i0(_)&&(t=t||BC,p.scrollbars="yes");const A=Object.entries(p).reduce((D,[q,$])=>`${D}${q}=${$},`,"");if(AI(_)&&g!=="_self")return qC(t||"",g),new nE(null);const C=window.open(t||"",g,A);_t(C,r,"popup-blocked");try{C.focus()}catch{}return new nE(C)}function qC(r,t){const i=document.createElement("a");i.href=r,i.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="__/auth/handler",GC="emulator/auth/handler",FC=encodeURIComponent("fac");async function iE(r,t,i,s,l,c){_t(r.config.authDomain,r,"auth-domain-config-required"),_t(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:i,redirectUrl:s,v:to,eventId:l};if(t instanceof cg){t.setDefaultLanguage(r.languageCode),d.providerId=t.providerId||"",PS(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[A,C]of Object.entries({}))d[A]=C}if(t instanceof Fl){const A=t.getScopes().filter(C=>C!=="");A.length>0&&(d.scopes=A.join(","))}r.tenantId&&(d.tid=r.tenantId);const g=d;for(const A of Object.keys(g))g[A]===void 0&&delete g[A];const p=await r._getAppCheckToken(),_=p?`#${FC}=${encodeURIComponent(p)}`:"";return`${QC(r)}?${kl(g).slice(1)}${_}`}function QC({config:r}){return r.emulator?sg(r,GC):`https://${r.authDomain}/${HC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="webStorageSupport";class KC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_0,this._completeRedirectFn=yC,this._overrideRedirectResult=mC}async _openPopup(t,i,s,l){Ji(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const c=await iE(t,i,s,fm(),l);return jC(t,c,hg())}async _openRedirect(t,i,s,l){await this._originValidation(t);const c=await iE(t,i,s,fm(),l);return $I(c),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:l,promise:c}=this.eventManagers[i];return l?Promise.resolve(l):(Ji(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(t);return this.eventManagers[i]={promise:s},s.catch(()=>{delete this.eventManagers[i]}),s}async initAndGetManager(t){const i=await xC(t),s=new vC(t);return i.register("authEvent",l=>(_t(l?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=i,s}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(Hd,{type:Hd},l=>{const c=l?.[0]?.[Hd];c!==void 0&&i(!!c),pi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=bC(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return c0()||r0()||lg()}}const YC=KC;var rE="@firebase/auth",sE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){_t(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZC(r){Fa(new zs("auth",(t,{options:i})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=s.options;_t(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:h0(r)},_=new CI(s,l,c,p);return PI(_,i),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,s)=>{t.getProvider("auth-internal").initialize()})),Fa(new zs("auth-internal",t=>{const i=Th(t.getProvider("auth").getImmediate());return(s=>new XC(s))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),kr(rE,sE,$C(r)),kr(rE,sE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=300,WC=fE("authIdTokenMaxAge")||JC;let aE=null;const t2=r=>async t=>{const i=t&&await t.getIdTokenResult(),s=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(s&&s>WC)return;const l=i?.token;aE!==l&&(aE=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function e2(r=_E()){const t=_m(r,"auth");if(t.isInitialized())return t.getImmediate();const i=MI(r,{popupRedirectResolver:YC,persistence:[sC,KI,_0]}),s=fE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=t2(c.toString());HI(i,d,()=>d(i.currentUser)),qI(i,g=>d(g))}}const l=cE("auth");return l&&xI(i,`http://${l}`),i}function n2(){return document.getElementsByTagName("head")?.[0]??document}DI({loadJS(r){return new Promise((t,i)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=l=>{const c=Gn("internal-error");c.customData=l,i(c)},s.type="text/javascript",s.charset="UTF-8",n2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZC("Browser");const i2={apiKey:"AIzaSyB6KWYhH9z54hpi5rsOPdcpvD31E2M91zQ",authDomain:"claus-ventas.firebaseapp.com",projectId:"claus-ventas",storageBucket:"claus-ventas.firebasestorage.app",messagingSenderId:"262172061520",appId:"1:262172061520:web:9085214cad694ef2e98655"},w0=yE(i2),Te=Hw(w0),Sc=e2(w0),r2=new Gi;function s2({go:r}){const[t,i]=Jt.useState([]);return Jt.useEffect(()=>{(async()=>{const l=await eg(Br(Te,"clients"));i(l.docs.map(c=>({id:c.id,...c.data()})))})()},[]),tt.jsxs("div",{children:[tt.jsx("h2",{children:"Clientes"}),tt.jsx("ul",{className:"list",children:t.map(s=>tt.jsxs("li",{children:[tt.jsx("button",{onClick:()=>r("client",s.id),children:s.name})," - deuda: $",s.balance||0]},s.id))})]})}function a2({go:r}){const[t,i]=Jt.useState(""),[s,l]=Jt.useState(""),[c,d]=Jt.useState(""),g=async p=>{p.preventDefault(),await ng(Br(Te,"clients"),{name:t,phone:s,notes:c,balance:0}),r("list")};return tt.jsxs("form",{onSubmit:g,children:[tt.jsx("h2",{children:"Nuevo Cliente"}),tt.jsx("input",{value:t,onChange:p=>i(p.target.value),placeholder:"Nombre",required:!0}),tt.jsx("input",{value:s,onChange:p=>l(p.target.value),placeholder:"Teléfono",pattern:"\\(\\d{3}\\) \\d{3} \\d{4}"}),tt.jsx("input",{value:c,onChange:p=>d(p.target.value),placeholder:"Observaciones"}),tt.jsx("button",{type:"submit",children:"Guardar"})]})}function o2({id:r,go:t}){const[i,s]=Jt.useState(null),[l,c]=Jt.useState([]),[d,g]=Jt.useState([]),[p,_]=Jt.useState(""),[A,C]=Jt.useState(null),[D,q]=Jt.useState(""),[$,it]=Jt.useState(null),[Z,yt]=Jt.useState("");Jt.useEffect(()=>{const w=jd(on(Te,"clients",r),ie=>{s({id:ie.id,...ie.data()})}),V=jd(Br(Te,"clients",r,"payments"),ie=>{c(ie.docs.map(Qt=>({id:Qt.id,...Qt.data()})))}),R=jd(Br(Te,"clients",r,"sales"),ie=>{g(ie.docs.map(Qt=>({id:Qt.id,...Qt.data()})))});return()=>{w(),V(),R()}},[r]);const mt=async w=>{if(w.preventDefault(),!p)return;const V=parseFloat(p);await ng(Br(Te,"clients",r,"payments"),{amount:V,date:Date.now()}),await Nr(on(Te,"clients",r),{balance:Hi(-V)}),_("")},ut=w=>{C(w.id),q(w.amount)},Ut=()=>{C(null),q("")},Et=async w=>{const V=parseFloat(D);if(isNaN(V))return;await Nr(on(Te,"clients",r,"payments",w.id),{amount:V});const R=V-w.amount;R!==0&&await Nr(on(Te,"clients",r),{balance:Hi(-R)}),Ut()},kt=async w=>{await qv(on(Te,"clients",r,"payments",w.id)),await Nr(on(Te,"clients",r),{balance:Hi(w.amount)})},P=w=>{it(w.id),yt(w.amount)},S=()=>{it(null),yt("")},I=async w=>{const V=parseFloat(Z);if(isNaN(V))return;await Nr(on(Te,"clients",r,"sales",w.id),{amount:V});const R=V-w.amount;R!==0&&await Nr(on(Te,"clients",r),{balance:Hi(R),total:Hi(R)}),S()},M=async w=>{await qv(on(Te,"clients",r,"sales",w.id)),await Nr(on(Te,"clients",r),{balance:Hi(-w.amount),total:Hi(-w.amount)})};return i?tt.jsxs("div",{children:[tt.jsx("button",{onClick:()=>t("list"),children:"Regresar"}),tt.jsx("h2",{children:i.name}),tt.jsxs("p",{children:["Teléfono: ",i.phone]}),i.notes&&tt.jsxs("p",{children:["Observaciones: ",i.notes]}),tt.jsxs("p",{children:["Deuda actual: $",i.balance||0]}),tt.jsxs("form",{onSubmit:mt,children:[tt.jsx("input",{value:p,onChange:w=>_(w.target.value),placeholder:"Monto del abono",type:"number",step:"0.01"}),tt.jsx("button",{type:"submit",children:"Registrar abono"})]}),tt.jsx("h3",{children:"Ventas"}),tt.jsx("ul",{className:"list",children:d.map(w=>tt.jsx("li",{children:$===w.id?tt.jsxs(tt.Fragment,{children:[tt.jsx("input",{type:"number",step:"0.01",value:Z,onChange:V=>yt(V.target.value)}),tt.jsx("button",{onClick:()=>I(w),children:"Guardar"}),tt.jsx("button",{onClick:S,children:"Cancelar"})]}):tt.jsxs(tt.Fragment,{children:[new Date(w.date).toLocaleDateString()," - $",w.amount,tt.jsx("button",{onClick:()=>P(w),children:"Editar"}),tt.jsx("button",{onClick:()=>M(w),children:"Eliminar"})]})},w.id))}),tt.jsx("h3",{children:"Abonos"}),tt.jsx("ul",{className:"list",children:l.map(w=>tt.jsx("li",{children:A===w.id?tt.jsxs(tt.Fragment,{children:[tt.jsx("input",{type:"number",step:"0.01",value:D,onChange:V=>q(V.target.value)}),tt.jsx("button",{onClick:()=>Et(w),children:"Guardar"}),tt.jsx("button",{onClick:Ut,children:"Cancelar"})]}):tt.jsxs(tt.Fragment,{children:[new Date(w.date).toLocaleDateString()," - $",w.amount,tt.jsx("button",{onClick:()=>ut(w),children:"Editar"}),tt.jsx("button",{onClick:()=>kt(w),children:"Eliminar"})]})},w.id))})]}):tt.jsx("p",{children:"Cargando..."})}function l2(){const[r,t]=Jt.useState({total:0,outstanding:0});return Jt.useEffect(()=>{(async()=>{const s=await eg(Br(Te,"clients"));let l=0,c=0;s.forEach(d=>{const g=d.data();l+=g.total||0,c+=g.balance||0}),t({total:l,outstanding:c})})()},[]),tt.jsxs("div",{children:[tt.jsx("h2",{children:"Reporte Financiero"}),tt.jsxs("p",{children:["Total ventas: $",r.total]}),tt.jsxs("p",{children:["Saldo pendiente: $",r.outstanding]})]})}function u2({go:r}){const[t,i]=Jt.useState([]),[s,l]=Jt.useState(""),[c,d]=Jt.useState("");Jt.useEffect(()=>{(async()=>{const _=await eg(Br(Te,"clients"));i(_.docs.map(A=>({id:A.id,...A.data()})))})()},[]);const g=async p=>{if(p.preventDefault(),!s||!c)return;const _=parseFloat(c),A=on(Te,"clients",s);await ng(Br(A,"sales"),{amount:_,date:Date.now()}),await Nr(A,{balance:Hi(_),total:Hi(_)}),r("client",s)};return tt.jsxs("form",{onSubmit:g,children:[tt.jsx("h2",{children:"Nueva Venta"}),tt.jsxs("select",{value:s,onChange:p=>l(p.target.value),required:!0,children:[tt.jsx("option",{value:"",disabled:!0,children:"Selecciona un cliente"}),t.map(p=>tt.jsx("option",{value:p.id,children:p.name},p.id))]}),tt.jsx("input",{value:c,onChange:p=>d(p.target.value),placeholder:"Monto",type:"number",step:"0.01",required:!0}),tt.jsx("button",{type:"submit",children:"Registrar venta"})]})}const I0=Jt.createContext(null);function c2({children:r}){const[t,i]=Jt.useState(null),[s,l]=Jt.useState(null);Jt.useEffect(()=>GI(Sc,async p=>{if(p){if(!(await jv(on(Te,"usuarios",p.email))).exists()){await Zv(Sc),i(null),l(null);return}i(p);const A=on(Te,"users",p.uid),C=await jv(A);C.exists()?l(C.data().role):(await tI(A,{role:"Vendedor"}),l("Vendedor"))}else i(null),l(null)}),[]);const c=()=>cC(Sc,r2),d=()=>Zv(Sc);return tt.jsx(I0.Provider,{value:{user:t,role:s,login:c,logout:d},children:r})}const C0=()=>Jt.useContext(I0);function h2(){const{login:r}=C0();return tt.jsxs("div",{className:"container",children:[tt.jsx("h2",{children:"Ingresa"}),tt.jsx("button",{onClick:r,children:"Iniciar sesión con Google"})]})}function f2({page:r,setPage:t}){const{user:i,role:s,logout:l}=C0();if(!i)return tt.jsx(h2,{});const c=(g,p=null)=>t({name:g,clientId:p});let d;switch(r.name){case"add":d=tt.jsx(a2,{go:c});break;case"client":d=tt.jsx(o2,{id:r.clientId,go:c});break;case"report":d=tt.jsx(l2,{});break;case"sale":d=tt.jsx(u2,{go:c});break;default:d=tt.jsx(s2,{go:c})}return tt.jsxs(tt.Fragment,{children:[tt.jsxs("header",{className:"header",children:[tt.jsxs("span",{children:[i.displayName," - ",s]}),tt.jsx("button",{onClick:l,children:"Cerrar sesión"})]}),tt.jsxs("nav",{children:[tt.jsx("button",{onClick:()=>c("list"),children:"Clientes"}),tt.jsx("button",{onClick:()=>c("add"),children:"Nuevo cliente"}),tt.jsx("button",{onClick:()=>c("report"),children:"Reporte"}),tt.jsx("button",{onClick:()=>c("sale"),children:"Nueva venta"})]}),tt.jsx("div",{className:"container",children:d})]})}function d2(){const[r,t]=Jt.useState({name:"list"});return tt.jsx(c2,{children:tt.jsx(f2,{page:r,setPage:t})})}lS.createRoot(document.getElementById("root")).render(tt.jsx(Jt.StrictMode,{children:tt.jsx(d2,{})}));
